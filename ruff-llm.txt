### Configure Ruff with eFM Language Server

Source: https://docs.astral.sh/ruff/editors/setup

This configuration example demonstrates how to integrate Ruff for linting and formatting Python files using the eFM language server. It specifies the commands for linting and formatting, indicates that input should be read from stdin, and defines the expected output format for linting.

```yaml
tools:
  python-ruff:
    lint-command: "ruff check --stdin-filename ${INPUT} --output-format concise --quiet -"
    lint-stdin: true
    lint-formats:
      - "%f:%l:%c: %m"
    format-command: "ruff format --stdin-filename ${INPUT} --quiet -"
    format-stdin: true

```

--------------------------------

### Neovim LSP Configuration (nvim-lspconfig)

Source: https://docs.astral.sh/ruff/editors/setup

Configures the Ruff Language Server in Neovim using the nvim-lspconfig plugin. This setup is for Neovim versions 0.10 and later. It allows for basic LSP setup and integration with Ruff's features.

```lua
require('lspconfig').ruff.setup({
  init_options = {
    settings = {
      -- Ruff language server settings go here
    }
  }
})

```

--------------------------------

### Prevent Partial Path Process Start (Python)

Source: https://docs.astral.sh/ruff/rules/start-process-with-partial-path

This snippet demonstrates how to avoid starting a process with a partial executable path in Python. It contrasts an insecure example using `subprocess.Popen` with a partial path to 'ruff' with a secure alternative that specifies the full path '/usr/bin/ruff'. Using full paths mitigates the risk of arbitrary executable execution.

```python
import subprocess

# Insecure example
subprocess.Popen(["ruff", "check", "file.py"])

# Secure example
subprocess.Popen(["/usr/bin/ruff", "check", "file.py"])
```

--------------------------------

### Example of Ruff's import sorting for non-aliased imports

Source: https://docs.astral.sh/ruff/faq

Demonstrates how Ruff groups non-aliased imports from the same module, contrasting with isort's behavior. This functionality requires Ruff to be installed.

```python
from numpy import cos, int8, int16, int32, int64, tan, uint8, uint16, uint32, uint64
from numpy import sin as np_sin

```

--------------------------------

### Install Ruff using uv, pip, or pipx

Source: https://docs.astral.sh/ruff/faq

Instructions for installing Ruff globally or adding it to a project using uv, pip, or pipx. uv is recommended for managing tools.

```shell
$ uv tool install ruff@latest

$ uv add --dev ruff

pip install ruff

pipx install ruff

```

--------------------------------

### Install uv Tool

Source: https://docs.astral.sh/ruff/contributing

Installs the `uv` package manager using a curl script. This is the recommended method for installing `uv` on most systems. It fetches and executes an installation script from the official Astral website.

```shell
curl -LsSf https://astral.sh/uv/install.sh | sh
```

--------------------------------

### Zed: Configure Ruff server settings

Source: https://docs.astral.sh/ruff/editors/setup

Sets editor-wide Ruff options in Zed by configuring the `lsp.ruff.initialization_options.settings` in `settings.json`. Allows customization of line length and linting rules.

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          // Ruff server settings go here
          "lineLength": 80,
          "lint": {
            "extendSelect": ["I"],
          }
        }
      }
    }
  }
}
```

--------------------------------

### Configure Ruff in Kate using LSP Client

Source: https://docs.astral.sh/ruff/editors/setup

This JSON configuration snippet defines how to set up Ruff as a language server within Kate's LSP Client plugin. It specifies the command to execute Ruff and provides a URL for its repository. Note that Kate's LSP Client does not support multiple servers for the same language.

```json
{
  "servers": {
    "python": {
      "command": ["ruff", "server"],
      "url": "https://github.com/astral-sh/ruff",
      "highlightingModeRegex": "^Python$",
      "settings": {}
    }
  }
}

```

--------------------------------

### Install hyperfine Benchmarking Tool

Source: https://docs.astral.sh/ruff/contributing

Installs the `hyperfine` command-line benchmarking tool using Cargo, the Rust package manager. This tool is used to measure the execution time of commands.

```bash
cargo install hyperfine
```

--------------------------------

### Configure Ruff with pyproject.toml and ruff.toml

Source: https://docs.astral.sh/ruff/faq

These examples show equivalent Ruff configurations using both `pyproject.toml` and `ruff.toml`. `ruff.toml` offers an alternative for projects not using `pyproject.toml`, omitting the `[tool.ruff]` header but maintaining the same schema.

```toml
[tool.ruff]
line-length = 88

[tool.ruff.lint.pydocstyle]
convention = "google"

```

```toml
line-length = 88

[lint.pydocstyle]
convention = "google"

```

--------------------------------

### Ruff Advanced Configuration Example (pyproject.toml / ruff.toml)

Source: https://docs.astral.sh/ruff/configuration

This example demonstrates advanced Ruff configuration, including enabling additional linting rules (flake8-bugbear), ignoring specific rules globally or per file, and customizing formatting for quotes. It shows how to use `select`, `ignore`, `unfixable`, and `per-file-ignores` for linting, and `quote-style` for formatting.

```toml
[tool.ruff.lint]
# 1. Enable flake8-bugbear (`B`) rules, in addition to the defaults.
select = ["E4", "E7", "E9", "F", "B"]

# 2. Avoid enforcing line-length violations (`E501`)
ignore = ["E501"]

# 3. Avoid trying to fix flake8-bugbear (`B`) violations.
unfixable = ["B"]

# 4. Ignore `E402` (import violations) in all `__init__.py` files, and in selected subdirectories.
[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["E402"]
"**/{tests,docs,tools}/*" = ["E402"]

[tool.ruff.format]
# 5. Use single quotes in `ruff format`.
quote-style = "single"

```

```toml
# 1. Enable flake8-bugbear (`B`) rules, in addition to the defaults.
select = ["E4", "E7", "E9", "F", "B"]

# 2. Avoid enforcing line-length violations (`E501`)
ignore = ["E501"]


```

--------------------------------

### Add New Configuration Option Example (Rust)

Source: https://docs.astral.sh/ruff/contributing

Illustrates where to define user-facing settings in Ruff. Command-line options are in `args.rs`, while `pyproject.toml` options are managed in `options.rs`, `configuration.rs`, and `settings.rs` within `crates/ruff_workspace`. Plugin-specific options have their own modules.

```rust
// Example: Command-line options definition
// crates/ruff/src/args.rs
struct Args {
    // ...
}

// Example: pyproject.toml options schema
// crates/ruff_workspace/src/options.rs
struct Options {
    // ...
}

// Example: Internal intermediate representation
// crates/ruff_workspace/src/configuration.rs
struct Configuration {
    // ...
}

// Example: Final internal representation
// crates/ruff_workspace/src/settings.rs
struct Settings {
    linter: LinterSettings,
    // ...
}

// Example: Plugin-specific settings
// crates/ruff_linter/src/flake8_unused_arguments/settings.rs
struct Settings {
    // ...
}

// Example: Plugin-specific options (intermediate representation)
// crates/ruff_workspace/src/options.rs
struct Flake8UnusedArgumentsOptions {
    // ...
}
```

--------------------------------

### Run MkDocs Development Server (Contributors)

Source: https://docs.astral.sh/ruff/contributing

Starts the MkDocs development server for external contributors. This command utilizes `uvx` to manage Python environments and dependencies, serving the documentation locally for preview. It uses the public MkDocs configuration.

```shell
# For contributors.
uvx --with-requirements docs/requirements.txt -- mkdocs serve -f mkdocs.public.yml
```

--------------------------------

### Configure Ruff in Vim using vim-lsp

Source: https://docs.astral.sh/ruff/editors/setup

This snippet shows how to register the Ruff language server with the vim-lsp plugin in Vim. It includes setting the command, allowed languages, and workspace configuration. It also demonstrates how to defer to other LSP capabilities like hoverProvider.

```vim
if executable('ruff')
    au User lsp_setup call lsp#register_server({
        \ 'name': 'ruff',
        \ 'cmd': {server_info->['ruff', 'server']},
        \ 'allowlist': ['python'],
        \ 'workspace_config': {},
        \ })
endif

function! s:on_lsp_buffer_enabled() abort
    let l:capabilities = lsp#get_server_capabilities('ruff')
    if !empty(l:capabilities)
      let l:capabilities.hoverProvider = v:false

endif
endfunction

```

--------------------------------

### Neovim: Configure Pyright to use Ruff for Imports and Linting

Source: https://docs.astral.sh/ruff/editors/setup

Configures the Pyright language server in Neovim to delegate import organization and linting exclusively to Ruff. This setup optimizes the workflow for Python projects using Ruff for code quality checks.

```lua
require('lspconfig').pyright.setup {
  settings = {
    pyright = {
      -- Using Ruff's import organizer
      disableOrganizeImports = true,
    },
    python = {
      analysis = {
        -- Ignore all files for analysis to exclusively use Ruff for linting
        ignore = { '*' },
      },
    },
  },
}

```

--------------------------------

### Neovim LSP Configuration (vim.lsp.config)

Source: https://docs.astral.sh/ruff/editors/setup

Configures the Ruff Language Server in Neovim using the built-in vim.lsp.config for Neovim 0.11+. This method is for newer Neovim versions and enables Ruff's LSP capabilities.

```lua
vim.lsp.config('ruff', {
  init_options = {
    settings = {
      -- Ruff language server settings go here
    }
  }
})

vim.lsp.enable('ruff')

```

--------------------------------

### Run MkDocs Development Server (Astral Org Members)

Source: https://docs.astral.sh/ruff/contributing

Starts the MkDocs development server for members of the Astral organization, allowing preview of documentation with Insiders features. It uses `uvx` for environment management and the insiders MkDocs configuration.

```shell
# For members of the Astral org, which has access to MkDocs Insiders via sponsorship.
uvx --with-requirements docs/requirements-insiders.txt -- mkdocs serve -f mkdocs.insiders.yml
```

--------------------------------

### Run Ruff from Command Line

Source: https://docs.astral.sh/ruff/installation

Invoke Ruff commands directly from the command line after installation. This allows you to lint and format files in the current directory. These commands are available once Ruff is installed via `uv`, `pip`, or `pipx`.

```shell
$ ruff check   # Lint all files in the current directory.
$ ruff format  # Format all files in the current directory.

```

--------------------------------

### Install Ruff with pkgx

Source: https://docs.astral.sh/ruff/installation

Install Ruff using the `pkgx` package manager. This command fetches Ruff from the `pkgx` registry, providing a unified way to manage software across different systems.

```shell
pkgx install ruff

```

--------------------------------

### Run Ruff with uvx

Source: https://docs.astral.sh/ruff/installation

Execute Ruff commands directly using the `uvx` command-line tool. This method is useful for quick checks or when Ruff is not permanently installed. It allows linting and formatting of files in the current directory.

```shell
uvx ruff check   # Lint all files in the current directory.
uvx ruff format  # Format all files in the current directory.

```

--------------------------------

### Python Dummy Variable Example

Source: https://docs.astral.sh/ruff/rules/used-dummy-variable

Demonstrates the use of variables starting with underscores that are intended to be unused but are actually referenced. The example shows a common scenario in Python where leading underscores are used for naming conventions, and then provides the corrected version.

```python
def function():
    _variable = 3
    # important: avoid shadowing the builtin `id()` function!
    _id = 4
    return _variable + _id

```

```python
def function():
    variable = 3
    # important: avoid shadowing the builtin `id()` function!
    id_ = 4
    return variable + id_

```

--------------------------------

### Emacs: Configure Ruff as a Language Server with Eglot

Source: https://docs.astral.sh/ruff/editors/setup

Enables Ruff as a language server using Eglot in Emacs for automatic formatting on save. Requires Eglot to be available and Ruff installed as a Python package.

```emacs-lisp
(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               '(python-base-mode . ("ruff" "server"))))
(add-hook 'python-base-mode-hook
          (lambda ()
            (eglot-ensure)
            (add-hook 'after-save-hook 'eglot-format nil t)))
```

--------------------------------

### Neovim: nvim-lint Configuration

Source: https://docs.astral.sh/ruff/editors/setup

Configures the nvim-lint plugin in Neovim to use Ruff as the linter for Python files. This setup ensures that Ruff's linting capabilities are utilized within the nvim-lint framework.

```lua
require("lint").linters_by_ft = {
  python = { "ruff" },
}

```

--------------------------------

### Install Ruff with Standalone Installers

Source: https://docs.astral.sh/ruff/installation

Install Ruff using standalone shell scripts for macOS, Linux, and Windows. These installers download and set up Ruff without requiring a specific package manager. You can also specify a version for installation.

```shell
$ # On macOS and Linux.
$ curl -LsSf https://astral.sh/ruff/install.sh | sh

$ # On Windows.
$ powershell -c "irm https://astral.sh/ruff/install.ps1 | iex"

$ # For a specific version.
$ curl -LsSf https://astral.sh/ruff/0.5.0/install.sh | sh
$ powershell -c "irm https://astral.sh/ruff/0.5.0/install.ps1 | iex"

```

--------------------------------

### Install Ruff using uv

Source: https://docs.astral.sh/ruff/installation

Install Ruff as a development dependency for your project or globally using the `uv` package manager. `uv` is a fast Python package installer and resolver. This method is recommended for managing project dependencies.

```shell
$ # Install Ruff globally.
$ uv tool install ruff@latest

$ # Or add Ruff to your project.
$ uv add --dev ruff

```

--------------------------------

### GitHub Actions with ruff-action and Custom Configuration

Source: https://docs.astral.sh/ruff/integrations

This example shows how to use the `ruff-action` with custom parameters to specify the Ruff version, command-line arguments, and source directories. This allows for fine-grained control over Ruff's execution within a GitHub Actions workflow.

```yaml
- uses: astral-sh/ruff-action@v3
  with:
    version: 0.8.0
    args: check --select B
    src: "./src"
```

--------------------------------

### Install cargo-instruments for macOS Profiling

Source: https://docs.astral.sh/ruff/contributing

Installs the `cargo-instruments` tool, which is used for profiling Rust applications on macOS using Instruments. Dependencies: Rust toolchain, Cargo.

```shell
cargo install cargo-instruments
```

--------------------------------

### Migrate ruff-lsp config file to native server

Source: https://docs.astral.sh/ruff/editors/migration

This example shows how to migrate a `ruff-lsp` configuration file path from `ruff.lint.args` and `ruff.format.args` to the `ruff.configuration` setting in the native Ruff server.

```json
{
    "ruff.lint.args": "--config ~/.config/custom_ruff_config.toml",
    "ruff.format.args": "--config ~/.config/custom_ruff_config.toml"
}
```

```json
{
    "ruff.configuration": "~/.config/custom_ruff_config.toml"
}
```

--------------------------------

### Install critcmp for Benchmark Comparison

Source: https://docs.astral.sh/ruff/contributing

Installs the `critcmp` tool, which is used for comparing benchmark results generated by Criterion.rs. Dependencies: Rust toolchain, Cargo.

```shell
cargo install critcmp
```

--------------------------------

### Install npm using Homebrew

Source: https://docs.astral.sh/ruff/contributing

Installs Node Package Manager (npm) using the Homebrew package manager. This is a common method for macOS users. Ensure Homebrew is installed before running this command.

```shell
brew install npm
```

--------------------------------

### Configure Ruff in Helix

Source: https://docs.astral.sh/ruff/editors/setup

This configuration sets up Ruff as a language server in Helix. It specifies the command to run Ruff and registers it for Python development. It also shows how to manage multiple language servers and enable auto-formatting.

```toml
[language-server.ruff]
command = "ruff"
args = ["server"]

[[language]]
name = "python"
language-servers = ["ruff"]
auto-format = true

[language-server.ruff.config.settings]
lineLength = 80

[language-server.ruff.config.settings.lint]
select = ["E4", "E7"]
preview = false

[language-server.ruff.config.settings.format]
preview = true

[language-server.ruff.config.settings]
logLevel = "debug"

```

--------------------------------

### Migrate ruff-lsp lint.args to native server lint.select and configuration

Source: https://docs.astral.sh/ruff/editors/migration

This example demonstrates migrating `ruff-lsp`'s `lint.args` for specifying linter flags to the native Ruff server's `lint.select` and `configuration` settings, allowing for more granular control.

```json
{
    "ruff.lint.args": "--select=E,F --unfixable=F401 --unsafe-fixes"
}
```

```json
{
    "ruff.lint.select": ["E", "F"],
    "ruff.configuration": {
        "unsafe-fixes": true,
        "lint": {
            "unfixable": ["F401"]
        }
    }
}
```

--------------------------------

### Ruff CLI command for checking files

Source: https://docs.astral.sh/ruff/configuration

This command-line example shows how to use Ruff to check specific files or directories. It demonstrates using flags like `--select` to specify rules and `--quiet` to control output verbosity.

```bash
$ ruff check path/to/code/ --select F401 --select F403 --quiet

```

--------------------------------

### Neovim: Conform.nvim Formatting Configuration

Source: https://docs.astral.sh/ruff/editors/setup

Configures the conform.nvim plugin in Neovim to use Ruff for formatting Python code. It specifies 'ruff_fix', 'ruff_format', and 'ruff_organize_imports' as formatters to handle auto-fixing, formatting, and import organization.

```lua
require("conform").setup({
    formatters_by_ft = {
        python = {
          -- To fix auto-fixable lint errors.
          "ruff_fix",
          -- To run the Ruff formatter.
          "ruff_format",
          -- To organize the imports.
          "ruff_organize_imports",
        },
    },
})

```

--------------------------------

### Install Ruff using pip

Source: https://docs.astral.sh/ruff/installation

Install Ruff using the standard Python package installer, `pip`. This command adds Ruff to your Python environment, making it available for use. Ensure pip is up-to-date for the best experience.

```shell
pip install ruff

```

--------------------------------

### Install Ruff on openSUSE Tumbleweed

Source: https://docs.astral.sh/ruff/installation

Install Ruff on openSUSE Tumbleweed from the distribution repository using `zypper`. This command installs the Python 3 Ruff package.

```shell
sudo zypper install python3-ruff

```

--------------------------------

### Install Ruff on Arch Linux

Source: https://docs.astral.sh/ruff/installation

Install Ruff on Arch Linux systems from the official repositories using `pacman`. This is the standard method for installing packages on Arch Linux.

```shell
pacman -S ruff

```

--------------------------------

### Zed: Enable Ruff code actions on format

Source: https://docs.astral.sh/ruff/editors/setup

Configures Zed to perform Ruff-specific code actions when formatting Python files. This includes organizing imports and fixing auto-fixable lint violations.

```json
{
  "languages": {
    "Python": {
      "code_actions_on_format": {
        // Organize imports
        "source.organizeImports.ruff": true,
        // Fix all auto-fixable lint violations
        "source.fixAll.ruff": true
      }
    }
  }
}
```

--------------------------------

### Install Ruff using pipx

Source: https://docs.astral.sh/ruff/installation

Install Ruff globally as an application using `pipx`. `pipx` allows you to install and run Python applications in isolated environments, preventing dependency conflicts. This is suitable for tools you want to use across multiple projects.

```shell
pipx install ruff

```

--------------------------------

### Python: Execute command safely with os.system (literal string)

Source: https://docs.astral.sh/ruff/rules/start-process-with-a-shell

Demonstrates safe usage of `os.system` by passing a literal string command. This approach is considered safe as it avoids shell interpretation of dynamic input, mitigating risks of code injection.

```python
import os

# Safe usage (literal string)
command = "ls -l"
os.system(command)
```

--------------------------------

### Ruff pyproject.toml Example for Extending Configuration

Source: https://docs.astral.sh/ruff/contributing

This snippet demonstrates how to configure Ruff within a pyproject.toml file to extend another configuration file. Ruff uses the directory containing the pyproject.toml file as the project root, even when extending an external configuration.

```toml
[tool.ruff]
extend = "/path/to/pyproject.toml"

```

--------------------------------

### Example of isort's import sorting for non-aliased imports

Source: https://docs.astral.sh/ruff/faq

Illustrates how isort typically splits non-aliased imports from the same module into separate statements, especially around aliased imports. This is a comparative example.

```python
from numpy import cos, int8, int16, int32, int64
from numpy import sin as np_sin
from numpy import tan, uint8, uint16, uint32, uint64

```

--------------------------------

### Neovim: Set LSP Client Log Level

Source: https://docs.astral.sh/ruff/editors/setup

Sets the log level for Neovim's LSP client to 'debug' to view trace logs between Neovim and Ruff. This is useful for diagnosing communication issues between the editor and the language server.

```lua
vim.lsp.set_log_level('debug')

```

--------------------------------

### Python Docstring 'This' Violation Example

Source: https://docs.astral.sh/ruff/rules/docstring-starts-with-this

Illustrates a Python function with a docstring that violates the D404 rule by starting with 'This', and shows the corrected version following PEP 257 recommendations.

```python
def average(values: list[float]) -> float:
    """This function returns the mean of the given values."""


```

```python
def average(values: list[float]) -> float:
    """Return the mean of the given values."""


```

--------------------------------

### Example of io-error (E902) in Ruff

Source: https://docs.astral.sh/ruff/rules/io-error

Demonstrates how Ruff raises an E902 error when a Python file lacks read permissions. This highlights a common setup issue where the linter cannot access the target file.

```shell
$ echo 'print("hello world!")' > a.py
$ chmod 000 a.py
$ ruff a.py
a.py:1:1: E902 Permission denied (os error 13)
Found 1 error.

```

--------------------------------

### Emacs: Enable Ruff formatting with emacs-ruff-format

Source: https://docs.astral.sh/ruff/editors/setup

Sets up automatic Ruff formatting on save in Emacs using the `emacs-ruff-format` package. This hook ensures Ruff is used for formatting when files are saved.

```emacs-lisp
(require 'ruff-format)
(add-hook 'python-mode-hook 'ruff-format-on-save-mode)
```

--------------------------------

### Avoid starting processes without a shell using os.spawnlp

Source: https://docs.astral.sh/ruff/rules/start-process-with-no-shell

This Python snippet demonstrates the use of `os.spawnlp` to start an external process without a shell. This function is flagged by the S606 rule due to potential security risks if `arbitrary_user_input` is not properly validated, as it's passed directly to the executable.

```python
import os


def insecure_function(arbitrary_user_input: str):
    os.spawnlp(os.P_NOWAIT, "/bin/mycmd", "mycmd", arbitrary_user_input)
```

--------------------------------

### Zed: Disable Python format on save

Source: https://docs.astral.sh/ruff/editors/setup

Disables the default format on save behavior for Python files in Zed by setting `format_on_save` to `off` within the `languages.Python` configuration in `settings.json`.

```json
{
  "languages": {
    "Python": {
      "format_on_save": "off"
    }
  }
}
```

--------------------------------

### Unsorted __slots__ Example (Python)

Source: https://docs.astral.sh/ruff/rules/unsorted-dunder-slots

Demonstrates an example of a Python class with __slots__ defined in an unsorted manner, followed by the corrected version with naturally sorted slots. This highlights the rule's focus on consistent ordering.

```python
class Dog:
    __slots__ = "name", "breed"


```

```python
class Dog:
    __slots__ = "breed", "name"

```

--------------------------------

### Install Ruff on Alpine Linux

Source: https://docs.astral.sh/ruff/installation

Install Ruff on Alpine Linux systems from the testing repositories using `apk`. This command adds Ruff to your Alpine environment.

```shell
apk add ruff

```

--------------------------------

### Emacs: Integrate Ruff using flymake-ruff

Source: https://docs.astral.sh/ruff/editors/setup

Integrates Ruff linting into Emacs using the `flymake-ruff` package available on MELPA. This hook ensures Ruff linting is loaded for Python modes.

```emacs-lisp
(require 'flymake-ruff)
(add-hook 'python-mode-hook #'flymake-ruff-load)
```

--------------------------------

### Neovim/Vim: ALE Linting and Formatting Configuration (Lua)

Source: https://docs.astral.sh/ruff/editors/setup

Configures the ALE plugin in Neovim using Lua to enable Ruff for linting and formatting Python code. It sets 'ruff' as the linter and 'ruff', 'ruff_format' as fixers for code correction and formatting.

```lua
-- Linters
vim.g.ale_linters = { python = { "ruff" } }
-- Fixers
vim.g.ale_fixers = { python = { "ruff", "ruff_format" } }

```

--------------------------------

### Clone CPython Repository

Source: https://docs.astral.sh/ruff/contributing

Clones the CPython repository to the specified path. This is a prerequisite for benchmarking Ruff against the CPython codebase. Ensure you have Git installed.

```bash
git clone --branch 3.10 https://github.com/python/cpython.git crates/ruff_linter/resources/test/cpython
```

--------------------------------

### Running Ruff Formatter Commands

Source: https://docs.astral.sh/ruff/formatter

Demonstrates how to use the `ruff format` command to format Python files and directories. It shows basic usage, directory formatting, single file formatting, and the `--check` flag for non-writing checks. This is the primary entrypoint for the Ruff formatter.

```bash
ruff format                   # Format all files in the current directory.
ruff format path/to/code/     # Format all files in `path/to/code` (and any subdirectories).
ruff format path/to/file.py   # Format a single file.
ruff format --check /path/to/file.py # Check for unformatted files without writing changes.
```

--------------------------------

### Neovim/Vim: ALE Linting and Formatting Configuration (Vimscript)

Source: https://docs.astral.sh/ruff/editors/setup

Configures the ALE plugin in Vim using Vimscript to enable Ruff for linting and formatting Python code. It sets 'ruff' as the linter and 'ruff', 'ruff_format' as fixers for code correction and formatting.

```vimscript
" Linters
let g:ale_linters = { "python": ["ruff"] }
" Fixers
let g:ale_fixers = { "python": ["ruff", "ruff_format"] }

```

--------------------------------

### Python: Execute command potentially unsafely with os.system (expression)

Source: https://docs.astral.sh/ruff/rules/start-process-with-a-shell

Illustrates potentially unsafe usage of `os.system` with a command constructed from an expression or user input. This is flagged as potentially unsafe due to the risk of shell interpretation and code injection vulnerabilities.

```python
import os

# Potentially unsafe usage (expression)
cmd = get_user_input() # Assuming get_user_input() returns a string from user input
os.system(cmd)
```

--------------------------------

### Migrate ruff-lsp format.args to native server lineLength and configuration

Source: https://docs.astral.sh/ruff/editors/migration

This example illustrates migrating `ruff-lsp`'s `format.args` for formatter flags, such as line length and quote style, to the native Ruff server's `lineLength` and `configuration` settings.

```json
{
    "ruff.format.args": "--line-length 80 --config='format.quote-style=double'"
}
```

```json
{
    "ruff.lineLength": 80,
    "ruff.configuration": {
        "format": {
            "quote-style": "double"
        }
    }
}
```

--------------------------------

### Emacs: Configure Apheleia formatter with Ruff

Source: https://docs.astral.sh/ruff/editors/setup

Configures the Apheleia formatter library in Emacs to use Ruff for both import sorting and general formatting for Python modes. This overrides the default 'black' formatter.

```emacs-lisp
;; Replace default (black) to use ruff for sorting import and formatting.
(setf (alist-get 'python-mode apheleia-mode-alist)
      '(ruff-isort ruff))
(setf (alist-get 'python-ts-mode apheleia-mode-alist)
      '(ruff-isort ruff))
```

--------------------------------

### Install Ruff with Homebrew

Source: https://docs.astral.sh/ruff/installation

Install Ruff on macOS or Linux systems using Homebrew or Linuxbrew. This command installs Ruff as a system-wide tool, managed by the Homebrew package manager.

```shell
brew install ruff

```

--------------------------------

### Neovim: Set Ruff Log Level

Source: https://docs.astral.sh/ruff/editors/setup

Sets the log level for the Ruff language server in Neovim. This allows for adjusting the verbosity of Ruff's logs, with options like 'info' (default) or 'debug' for more detailed output.

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      logLevel = 'debug',
    }
  }
}

```

--------------------------------

### Initialize Python Project with uv

Source: https://docs.astral.sh/ruff/tutorial

Initializes a new Python project using the `uv` package manager, creating a basic project structure with a library. This sets up the foundational files for the project.

```bash
$ uv init --lib numbers

```

--------------------------------

### Ruff Docstring Formatting Example

Source: https://docs.astral.sh/ruff/formatter

Demonstrates how Ruff reformats a Python code example within a reStructuredText `code-block` directive in a docstring. The code is reformatted to adhere to the specified line length limit.

```python
def f(x):
    '''
    Something about `f`. And an example:

    .. code-block:: python

        foo, bar, quux = this_is_a_long_line(lion, hippo, lemur, bear)
    '''
    pass


```

```python
def f(x):
    """
    Something about `f`. And an example:

    .. code-block:: python

        (
            foo,
            bar,
            quux,
        ) = this_is_a_long_line(
            lion,
            hippo,
            lemur,
            bear,
        )
    """
    pass

```

--------------------------------

### Module Documentation Example (Python)

Source: https://docs.astral.sh/ruff/rules/undocumented-public-module

Illustrates the correct way to document a Python module using a docstring that summarizes its purpose and lists its exported components. This adheres to PEP 257 conventions.

```python
"""Utility functions and classes for calculating speed.

This module provides:
- FasterThanLightError: exception when FTL speed is calculated;
- calculate_speed: calculate speed given distance and time.
"""


class FasterThanLightError(ZeroDivisionError): ...


def calculate_speed(distance: float, time: float) -> float: ...

```

--------------------------------

### Run Ruff with Docker

Source: https://docs.astral.sh/ruff/installation

Execute Ruff commands within a Docker container. This method allows you to use Ruff without installing it directly on your host system. You can mount your project directory into the container for linting and formatting.

```shell
$ docker run -v .:/io --rm ghcr.io/astral-sh/ruff check
$ docker run -v .:/io --rm ghcr.io/astral-sh/ruff:0.3.0 check

$ # Or, for Podman on SELinux.
$ docker run -v .:/io:Z --rm ghcr.io/astral-sh/ruff check

```

--------------------------------

### Configure Ruff's src directories in ruff.toml

Source: https://docs.astral.sh/ruff/faq

Shows how to set the 'src' directories for Ruff in a ruff.toml file, defining the paths Ruff uses to identify first-party code.

```toml
# Ruff supports a top-level `src` option in lieu of isort's `src_paths` setting.

```

--------------------------------

### Benchmark Ruff with Specific Rules

Source: https://docs.astral.sh/ruff/contributing

Builds Ruff in release mode and then benchmarks its performance using `hyperfine` for a specific subset of rules (LineTooLong and DocLineTooLong) applied to the CPython repository. This allows for targeted performance analysis.

```bash
cargo build --release && hyperfine --warmup 10 \
  "./target/release/ruff check ./crates/ruff_linter/resources/test/cpython/ --no-cache -e --select W505,E501"
```

--------------------------------

### Neovim: Disable Ruff Hover Provider

Source: https://docs.astral.sh/ruff/editors/setup

Disables the hover capability for the Ruff language server in Neovim when another language server like Pyright is active. This prevents conflicts and ensures hover information comes from the preferred server.

```lua
vim.api.nvim_create_autocmd('LspAttach', {
  group = vim.api.nvim_create_augroup('lsp_attach_disable_ruff_hover', { clear = true }),
  callback = function(args)
    local client = vim.lsp.get_client_by_id(args.data.client_id)
    if client == nil then
      return
    end
    if client.name == 'ruff' then
      -- Disable hover in favor of Pyright
      client.server_capabilities.hoverProvider = false
    end
  end,
  desc = 'LSP: Disable hover capability from Ruff',
})

```

--------------------------------

### Ruff TD003 Example: Correct TODO Comment Formats

Source: https://docs.astral.sh/ruff/rules/missing-todo-link

Demonstrates various correct formats for TODO comments that comply with the TD003 rule. These examples include links to GitHub issues, 3-digit issue codes, and custom issue codes with prefixes, all providing necessary context.

```python
# TODO(charlie): this comment has an issue link
# https://github.com/astral-sh/ruff/issues/3870

```

```python
# TODO(charlie): this comment has a 3-digit issue code
# 003

```

```python
# TODO(charlie): https://github.com/astral-sh/ruff/issues/3870
# this comment has an issue link

```

```python
# TODO(charlie): #003 this comment has a 3-digit issue code
# with leading character `#`

```

```python
# TODO(charlie): this comment has an issue code (matches the regex `[A-Z]+\-?\d+`)
# SIXCHR-003

```

--------------------------------

### Generate MkDocs Site with Requirements

Source: https://docs.astral.sh/ruff/contributing

This command generates the MkDocs site using specified requirements. It requires the `uv` tool to manage Python environments and dependencies. The output is the static site for documentation.

```shell
uv run --no-project --isolated --with-requirements docs/requirements.txt scripts/generate_mkdocs.py
```

--------------------------------

### Corrected pytest.raises usage with single statement

Source: https://docs.astral.sh/ruff/rules/pytest-raises-with-multiple-statements

Shows the correct way to use pytest.raises by isolating the code that is expected to raise an exception within the context manager. Other operations, like setup and assertions, are placed outside the context manager to ensure proper test execution and assertion. This example uses Python.

```python
import pytest

def test_foo():
    setup()
    with pytest.raises(MyError):
        func_to_test()
    assert foo()
```

--------------------------------

### Configure Ruff Docstring Code Formatting (TOML)

Source: https://docs.astral.sh/ruff/formatter

This configuration enables automatic formatting of Python code examples within docstrings using Ruff. It allows setting a specific line length limit for these formatted examples. The format is TOML.

```toml
[tool.ruff.format]
docstring-code-format = true
docstring-code-line-length = 20

```

--------------------------------

### Configure Ruff Linting Rules and First-Party Modules

Source: https://docs.astral.sh/ruff/faq

This configuration sets up Ruff's linting rules, selecting checks from Pyflakes, Pycodestyle, and isort. It also defines `known-first-party` modules, which Ruff treats as internal regardless of their location, aiding in accurate import analysis. This is typically placed within `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff]
src = ["src", "tests"]

[tool.ruff.lint]
select = [
    # Pyflakes
    "F",
    # Pycodestyle
    "E",
    "W",
    # isort
    "I001"
]

[tool.ruff.lint.isort]
known-first-party = ["my_module1", "my_module2"]

```

```toml
src = ["src", "tests"]

[lint]
select = [
    # Pyflakes
    "F",
    # Pycodestyle
    "E",
    "W",
    # isort
    "I001"
]

[lint.isort]
known-first-party = ["my_module1", "my_module2"]

```

--------------------------------

### Enable Ruff Preview Mode for Formatting

Source: https://docs.astral.sh/ruff/editors/settings

This configuration enables Ruff's preview mode when formatting. Preview mode may include experimental formatting options. Examples are provided for VS Code, Neovim, and Zed.

```json
{
    "ruff.format.preview": true
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      format = {
        preview = true
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "format": {
            "preview": true
          }
        }
      }
    }
  }
}
```

--------------------------------

### Corrected __post_init__ using InitVar

Source: https://docs.astral.sh/ruff/rules/post-init-default

Illustrates the correct way to define default values for init-only fields in dataclasses using InitVar. This corrected example ensures that default values are properly handled by both the generated __init__ and __post_init__ methods, aligning with Python dataclass best practices.

```python
from dataclasses import InitVar, dataclass


@dataclass
class Foo:
    bar: InitVar[int] = 1
    baz: InitVar[int] = 2

    def __post_init__(self, bar: int, baz: int) -> None:
        print(bar, baz)


foo = Foo()  # Prints '1 2'.

```

--------------------------------

### Blank Lines at Start of Block - Python

Source: https://docs.astral.sh/ruff/formatter/black

Highlights a difference in handling blank lines at the start of code blocks. Black 24+ allows them, while Ruff removes them. Ruff's current stance is to avoid unintentional blank lines, with a potential future adoption of Black's behavior.

```python
# Black
if x:

  a = 123

# Ruff
if x:
  a = 123


```

--------------------------------

### Configure Ruff Docstring Code Formatting (INI)

Source: https://docs.astral.sh/ruff/formatter

This configuration enables automatic formatting of Python code examples within docstrings using Ruff. It allows setting a specific line length limit for these formatted examples. The format is INI.

```ini
[format]
docstring-code-format = true
docstring-code-line-length = 20

```

--------------------------------

### Enable Ruff Preview Mode for Linting

Source: https://docs.astral.sh/ruff/editors/settings

This configuration enables Ruff's preview mode when linting. Preview mode might include experimental features or rules. Examples cover VS Code, Neovim, and Zed.

```json
{
    "ruff.lint.preview": true
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lint = {
        preview = true
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lint": {
            "preview": true
          }
        }
      }
    }
  }
}
```

--------------------------------

### Check Module Availability with importlib (Python)

Source: https://docs.astral.sh/ruff/rules/unused-import

Demonstrates how to safely check if a module is installed using `importlib.util.find_spec` instead of relying on import statements that might be flagged as unused.

```python
from importlib import util

if util.find_spec("numpy") is not None:
    print("numpy is installed")
else:
    print("numpy is not installed")

```

--------------------------------

### Configure Ruff Output Format

Source: https://docs.astral.sh/ruff/settings

Sets the desired format for displaying violation messages. Options include 'full', 'concise', 'grouped', 'json', 'junit', 'github', 'gitlab', 'pylint', and 'azure', each offering different levels of detail or machine-readability. Default is 'full'.

```toml
[tool.ruff]
# Group violations by containing file.
output-format = "grouped"

```

```toml
# Group violations by containing file.
output-format = "grouped"

```

--------------------------------

### Run Ruff on Jupyter Notebooks with nbQA

Source: https://docs.astral.sh/ruff/faq

This command demonstrates how to use `nbQA` to run Ruff checks on a Jupyter Notebook file (`.ipynb`). `nbQA` acts as a wrapper, allowing Ruff to process notebook cells and report any linting errors found. The output shows example errors like unused variables and incorrect import placement.

```bash
$ nbqa ruff Untitled.ipynb
Untitled.ipynb:cell_1:2:5: F841 Local variable `x` is assigned to but never used
Untitled.ipynb:cell_2:1:1: E402 Module level import not at top of file
Untitled.ipynb:cell_2:1:8: F401 `os` imported but unused
Found 3 errors.
1 potentially fixable with the `--fix` option.

```

--------------------------------

### Configure Ruff Log File Path (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Specifies the file path for Ruff server logs. If not set, logs are directed to stderr. Example path: '~/path/to/ruff.log'.

```json
{
    "ruff.logFile": "~/path/to/ruff.log"
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      logFile = "~/path/to/ruff.log"
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "logFile": "~/path/to/ruff.log"
        }
      }
    }
  }
}
```

--------------------------------

### Python: Boolean Positional Argument Example

Source: https://docs.astral.sh/ruff/rules/boolean-default-value-positional-argument

Demonstrates the problematic use of boolean positional arguments in a Python function. The example highlights the ambiguity of passing boolean values directly and suggests refactoring for clarity.

```python
from math import ceil, floor


def round_number(number, up=True):
    return ceil(number) if up else floor(number)


round_number(1.5, True)  # What does `True` mean?
round_number(1.5, False)  # What does `False` mean?

```

--------------------------------

### Example of Ruff Checking Output

Source: https://docs.astral.sh/ruff/tutorial

This shows the output of Ruff when checking a file, highlighting detected errors such as UP035 (import from collections.abc) and D104 (missing docstring).

```bash
$ uv run ruff check
src/numbers/__init__.py:1:1: D104 Missing docstring in public package
src/numbers/calculate.py:1:1: UP035 [*] Import from `collections.abc` instead: `Iterable`
  |
1 |
  |
  = help: Import from `collections.abc`

src/numbers/calculate.py:1:1: D100 Missing docstring in public module
Found 3 errors.
[*] 1 fixable with the `--fix` option.

```

--------------------------------

### Generate Ruff Options Table

Source: https://docs.astral.sh/ruff/contributing

Creates a markdown-compatible table detailing all available `pyproject.toml` options for Ruff. This is used to generate the settings documentation available at https://docs.astral.sh/ruff/settings/.

```bash
cargo dev generate-options
```

--------------------------------

### Controlling Fixable Rules in Ruff

Source: https://docs.astral.sh/ruff/linter

Shows how to define which rules Ruff should attempt to fix using the 'fixable' and 'unfixable' settings. Examples include fixing all rules except specific ones, and fixing only specific rules.

```toml
[tool.ruff.lint]
fixable = ["ALL"]
unfixable = ["F401"]
```

```toml
[lint]
fixable = ["ALL"]
unfixable = ["F401"]
```

```toml
[tool.ruff.lint]
fixable = ["F401"]
```

```toml
[lint]
fixable = ["F401"]
```

--------------------------------

### GitHub Actions CI Workflow with Ruff

Source: https://docs.astral.sh/ruff/integrations

This GitHub Actions workflow sets up Python, installs Ruff, and runs Ruff checks with GitHub-specific output formatting for inline annotations. It ensures code quality checks are performed automatically on pushes.

```yaml
name: CI
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install ruff
      # Update output format to enable automatic inline annotations.
      - name: Run Ruff
        run: ruff check --output-format=github .
```

--------------------------------

### Docstring Imperative Mood Example (Python)

Source: https://docs.astral.sh/ruff/rules/non-imperative-mood

Demonstrates the correct and incorrect way to phrase the first line of a Python docstring according to the imperative mood recommendation (PEP 257). This helps ensure docstring consistency.

```python
def average(values: list[float]) -> float:
    """Returns the mean of the given values."""


```

```python
def average(values: list[float]) -> float:
    """Return the mean of the given values."""


```

--------------------------------

### Install Ruff with Conda

Source: https://docs.astral.sh/ruff/installation

Install Ruff on systems using Conda, specifically from the `conda-forge` channel. This command adds Ruff to your Conda environment, suitable for data science and other Python-centric workflows.

```shell
conda install -c conda-forge ruff

```

--------------------------------

### Example of Repeated Dictionary Keys in Python

Source: https://docs.astral.sh/ruff/rules/multi-value-repeated-key-variable

Demonstrates a dictionary with a repeated key ('baz') having different values (2 and 3). The example shows that the last assigned value (3) is retained. It also provides the corrected version with unique keys.

```python
foo = {
    bar: 1,
    baz: 2,
    baz: 3,
}
foo[baz]  # 3
```

```python
foo = {
    bar: 1,
    baz: 2,
}
foo[baz]  # 2
```

--------------------------------

### Use collections.UserDict, UserList, UserString (Python)

Source: https://docs.astral.sh/ruff/rules/subclass-builtin

Shows the recommended approach using UserDict from the 'collections' module. This example illustrates how subclassing UserDict correctly implements the `__setitem__` method, allowing the custom logic (uppercasing keys) to function as intended.

```python
from collections import UserDict


class UppercaseDict(UserDict):
    def __setitem__(self, key, value):
        super().__setitem__(key.upper(), value)


d = UppercaseDict({"a": 1, "b": 2})  # Uses __setitem__
print(d)  # {'A': 1, 'B': 2}

```

--------------------------------

### Correct Usage: Omit Whitespace Before Brackets (Python Example)

Source: https://docs.astral.sh/ruff/rules/whitespace-before-close-bracket

This example shows the correct way to use brackets and braces according to the 'whitespace-before-close-bracket' rule, emphasizing the omission of whitespace immediately before ')', ']', or '}'.

```python
spam(ham[1], {eggs: 2})
```

--------------------------------

### Python: Documented Public __init__ Method

Source: https://docs.astral.sh/ruff/rules/undocumented-public-init

This snippet shows the corrected version of the previous example, featuring a public __init__ method with a proper docstring. The docstring clearly explains the purpose of the initialization and its parameters, adhering to best practices and satisfying Ruff's D107 rule.

```python
class City:
    def __init__(self, name: str, population: int) -> None:
        """Initialize a city with a name and population."""
        self.name: str = name
        self.population: int = population

```

--------------------------------

### Ruff Formatter Configuration in pyproject.toml

Source: https://docs.astral.sh/ruff/formatter

Shows how to configure Ruff formatter settings within a `pyproject.toml` file. This example sets the line length to 100, specifies single quote style, tab indentation, and enables docstring code formatting. This allows customization of the formatting rules.

```toml
[tool.ruff]
line-length = 100

[tool.ruff.format]
quote-style = "single"
indent-style = "tab"
docstring-code-format = true

```

--------------------------------

### Configure Ruff's known-third-party setting in ruff.toml

Source: https://docs.astral.sh/ruff/faq

Demonstrates how to configure Ruff's 'known-third-party' setting within a ruff.toml file to correctly identify third-party imports.

```toml
[lint.isort]
known-third-party = ["wandb"]

```

--------------------------------

### Python Docstring Line Length Correction Example

Source: https://docs.astral.sh/ruff/rules/doc-line-too-long

Shows the corrected version of the previous Python docstring example, where the long line is broken into multiple lines to adhere to the maximum length rule (W505), improving readability.

```python
def function(x):
    """
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    Duis auctor purus ut ex fermentum, at maximus est hendrerit.
    """


```

--------------------------------

### Configure Ruff Linting Rules to Select

Source: https://docs.astral.sh/ruff/editors/settings

This setting defines the specific Ruff rules to enable by default. Refer to Ruff's documentation for a list of available rule codes. Examples are shown for VS Code, Neovim, and Zed.

```json
{
    "ruff.lint.select": ["E", "F"]
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lint = {
        select = {"E", "F"}
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lint": {
            "select": ["E", "F"]
          }
        }
      }
    }
  }
}
```

--------------------------------

### Benchmark Ruff Against Ecosystem Tools

Source: https://docs.astral.sh/ruff/contributing

Benchmarks Ruff against several popular Python linting and formatting tools (Pyflakes, Autoflake, Pycodestyle, Flake8) using `hyperfine`. It checks the CPython repository and measures the execution time of each tool. Assumes Ruff is built and other tools are installed.

```bash
hyperfine --ignore-failure --warmup 5 \
  "./target/release/ruff check ./crates/ruff_linter/resources/test/cpython/ --no-cache" \
  "pyflakes crates/ruff_linter/resources/test/cpython" \
  "autoflake --recursive --expand-star-imports --remove-all-unused-imports --remove-unused-variables --remove-duplicate-keys resources/test/cpython" \
  "pycodestyle crates/ruff_linter/resources/test/cpython" \
  "flake8 crates/ruff_linter/resources/test/cpython"
```

--------------------------------

### Configure Ruff Rules to Extend Selection

Source: https://docs.astral.sh/ruff/editors/settings

This setting allows enabling additional Ruff rules beyond those specified in `lint.select`. Examples are provided for VS Code, Neovim, and Zed.

```json
{
    "ruff.lint.extendSelect": ["W"]
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lint = {
        extendSelect = {"W"}
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lint": {
            "extendSelect": ["W"]
          }
        }
      }
    }
  }
}
```

--------------------------------

### Update Schemastore Script

Source: https://docs.astral.sh/ruff/contributing

Run the script to update the schemastore if necessary. This involves comparing the schema before and after a version tag and then executing the update script. A link to create a PR will be provided upon successful execution.

```bash
uv run --only-dev --no-sync scripts/update_schemastore.py --proto <https|ssh>
```

--------------------------------

### Example of importing a private name in Python

Source: https://docs.astral.sh/ruff/rules/import-private-name

This example demonstrates a Python import statement that violates the import-private-name rule by importing a name prefixed with an underscore, indicating it's private and not intended for external use.

```python
from foo import _bar
```

--------------------------------

### Configure Source Directories for Ruff Imports

Source: https://docs.astral.sh/ruff/settings

Define the directories Ruff considers for resolving first-party vs. third-party imports. Supports globs and expands to include the project root and 'src' subdirectory by default.

```toml
[tool.ruff]
# Allow imports relative to the "src" and "test" directories.
src = ["src", "test"]

```

```toml
# Allow imports relative to the "src" and "test" directories.
src = ["src", "test"]

```

--------------------------------

### Simplify range calls with unnecessary start argument (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-range-start

This snippet demonstrates how to simplify Python `range` calls by removing the unnecessary `start` argument when it is set to 0. This adheres to idiomatic Python and improves code conciseness. No external dependencies are required.

```python
range(0, 3)
```

```python
range(3)
```

--------------------------------

### Benchmark-Driven Development with Criterion.rs

Source: https://docs.astral.sh/ruff/contributing

Commands for benchmark-driven development using Criterion.rs. The first command saves a baseline benchmark named 'main'. The second command compares subsequent runs against this 'main' baseline. Dependencies: Rust toolchain, Ruff project.

```shell
# Run once on your "baseline" code
cargo bench -p ruff_benchmark -- --save-baseline=main

# Then iterate with
cargo bench -p ruff_benchmark -- --baseline=main
```

--------------------------------

### Configure Ruff Project Root and Source Paths

Source: https://docs.astral.sh/ruff/faq

This snippet shows how to configure Ruff to extend another configuration file and specify source directories. It's useful when your Ruff configuration is in a subdirectory or when you have multiple source trees. The `extend` option points to the base configuration, and `src` lists the directories containing your source code.

```toml
[tool.ruff]
extend = "../pyproject.toml"
src = ["../src"]

```

```toml
src = ["../src"]

[lint]
select = [
    # Pyflakes
    "F",
    # Pycodestyle
    "E",
    "W",
    # isort
    "I001"
]

[lint.isort]
known-first-party = ["my_module1", "my_module2"]

```

--------------------------------

### Example of Methods Requiring Self Return Type (Python)

Source: https://docs.astral.sh/ruff/rules/non-self-return-type

Provides an example of methods like `__new__`, `__enter__`, `__aenter__`, and in-place dunder methods (`__iadd__`) that typically should return `Self` to maintain correct type information across class hierarchies.

```python
class Foo:
    def __new__(cls, *args: Any, **kwargs: Any) -> Foo: ...
    def __enter__(self) -> Foo: ...
    async def __aenter__(self) -> Foo: ...
    def __iadd__(self, other: Foo) -> Foo: ...
```

--------------------------------

### Detect Extraneous Whitespace Before Brackets (Python Example)

Source: https://docs.astral.sh/ruff/rules/whitespace-before-close-bracket

This example demonstrates the 'whitespace-before-close-bracket' rule, which flags unnecessary spaces before closing parentheses, brackets, or braces. The fix is always available, and the rule originates from pycodestyle.

```python
spam(ham[1], {eggs: 2} )
spam(ham[1 ], {eggs: 2})
spam(ham[1], {eggs: 2 })
```

--------------------------------

### Ignoring a Rule for an Entire File

Source: https://docs.astral.sh/ruff/tutorial

This example shows how to ignore a specific Ruff lint rule (UP035) for an entire file by adding '# ruff: noqa: {code}' at the top of the file.

```python
# ruff: noqa: UP035
from typing import Iterable


def sum_even_numbers(numbers: Iterable[int]) -> int:
    """Given an iterable of integers, return the sum of all even numbers in the iterable."""
    return sum(num for num in numbers if num % 2 == 0)

```

--------------------------------

### Define Known First-Party Modules (TOML)

Source: https://docs.astral.sh/ruff/settings

Lists modules to be treated as first-party, independent of filesystem introspection. Supports glob patterns. Default value is an empty list.

```toml
[tool.ruff.lint.isort]
known-first-party = ["src"]

```

```toml
[lint.isort]
known-first-party = ["src"]

```

--------------------------------

### Configure Extended Import Aliases (TOML)

Source: https://docs.astral.sh/ruff/settings

Allows defining custom aliases for modules. These custom aliases are added to the default alias mappings, providing flexibility in how modules are imported. For example, it can set 'dd' as an alias for 'dask.dataframe'.

```toml
[tool.ruff.lint.flake8-import-conventions.extend-aliases]
# Declare a custom alias for the `dask` module.
"dask.dataframe" = "dd"

```

```toml
[lint.flake8-import-conventions.extend-aliases]
# Declare a custom alias for the `dask` module.
"dask.dataframe" = "dd"

```

--------------------------------

### Configure Ruff's src directories in pyproject.toml

Source: https://docs.astral.sh/ruff/faq

Specifies the directories Ruff should consider as first-party sources using the 'src' option in pyproject.toml. This supports nested project layouts.

```toml
[tool.ruff]
# Ruff supports a top-level `src` option in lieu of isort's `src_paths` setting.
# All paths are relative to the project root, which is the directory containing the pyproject.toml.
src = ["src"]

```

--------------------------------

### Detect Wildcard Injection in subprocess.Popen (Python)

Source: https://docs.astral.sh/ruff/rules/unix-command-wildcard-injection

This snippet demonstrates how to detect wildcard injection vulnerabilities when using `subprocess.Popen`. The insecure example uses a wildcard '*.py', which can match unintended files. The secure example uses a specific file name 'main.py' to prevent this issue. This check is derived from the flake8-bandit linter.

```python
import subprocess

subprocess.Popen(["chmod", "777", "*.py"], shell=True)
```

```python
import subprocess

subprocess.Popen(["chmod", "777", "main.py"], shell=True)
```

--------------------------------

### Correct __eq__ annotation with object

Source: https://docs.astral.sh/ruff/rules/any-eq-ne-annotation

Illustrates the correct and recommended way to annotate the second parameter of the `__eq__` method using `object`. This adheres to Python's typing best practices and avoids potential type-checking unsoundness associated with `typing.Any`.

```python
class Foo:
    def __eq__(self, obj: object) -> bool: ...

```

--------------------------------

### False Positive Example for Dict Comprehension (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-comprehension

Illustrates a known problem with Ruff's C416 rule where dictionary comprehensions iterating over a mapping's keys can lead to incorrect suggestions. The example shows how dict(d1) differs from {x: y for x, y in d1}.

```python
>>> d1 = {(1, 2): 3, (4, 5): 6}
>>> {x: y for x, y in d1}  # Iterates over the keys of a mapping
{1: 2, 4: 5}
>>> dict(d1)               # Ruff's incorrect suggested fix
{(1, 2): 3, (4, 5): 6}
>>> dict(d1.keys())        # Correct fix
{1: 2, 4: 5}
```

--------------------------------

### Enable Ruff Preview Mode for Formatting

Source: https://docs.astral.sh/ruff/preview

This snippet demonstrates how to enable Ruff's preview mode for formatting styles. This allows testing of upcoming formatter changes. Configuration can be done in pyproject.toml, ruff.toml, or using the CLI.

```toml
[tool.ruff.format]
preview = true

```

```toml
[format]
preview = true

```

```shell
ruff format --preview

```

--------------------------------

### Unsafe Fix Example for datetime.fromisoformat() (Python)

Source: https://docs.astral.sh/ruff/rules/fromisoformat-replace-z

This example illustrates why the automatic fix for the `fromisoformat-replace-z` rule is marked as unsafe. It shows a scenario where replacing 'Z' manually works, but the direct `datetime.fromisoformat(date)` call fails due to a leading 'Z' in the input string, potentially altering program behavior.

```python
d = "Z2025-01-01T00:00:00Z"  # Note the leading `Z`

datetime.fromisoformat(d.strip("Z") + "+00:00")  # Fine
datetime.fromisoformat(d)  # Runtime error


```

--------------------------------

### Use pathlib.Path.mkdir() with Python

Source: https://docs.astral.sh/ruff/rules/os-mkdir

This snippet demonstrates the recommended alternative using `pathlib.Path.mkdir()` for directory creation. It requires importing `Path` from the `pathlib` module. This method is called on a `Path` object and offers improved readability.

```python
from pathlib import Path

Path("./directory/").mkdir()

```

--------------------------------

### Ruff TD003 Example: Incorrect TODO Comment Format

Source: https://docs.astral.sh/ruff/rules/missing-todo-link

This snippet shows an example of a TODO comment that violates the TD003 rule because it lacks an associated issue link. This format makes it difficult for developers to find context when resolving the TODO.

```python
# TODO: this link has no issue

```

--------------------------------

### Configure Ruff for Google Docstring Convention

Source: https://docs.astral.sh/ruff/faq

This configuration snippet sets Ruff to enforce the Google docstring convention. It requires enabling the `D` rule prefix and specifies the 'google' convention for the `pydocstyle` linter. This ensures Ruff checks docstrings according to Google's style guide.

```toml
[tool.ruff.lint.pydocstyle]
convention = "google"  # Accepts: "google", "numpy", or "pep257".

```

```toml
[lint.pydocstyle]
convention = "google"  # Accepts: "google", "numpy", or "pep257".

```

--------------------------------

### Direct Logger Instantiation vs. getLogger() in Python

Source: https://docs.astral.sh/ruff/rules/direct-logger-instantiation

This snippet demonstrates the incorrect direct instantiation of logging.Logger and the recommended approach using logging.getLogger(). Direct instantiation bypasses configuration and filtering, while getLogger() ensures proper integration with the logging system.

```python
import logging

logger = logging.Logger(__name__)

```

```python
import logging

logger = logging.getLogger(__name__)

```

--------------------------------

### Benchmark Ruff Release Build

Source: https://docs.astral.sh/ruff/contributing

Builds Ruff in release mode and then benchmarks its performance using `hyperfine`. It compares the performance with and without the `--no-cache` flag when checking the CPython repository. Assumes Ruff is already built.

```bash
cargo build --release --bin ruff && hyperfine --warmup 10 \
  "./target/release/ruff check ./crates/ruff_linter/resources/test/cpython/ --no-cache -e" \
  "./target/release/ruff check ./crates/ruff_linter/resources/test/cpython/ -e"
```

--------------------------------

### Configure Ruff's known-third-party setting in pyproject.toml

Source: https://docs.astral.sh/ruff/faq

Shows how to specify packages that Ruff should treat as third-party imports in a pyproject.toml file, useful when a subdirectory shares a name with a third-party package.

```toml
[tool.ruff.lint.isort]
known-third-party = ["wandb"]

```

--------------------------------

### Demonstrate Unused Import (Python)

Source: https://docs.astral.sh/ruff/rules/unused-import

This example shows a common scenario where an import (numpy) is not used within the function, triggering the F401 linting rule. The corrected version removes the unused import.

```python
import numpy as np  # unused import


def area(radius):
    return 3.14 * radius**2

```

```python
def area(radius):
    return 3.14 * radius**2

```

--------------------------------

### Using pathlib.Path.expanduser

Source: https://docs.astral.sh/ruff/rules/os-path-expanduser

Shows the recommended alternative using `pathlib.Path.expanduser()` for expanding the user's home directory. This approach leverages the object-oriented API of the `pathlib` module.

```python
from pathlib import Path

Path("~/films/Monty Python").expanduser()
```

--------------------------------

### Example of invalid pyproject.toml syntax (TOML)

Source: https://docs.astral.sh/ruff/rules/invalid-pyproject-toml

Illustrates the incorrect format for the 'authors' field in a pyproject.toml file, which does not adhere to the specified schema.

```toml
[project]
name = "crab"
version = "1.0.0"
authors = ["Ferris the Crab <ferris@example.org>"]


```

--------------------------------

### PEP 8 Recommended Import Styles

Source: https://docs.astral.sh/ruff/rules/relative-imports

This snippet showcases the import styles recommended by PEP 8, which the 'relative-imports' linter rule encourages. It includes examples of absolute imports and explicit relative imports.

```python
import mypkg.sibling
from mypkg import sibling
from mypkg.sibling import example

from . import sibling
from .sibling import example
```

--------------------------------

### Fix os.getenv Invalid Default Value (Python)

Source: https://docs.astral.sh/ruff/rules/invalid-envvar-default

This snippet demonstrates how to correctly use default values with os.getenv. The incorrect example passes an integer as a default, which is inconsistent with the expected string return type when the environment variable is not set. The corrected example provides a string default, ensuring type consistency.

```Python
import os

# Incorrect: Passing an integer as a default value
# int(os.getenv("FOO", 1))

# Correct: Passing a string as a default value
int(os.getenv("FOO", "1"))
```

--------------------------------

### Demonstrate Relative Import Issue

Source: https://docs.astral.sh/ruff/rules/relative-imports

This snippet illustrates the problematic usage of relative imports that the ruff 'relative-imports' linter rule aims to detect. It shows an example of an implicit relative import that should be refactored.

```python
from .. import foo
```

--------------------------------

### Ignore specific rules for Jupyter Notebooks in Ruff

Source: https://docs.astral.sh/ruff/configuration

This configuration allows you to specify rules that should be ignored for Jupyter Notebook files (`*.ipynb`). The example shows how to ignore `T20` rules for all `.ipynb` files.

```toml
[tool.ruff.lint.per-file-ignores]
"*.ipynb" = ["T20"]

```

```toml
[lint.per-file-ignores]
"*.ipynb" = ["T20"]

```

--------------------------------

### Example of Shadowing Built-in 'print' (Python)

Source: https://docs.astral.sh/ruff/rules/builtin-import-shadowing

This snippet demonstrates the problematic import of 'print' from the 'rich' library, which shadows the built-in 'print' function. It shows how this can be fixed by aliasing the import or using the module namespace.

```python
from rich import print

print("Some message")

```

```python
from rich import print as rich_print

rich_print("Some message")

```

```python
import rich

rich.print("Some message")

```

--------------------------------

### Configure Typing Extensions for Compatibility

Source: https://docs.astral.sh/ruff/settings

A boolean flag to control the allowance of imports from the `typing_extensions` module for Python versions prior to a symbol's addition to the standard `typing` module. Disabling this can be useful if `typing_extensions` is not installed or desired.

```toml
[tool.ruff.lint]
typing-extensions = false

```

```toml
[lint]
typing-extensions = false

```

--------------------------------

### Convert perf Data to Flamegraph SVG on Linux

Source: https://docs.astral.sh/ruff/contributing

Converts raw `perf` data into a flamegraph SVG for visualization. This typically follows the `perf record` command. Dependencies: `perf`, `flamegraph` (installed via cargo).

```shell
perf script -F +pid > /tmp/test.perf
# Alternatively, using flamegraph:
flamegraph --perfdata perf.data --no-inline
```

--------------------------------

### Generate Ruff CLI Help and Documentation

Source: https://docs.astral.sh/ruff/contributing

Updates specific documentation files for Ruff. `generate-cli-help` updates `docs/configuration.md`, `generate-docs` updates `docs/rules`, and `generate-json-schema` updates `ruff.schema.json`.

```bash
cargo dev generate-cli-help
```

```bash
cargo dev generate-docs
```

```bash
cargo dev generate-json-schema
```

--------------------------------

### Unsafe Fix for Duplicate Base Classes with Comments in Python

Source: https://docs.astral.sh/ruff/rules/duplicate-bases

This Python code example highlights a scenario where the automatic fix for duplicate base classes might be considered unsafe by Ruff. The presence of comments within the base class list can lead to their removal during an automatic fix, as shown in the example.

```python
class Foo:
    pass


class Bar(
    Foo,  # comment
    Foo,
):
    pass

```

--------------------------------

### Configure Ruff Rules to Ignore

Source: https://docs.astral.sh/ruff/editors/settings

This setting specifies Ruff rules that should be ignored by default. Consult Ruff's documentation for rule codes. Examples are shown for VS Code, Neovim, and Zed.

```json
{
    "ruff.lint.ignore": ["E4", "E7"]
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lint = {
        ignore = {"E4", "E7"}
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lint": {
            "ignore": ["E4", "E7"]
          }
        }
      }
    }
  }
}
```

--------------------------------

### Unsafe Fix Example: Builtin Shadowing (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-builtin-import

This example illustrates why the fix for unnecessary builtin imports is considered unsafe. If a local variable or function with the same name as a builtin is defined, removing the builtin import can alter the program's behavior by causing the local definition to be used instead of the builtin. This can lead to unexpected results.

```python
def str(x):
    return x


from builtins import str

str(1)  # Output: "1" with the import, 1 without
```

--------------------------------

### getattr Normalization Issue Example (Python)

Source: https://docs.astral.sh/ruff/rules/get-attr-with-constant

This example illustrates a safety concern with `getattr` when attribute names are not NFKC normalized. The long 's' character ('') normalizes to 's' under NFKC. `getattr(obj, '')` accesses the literal '' attribute, while `obj.` is interpreted as `obj.s`, leading to different behaviors and potential bugs.

```Python
# This accesses an attribute with the exact name "" (if it exists)
value = getattr(obj, "")

# But this would normalize to "s" and access a different attribute
obj.  # This is interpreted as obj.s, not obj.
```

--------------------------------

### Configure Same Package Detection (TOML)

Source: https://docs.astral.sh/ruff/settings

Controls whether imports from within the same package are automatically marked as first-party. This is useful when the 'src' configuration is not set up to detect first-party sources. Default value is true.

```toml
[tool.ruff.lint.isort]
detect-same-package = false

```

```toml
[lint.isort]
detect-same-package = false

```

--------------------------------

### Use os.path.abspath

Source: https://docs.astral.sh/ruff/rules/os-path-abspath

This snippet demonstrates the usage of `os.path.abspath` to get the absolute path of a file. This function is part of the lower-level `os.path` module.

```python
import os

file_path = os.path.abspath("../path/to/file")
```

--------------------------------

### Correct Shebang Placement Example - Python

Source: https://docs.astral.sh/ruff/rules/shebang-not-first-line

Illustrates the correct placement of a shebang directive at the beginning of a Python script. This adheres to the EXE005 rule and ensures the script is executed by the specified interpreter.

```python
#!/usr/bin/env python3
foo = 1

```

--------------------------------

### Customize Docstring Convention with Additional Rules

Source: https://docs.astral.sh/ruff/faq

This snippet demonstrates how to customize Ruff's docstring linting by selecting a base convention ('google') and then augmenting or ignoring specific rules. For example, it requires an imperative mood ('D401') and relaxes the requirement for parameter documentation ('D417').

```toml
[tool.ruff.lint]
select = [
    "D",
    "D401",
]

ignore = [
    "D417",
]

[tool.ruff.lint.pydocstyle]
convention = "google"

```

```toml
[lint]
select = [
    "D",
    "D401",
]

ignore = [
    "D417",
]

[lint.pydocstyle]
convention = "google"

```

--------------------------------

### Corrected example for never-union

Source: https://docs.astral.sh/ruff/rules/never-union

Shows the corrected version of the code snippet after applying the RUF020 rule. The redundant `typing.Never` has been removed, simplifying the type hint.

```python
def func() -> int: ...

```

--------------------------------

### Use os.mkdir() with Python

Source: https://docs.astral.sh/ruff/rules/os-mkdir

This snippet demonstrates the usage of the `os.mkdir()` function to create a directory. It requires the `os` module to be imported. The function takes a path string as input.

```python
import os

os.mkdir("./directory/")

```

--------------------------------

### Redundant math.log base examples in Python

Source: https://docs.astral.sh/ruff/rules/redundant-log-base

Demonstrates the incorrect usage of math.log with explicit bases (e, 2, 10) and the recommended alternative using default base or dedicated functions like math.log2 and math.log10. This check helps improve code accuracy and conciseness.

```python
import math

math.log(4, math.e)
math.log(4, 2)
math.log(4, 10)
```

```python
import math

math.log(4)
math.log2(4)
math.log10(4)
```

--------------------------------

### Unsafe Fix Example: Mutable Type with Augmented Assignment (Python)

Source: https://docs.astral.sh/ruff/rules/non-augmented-assignment

This example illustrates why the fix for non-augmented assignments to augmented assignments is considered unsafe. When dealing with mutable types like lists, both the original variable and its alias will be modified if an augmented assignment is used, leading to different behavior compared to a standard addition and reassignment.

```python
foo = [1]
bar = foo
foo = foo + [2]
assert (foo, bar) == ([1, 2], [1])

# If the assignment is replaced with an augmented assignment:
foo = [1]
bar = foo
foo += [2]
assert (foo, bar) == ([1, 2], [1, 2])
```

--------------------------------

### Run Ruff Command for Rule Testing

Source: https://docs.astral.sh/ruff/contributing

This command runs Ruff locally against a specific Python file to test a new rule. It selects the rule using `--select` and enables preview features with `--preview`. The output is used to generate snapshots for testing.

```shell
cargo run -p ruff -- check crates/ruff_linter/resources/test/fixtures/pycodestyle/E402.py --no-cache --preview --select E402
```

--------------------------------

### Configure Ruff with File Path (Neovim)

Source: https://docs.astral.sh/ruff/editors/settings

This code demonstrates configuring the Ruff Language Server in Neovim using `lspconfig`. It specifies the path to a configuration file for the linter and formatter.

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      configuration = "~/path/to/ruff.toml"
    }
  }
}
```

--------------------------------

### Python: Boolean Positional Argument Example

Source: https://docs.astral.sh/ruff/rules/boolean-type-hint-positional-argument

Demonstrates the problematic use of boolean positional arguments in a Python function definition and its calls. This pattern can lead to unclear intent for the caller and make future code maintenance difficult.

```python
from math import ceil, floor

def round_number(number: float, up: bool) -> int:
    return ceil(number) if up else floor(number)


round_number(1.5, True)  # What does `True` mean?
round_number(1.5, False)  # What does `False` mean?
```

--------------------------------

### Configuring Fix Safety in Ruff

Source: https://docs.astral.sh/ruff/linter

Illustrates how to adjust the safety classification of Ruff fixes per rule using configuration files. It shows promoting unsafe fixes to safe and demoting safe fixes to unsafe.

```toml
[tool.ruff.lint]
extend-safe-fixes = ["F601"]
extend-unsafe-fixes = ["UP034"]
```

```toml
[lint]
extend-safe-fixes = ["F601"]
extend-unsafe-fixes = ["UP034"]
```

--------------------------------

### Runtime Type Annotation Example (Python)

Source: https://docs.astral.sh/ruff/settings

This Python code snippet demonstrates the use of `from __future__ import annotations` and union types (`str | int`), which requires the `keep-runtime-typing` option to be enabled in Ruff for compatibility with Python versions below 3.10, especially when using libraries like Pydantic.

```python
from __future__ import annotations

import pydantic

class Foo(pydantic.BaseModel):
    bar: str | int

```

--------------------------------

### Incorrect Dataclass Enum Usage Example

Source: https://docs.astral.sh/ruff/rules/dataclass-enum

Demonstrates the problematic runtime behavior when an Enum class is decorated with @dataclass. This leads to unexpected equality checks, as shown in the output.

```python
from dataclasses import dataclass
from enum import Enum


@dataclass
class E(Enum):
    A = 1
    B = 2

print(E.A == E.B)  # True

```

--------------------------------

### Safe __annotations__ Access using typing_extensions (< Python 3.10)

Source: https://docs.astral.sh/ruff/rules/access-annotations-from-class-dict

Demonstrates the recommended approach for retrieving annotations on Python versions older than 3.10, provided that the `typing-extensions` package is installed. This ensures compatibility and uses a stable API.

```python
import typing_extensions

typing_extensions.get_annotations(foo)
```

--------------------------------

### Dataclass Default Argument Function Call (Python)

Source: https://docs.astral.sh/ruff/rules/function-call-in-dataclass-default-argument

This snippet demonstrates the incorrect usage of a function call as a default argument for a dataclass field. It highlights the potential issue where the returned mutable object is shared across all instances of the dataclass. The incorrect example uses a direct function call, while the corrected example uses `field(default_factory=...)` to ensure a new mutable object is created for each instance.

```python
from dataclasses import dataclass


def simple_list() -> list[int]:
    return [1, 2, 3, 4]


@dataclass
class A:
    mutable_default: list[int] = simple_list()

```

```python
from dataclasses import dataclass, field


def creating_list() -> list[int]:
    return [1, 2, 3, 4]


@dataclass
class A:
    mutable_default: list[int] = field(default_factory=creating_list)

```

--------------------------------

### Profile Ruff Benchmark on Linux with perf

Source: https://docs.astral.sh/ruff/contributing

Profiles Ruff's benchmarks on Linux using `perf`. It first builds the benchmark with the 'profiling' profile and then records performance data. Dependencies: `perf`, Rust toolchain, Ruff project.

```shell
cargo bench -p ruff_benchmark --no-run --profile=profiling && perf record --call-graph dwarf -F 9999 cargo bench -p ruff_benchmark --profile=profiling -- --profile-time=1
```

--------------------------------

### TODO comment example with author

Source: https://docs.astral.sh/ruff/rules/missing-todo-author

This snippet shows the correct way to format a TODO comment according to the missing-todo-author rule, by including an author. This practice ensures that the person with the most context regarding the TODO is identifiable.

```python
# TODO(charlie): now an author is assigned

```

--------------------------------

### Configure Ruff with Inline JSON (Neovim)

Source: https://docs.astral.sh/ruff/editors/settings

This Lua code for Neovim configures the Ruff Language Server with inline JSON settings. It allows defining specific linting rules and formatting preferences directly in the LSP setup.

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      configuration = {
        lint = {
          unfixable = {"F401"},
          ["extend-select"] = {"TID251"},
          ["flake8-tidy-imports"] = {
            ["banned-api"] = {
              ["typing.TypedDict"] = {
                msg = "Use `typing_extensions.TypedDict` instead"
              }
            }
          }
        },
        format = {
          ["quote-style"] = "single"
        }
      }
    }
  }
}
```

--------------------------------

### Enable/Disable Ruff Linting

Source: https://docs.astral.sh/ruff/editors/settings

This configuration controls whether the Ruff linter is enabled. Setting it to `false` allows Ruff to be used exclusively as a formatter. Examples are provided for VS Code, Neovim, and Zed.

```json
{
    "ruff.lint.enable": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lint = {
        enable = false
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lint": {
            "enable": false
          }
        }
      }
    }
  }
}
```

--------------------------------

### Configure Banned Import Aliases (TOML)

Source: https://docs.astral.sh/ruff/settings

Defines a mapping from module names to a list of disallowed import aliases. This helps enforce consistent import practices within a project. For example, it can prevent the use of 'K' as an alias for 'tensorflow.keras.backend'.

```toml
[tool.ruff.lint.flake8-import-conventions.banned-aliases]
# Declare the banned aliases.
"tensorflow.keras.backend" = ["K"]

```

```toml
[lint.flake8-import-conventions.banned-aliases]
# Declare the banned aliases.
"tensorflow.keras.backend" = ["K"]

```

--------------------------------

### Avoid py.path, use pathlib or path

Source: https://docs.astral.sh/ruff/rules/py-path

Demonstrates the incorrect usage of the py.path library and provides an equivalent example using the standard library's pathlib module. The py.path library is in maintenance mode and should be replaced.

```python
import py.path

p = py.path.local("/foo/bar").join("baz/qux")

```

```python
from pathlib import Path

p = Path("/foo/bar") / "bar" / "qux"

```

--------------------------------

### Unnecessary Nested Literal Example (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-nested-literal

Demonstrates the incorrect usage of nested `Literal` types and the recommended, more concise alternative. This rule helps in maintaining cleaner and more readable type hints.

```Python
AllModes = Literal[
    Literal["r", "r+"],
    Literal["w", "w+", "wt", "w+t"],
    Literal["r+", "r+t"],
    Literal["a", "a+", "at", "a+t"],
]

```

```Python
AllModes = Literal[
    "r", "r+", "w", "w+", "wt", "w+t", "r+", "r+t", "a", "a+", "at", "a+t"
]

```

--------------------------------

### Print AST with Ruff's Python Parser

Source: https://docs.astral.sh/ruff/contributing

Prints the Abstract Syntax Tree (AST) of a Python file using Ruff's built-in Python parser. This utility helps visualize the code's structure, node byte offsets, and the exclusion of tokens like colons, comments, and whitespace from the AST representation.

```bash
cargo dev print-ast <file>
```

--------------------------------

### Ruff Formatter Configuration in ruff.toml

Source: https://docs.astral.sh/ruff/formatter

Demonstrates configuring Ruff formatter settings in a `ruff.toml` file. This configuration sets the line length to 100, uses single quotes, tab indentation, and enables docstring code formatting, mirroring the `pyproject.toml` example. This provides an alternative configuration file.

```toml
line-length = 100

[format]
quote-style = "single"
indent-style = "tab"
docstring-code-format = true

```

--------------------------------

### Metaclass Detection Example (Python)

Source: https://docs.astral.sh/ruff/rules/non-self-return-type

Shows how Ruff detects a class as a metaclass, disabling the PYI034 rule. This heuristic involves checking the number of parameters, type annotations of parameters, and the presence of keyword variadic arguments in the `__new__` method.

```python
class MyMetaclass(django.db.models.base.ModelBase):
    def __new__(cls, name: str, bases: tuple[Any, ...], attrs: dict[str, Any], **kwargs: Any) -> MyMetaclass:
        ...
```

--------------------------------

### Run Ecosystem CI Checks Locally

Source: https://docs.astral.sh/ruff/contributing

Execute the Ruff ecosystem CI checks locally to verify changes against real-world projects. This command uses `uvx` to run the `ruff-ecosystem` tool with the specified Ruff binary.

```bash
uvx --from ./python/ruff-ecosystem ruff-ecosystem check ruff "./target/debug/ruff"
uvx --from ./python/ruff-ecosystem ruff-ecosystem format ruff "./target/debug/ruff"
```

--------------------------------

### Example of unused private TypeVar and TypeVarTuple (Python)

Source: https://docs.astral.sh/ruff/rules/unused-private-type-var

This snippet demonstrates the declaration of a private TypeVar and a private TypeVarTuple that are not subsequently used. These are flagged by the PYI018 rule. The fix is marked as unsafe.

```python
import typing
import typing_extensions

_T = typing.TypeVar("_T")
_Ts = typing_extensions.TypeVarTuple("_Ts")

```

--------------------------------

### Python str.format Missing Arguments Check

Source: https://docs.astral.sh/ruff/rules/string-dot-format-missing-arguments

This snippet checks for `str.format` calls where placeholders are missing arguments. Failing to provide arguments for placeholders in `str.format` will result in a `KeyError` during execution. The example demonstrates the incorrect usage and the corrected version.

```python
"{greeting}, {name}".format(name="World")

```

```python
"{greeting}, {name}".format(greeting="Hello", name="World")

```

--------------------------------

### Run Ruff Benchmarks for Quick Results

Source: https://docs.astral.sh/ruff/contributing

Executes Ruff benchmarks for faster results, though this may increase susceptibility to noise. Dependencies: Rust toolchain, Ruff project.

```shell
cargo bench -p ruff_benchmark -- --quick
```

--------------------------------

### Django @receiver Decorator Placement Example (Python)

Source: https://docs.astral.sh/ruff/rules/django-non-leading-receiver-decorator

Demonstrates the incorrect and correct usage of Django's @receiver decorator in Python. The rule requires @receiver to be the first decorator to ensure proper signal connection.

```python
from django.dispatch import receiver
from django.db.models.signals import post_save
from django.db import transaction

class MyModel:
    pass

@transaction.atomic
@receiver(post_save, sender=MyModel)
def my_handler(sender, instance, created, **kwargs):
    pass

```

```python
from django.dispatch import receiver
from django.db.models.signals import post_save
from django.db import transaction

class MyModel:
    pass

@receiver(post_save, sender=MyModel)
@transaction.atomic
def my_handler(sender, instance, created, **kwargs):
    pass

```

--------------------------------

### Example: Too Many Public Methods in Python

Source: https://docs.astral.sh/ruff/rules/too-many-public-methods

Demonstrates a Python class violating the PLR0904 rule by having an excessive number of public methods. This code snippet shows the problematic structure before refactoring.

```python
class Linter:
    def __init__(self):
        pass

    def pylint(self):
        pass

    def pylint_settings(self):
        pass

    def flake8(self):
        pass

    def flake8_settings(self):
        pass

    def pydocstyle(self):
        pass

    def pydocstyle_settings(self):
        pass

```

--------------------------------

### preview Configuration

Source: https://docs.astral.sh/ruff/settings

Determines whether to enable preview mode. When enabled, Ruff will use unstable rules and fixes.

```APIDOC
## preview Configuration

### Description
Whether to enable preview mode. When preview mode is enabled, Ruff will use unstable rules and fixes.

### Default value
`false`

### Type
`bool`

### Example usage
```toml
[tool.ruff.lint]
# Enable preview features.
preview = true
```

```ini
[lint]
# Enable preview features.
preview = true
```
```

--------------------------------

### Example of Ruff Formatted Python Code

Source: https://docs.astral.sh/ruff/formatter

Compares an input Python code snippet with its equivalent formatted output using the Ruff formatter. This illustrates Ruff's adherence to Black's stable code style, focusing on consistency, readability, and reducing git diffs. It highlights changes in function signature formatting, docstring style, and conditional block indentation.

```python
# Input
def _make_ssl_transport(
    rawsock,
    protocol,
    sslcontext,
    waiter=None,
    *, server_side=False,
    server_hostname=None,
    extra=None,
    server=None,
    ssl_handshake_timeout=None,
    call_connection_made=True):
    '''Make an SSL transport.'''
    if waiter is None:
      waiter = Future(loop=loop)

    if extra is None:
      extra = {}

    ...

# Ruff
def _make_ssl_transport(
    rawsock,
    protocol,
    sslcontext,
    waiter=None,
    *,
    server_side=False,
    server_hostname=None,
    extra=None,
    server=None,
    ssl_handshake_timeout=None,
    call_connection_made=True,
):
    """Make an SSL transport."""
    if waiter is None:
        waiter = Future(loop=loop)

    if extra is None:
        extra = {}

    ...

```

--------------------------------

### flake8-copyright Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-copyright plugin for enforcing copyright notices in files.

```APIDOC
## `lint.flake8-copyright` Options

### Description
Options for the `flake8-copyright` plugin.

#### `author`

### Description
Author to enforce within the copyright notice. If provided, the author must be present immediately following the copyright notice.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **author** (str) - Default: `null` - The author string to enforce in copyright notices.

### Request Example
```toml
[tool.ruff.lint.flake8-copyright]
author = "Ruff"
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A

#### `min-file-size`

### Description
A minimum file size (in bytes) required for a copyright notice to be enforced. By default, all files are validated.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **min-file-size** (int) - Default: `0` - The minimum file size in bytes for copyright enforcement.

### Request Example
```toml
[tool.ruff.lint.flake8-copyright]
# Avoid enforcing a header on files smaller than 1024 bytes.
min-file-size = 1024
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A

#### `notice-rgx`

### Description
The regular expression used to match the copyright notice, compiled with the `regex` crate. Defaults to `(?i)Copyright\s+((?:\(C\)|)\s+)?\d{4}((-|,\s)\d{4})*`.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **notice-rgx** (str) - Default: `"(?i)Copyright\s+((?:\(C\)|)\s+)?\d{4}((-|,\s)\d{4})*"` - The regular expression for matching copyright notices.

### Request Example
```toml
[tool.ruff.lint.flake8-copyright]
notice-rgx = "(?i)Copyright \(C\) \d{4}"
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Class as Data Structure Example (Python)

Source: https://docs.astral.sh/ruff/rules/class-as-data-structure

Demonstrates a class with only an __init__ method that can be refactored into a dataclass. This rule helps reduce boilerplate code by suggesting more appropriate data structures.

```python
class Point:
    def __init__(self, x: float, y: float):
        self.x = x
        self.y = y


```

```python
from dataclasses import dataclass


@dataclass
class Point:
    x: float
    y: float

```

--------------------------------

### Example of never-union violation

Source: https://docs.astral.sh/ruff/rules/never-union

Demonstrates the incorrect usage of `typing.Never` in a union type, which is flagged by the RUF020 rule. The fix involves removing the redundant `Never` type from the union.

```python
from typing import Never


def func() -> Never | int: ...

```

--------------------------------

### Set Ruff Linter Arguments (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Specifies additional arguments for the Ruff linter. This setting is deprecated and only functional with `ruff-lsp`. Consult the migration guide for alternatives with the native language server. Defaults to an empty array.

```json
{
    "ruff.lint.args": ["--config", "/path/to/pyproject.toml"]
}
```

--------------------------------

### Async function using non-blocking pathlib methods

Source: https://docs.astral.sh/ruff/rules/blocking-path-method-in-async-function

Illustrates acceptable usage of `pathlib.Path` methods within an async function when the methods themselves are not inherently blocking. This includes operations like getting the directory name or joining paths.

```python
import pathlib
import os


async def func():
    path = pathlib.Path("my_file.txt")
    file_dirname = path.dirname()
    new_path = os.path.join("/tmp/src/", path)

```

--------------------------------

### Using pathlib.Path.open()

Source: https://docs.astral.sh/ruff/rules/builtin-open

This snippet shows the recommended way to open files using the `pathlib` module. By utilizing `Path.open()`, code becomes more readable and leverages object-oriented path handling, aligning with modern Python practices.

```python
from pathlib import Path

with Path("f1.py").open("wb") as fp:
    ...
```

--------------------------------

### Applying Unsafe Fixes with Ruff CLI

Source: https://docs.astral.sh/ruff/linter

Demonstrates how to enable and apply unsafe code fixes using the Ruff command-line interface. This involves using the '--unsafe-fixes' flag with 'ruff check'.

```bash
# Show unsafe fixes
ruff check --unsafe-fixes

# Apply unsafe fixes
ruff check --fix --unsafe-fixes
```

--------------------------------

### Set Ruff Formatter Arguments (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Specifies additional arguments to pass to the Ruff formatter. This setting is deprecated and only used by `ruff-lsp`. For the native language server, refer to the migration guide. The default is an empty array.

```json
{
    "ruff.format.args": ["--line-length", "100"]
}
```

--------------------------------

### Fix TODO Comment Formatting (Python)

Source: https://docs.astral.sh/ruff/rules/missing-space-after-todo-colon

This example demonstrates the incorrect formatting of a TODO comment where a space is missing after the colon. The corrected version shows the expected format with a space, adhering to standard conventions.

```python
# TODO(charlie):fix this

```

```python
# TODO(charlie): fix this

```

--------------------------------

### Incorrect Shebang Placement Example - Python

Source: https://docs.astral.sh/ruff/rules/shebang-not-first-line

Demonstrates a Python script where the shebang directive is not the first line. This violates the EXE005 rule and will likely result in the script not being executed with the intended interpreter.

```python
foo = 1
#!/usr/bin/env python3

```

--------------------------------

### Corrected Return Type Annotations using Self (Python)

Source: https://docs.astral.sh/ruff/rules/non-self-return-type

Presents the corrected version of the previous example, utilizing `typing_extensions.Self` for methods that should return an instance of the class itself or its subclasses. This ensures correct type inference in inheritance scenarios.

```python
from typing_extensions import Self

class Foo:
    def __new__(cls, *args: Any, **kwargs: Any) -> Self: ...
    def __enter__(self) -> Self: ...
    async def __aenter__(self) -> Self: ...
    def __iadd__(self, other: Foo) -> Self: ...
```

--------------------------------

### Replace io.open with open (Python)

Source: https://docs.astral.sh/ruff/rules/open-alias

This snippet demonstrates the incorrect usage of `io.open` and the preferred alternative using the built-in `open` function in Python 3. `io.open` is an alias for `open` and using `open` directly is more idiomatic. No external dependencies are required.

```python
import io

with io.open("file.txt") as f:
    ...

```

```python
with open("file.txt") as f:
    ...

```

--------------------------------

### Class variable naming convention check (Python)

Source: https://docs.astral.sh/ruff/rules/mixed-case-variable-in-class-scope

This snippet demonstrates the violation of PEP 8 naming conventions for class variables using the mixedCase style. It shows an example of incorrect usage and the recommended snake_case alternative.

```Python
class MyClass:
    myVariable = "hello"
    another_variable = "world"

```

```Python
class MyClass:
    my_variable = "hello"
    another_variable = "world"

```

--------------------------------

### Redundant Literal[None] Annotation Example - Python

Source: https://docs.astral.sh/ruff/rules/redundant-none-literal

Demonstrates the incorrect use of Literal[None] and the preferred alternatives. This rule helps maintain consistency and readability by favoring `None` over `Literal[None]` when appropriate.

```python
from typing import Literal

Literal[None]
Literal[1, 2, 3, "foo", 5, None]
```

```python
from typing import Literal

None
Literal[1, 2, 3, "foo", 5] | None
```

--------------------------------

### Use pathlib.Path.stat() instead of os.stat (Python)

Source: https://docs.astral.sh/ruff/rules/os-stat

This snippet demonstrates the recommended way to get file statistics using `pathlib.Path.stat()` compared to the discouraged `os.stat()`. Using `pathlib` offers a more object-oriented and readable API for path operations. While generally preferred, be aware of potential minor performance differences on older Python versions.

```python
import os
from pwd import getpwuid
from grp import getgrgid

stat = os.stat(file_name)
owner_name = getpwuid(stat.st_uid).pw_name
group_name = getgrgid(stat.st_gid).gr_name
```

```python
from pathlib import Path

file_path = Path(file_name)
stat = file_path.stat()
owner_name = file_path.owner()
group_name = file_path.group()
```

--------------------------------

### Lazy Import Example: Python

Source: https://docs.astral.sh/ruff/rules/banned-module-level-imports

Demonstrates how to refactor a module-level import of an expensive library (like TensorFlow) into a function-local import to improve startup performance. This checker is derived from flake8-tidy-imports.

```python
import tensorflow as tf

def show_version():
    print(tf.__version__)

```

```python
def show_version():
    import tensorflow as tf

    print(tf.__version__)

```

--------------------------------

### Configure Ruff Configuration Preference (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Sets the strategy for resolving settings between the editor and filesystem. Options include 'editorFirst', 'filesystemFirst', and 'editorOnly'. Defaults to 'editorFirst'.

```json
{
    "ruff.configurationPreference": "filesystemFirst"
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      configurationPreference = "filesystemFirst"
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "configurationPreference": "filesystemFirst"
        }
      }
    }
  }
}
```

--------------------------------

### Configure Task Tags for Comment Recognition

Source: https://docs.astral.sh/ruff/settings

Specifies a list of task tags (e.g., 'TODO', 'FIXME') to recognize. Comments starting with these tags are ignored by commented-out code detection and can be skipped by line-length rules if configured. This helps in managing development tasks within code comments.

```toml
[tool.ruff.lint]
task-tags = ["HACK"]

```

```toml
[lint]
task-tags = ["HACK"]

```

--------------------------------

### Specify Ruff Configuration File with --config

Source: https://docs.astral.sh/ruff/configuration

This command demonstrates the primary use of the --config flag, which is to point Ruff to a specific configuration file (e.g., ruff.toml) for its settings. This is useful for managing project-specific linting and formatting rules.

```bash
$ ruff check path/to/directory --config path/to/ruff.toml

```

--------------------------------

### select Configuration

Source: https://docs.astral.sh/ruff/settings

Specifies a list of rule codes or prefixes to enable. Ruff prioritizes more specific prefixes and gives precedence to `ignore` over `select` for conflicting rules.

```APIDOC
## select Configuration

### Description
A list of rule codes or prefixes to enable. Prefixes can specify exact rules (like `F841`), entire categories (like `F`), or anything in between.
When breaking ties between enabled and disabled rules (via `select` and `ignore`, respectively), more specific prefixes override less specific prefixes. `ignore` takes precedence over `select` if the same prefix appears in both.

### Default value
`["E4", "E7", "E9", "F"]`

### Type
`list[RuleSelector]`

### Example usage
```toml
[tool.ruff.lint]
# On top of the defaults (`E4`, E7`, `E9`, and `F`), enable flake8-bugbear (`B`) and flake8-quotes (`Q`).
select = ["E4", "E7", "E9", "F", "B", "Q"]
```

```ini
[lint]
# On top of the defaults (`E4`, E7`, `E9`, and `F`), enable flake8-bugbear (`B`) and flake8-quotes (`Q`).
select = ["E4", "E7", "E9", "F", "B", "Q"]
```
```

--------------------------------

### Enabling Preview Mode with Rule Selection

Source: https://docs.astral.sh/ruff/preview

This configuration enables preview mode and selects a rule category ('HYP') or a specific rule ('HYP001'). When preview mode is active, selecting 'HYP' will include preview rules within that category. Preview mode must be enabled for this to function.

```toml
[tool.ruff.lint]
extend-select = ["HYP"]
preview = true

```

```toml
[lint]
extend-select = ["HYP"]
preview = true

```

```shell
ruff check --extend-select HYP --preview

```

--------------------------------

### Docstring double quotes example

Source: https://docs.astral.sh/ruff/rules/bad-quotes-docstring

This snippet shows the corrected version of a docstring using double quotes, as expected when the `lint.flake8-quotes.docstring-quotes` setting is configured to 'double'. This ensures consistency in docstring formatting.

```python
"""
bar
"""
```

--------------------------------

### Configure per-file-ignores for Rule Exclusion

Source: https://docs.astral.sh/ruff/settings

Specifies mappings to exclude specific rule codes or prefixes for files matching a given pattern. This allows granular control over linting by ignoring certain rules in particular files or directories. An initial '!' can negate the file pattern, effectively including files.

```toml
[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["E402"]
"path/to/file.py" = ["E402"]
"!src/**.py" = ["D"]

```

```toml
[lint.per-file-ignores]
"__init__.py" = ["E402"]
"path/to/file.py" = ["E402"]
"!src/**.py" = ["D"]

```

--------------------------------

### Configure Sections Without Blank Lines (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies import sections that should not be separated by blank lines. This allows for tighter grouping of related imports. Supported sections include 'future', 'standard-library', 'third-party', 'first-party', and 'local-folder'.

```toml
[tool.ruff.lint.isort]
no-lines-before = ["future", "standard-library"]
```

```toml
[lint.isort]
no-lines-before = ["future", "standard-library"]
```

--------------------------------

### Enable Length-Based Import Sorting (TOML)

Source: https://docs.astral.sh/ruff/settings

Sorts imports based on their string length, placing shorter imports before longer ones. This impacts the overall import order. Configuration applies to Ruff's isort linting.

```toml
[tool.ruff.lint.isort]
length-sort = true
```

```toml
[lint.isort]
length-sort = true
```

--------------------------------

### Correct TODO Tag Capitalization (Python Example)

Source: https://docs.astral.sh/ruff/rules/invalid-todo-capitalization

This snippet shows the correct usage of a TODO tag with proper uppercase capitalization, adhering to the TD006 rule. Enforcing this convention makes TODO comments stand out and easier to track.

```python
# TODO(charlie): this is capitalized

```

--------------------------------

### Split string by os.sep (Python)

Source: https://docs.astral.sh/ruff/rules/os-sep-split

Demonstrates splitting a string path using `os.sep`. This method is discouraged in favor of `pathlib` for path manipulation. It shows how to get the last part (filename) and second to last part (parent directory name) of a path string.

```Python
import os

"path/to/file_name.txt".split(os.sep)[-1]

"path/to/file_name.txt".split(os.sep)[-2]

# Iterating over the path parts
if any(part in blocklist for part in "my/file/path".split(os.sep)):
    ...
```

--------------------------------

### Example of missing trailing comma (Python)

Source: https://docs.astral.sh/ruff/rules/missing-trailing-comma

This snippet demonstrates the code structure that triggers the missing-trailing-comma (COM812) linter rule. It shows a dictionary literal without a trailing comma, which is flagged by the linter.

```python
foo = {
    "bar": 1,
    "baz": 2
}

```

--------------------------------

### Detect non-unique enum values in Python

Source: https://docs.astral.sh/ruff/rules/non-unique-enums

This Python code snippet demonstrates an enum with duplicate values, which is flagged by the flake8-pie linter. The example shows how to correct this by ensuring all enum values are unique.

```Python
from enum import Enum


class Foo(Enum):
    A = 1
    B = 2
    C = 1

```

```Python
from enum import Enum


class Foo(Enum):
    A = 1
    B = 2
    C = 3

```

--------------------------------

### flake8-tidy-imports Options

Source: https://docs.astral.sh/ruff/settings

Configure options for the flake8-tidy-imports plugin, which enforces import style guidelines.

```APIDOC
## `lint.flake8-tidy-imports`

### Description
Options for the `flake8-tidy-imports` plugin.

#### `ban-relative-imports`

### Description
Whether to ban all relative imports (`"all"`), or only those imports that extend into the parent module or beyond (`"parents"`).

### Type
`"parents" | "all"`

### Default value
`"parents"`

### Example usage
```toml
[tool.ruff.lint.flake8-tidy-imports]
# Disallow all relative imports.
ban-relative-imports = "all"
```

```toml
[lint.flake8-tidy-imports]
# Disallow all relative imports.
ban-relative-imports = "all"
```

#### `banned-api`

### Description
Specific modules or module members that may not be imported or accessed. Note that this rule is only meant to flag accidental uses, and can be circumvented via `eval` or `importlib`.

### Type
`dict[str, { "msg": str }]`

### Default value
`{}`

### Example usage
```toml
[tool.ruff.lint.flake8-tidy-imports.banned-api]
"cgi".msg = "The cgi module is deprecated, see https://peps.python.org/pep-0594/#cgi."
"typing.TypedDict".msg = "Use typing_extensions.TypedDict instead."
```

```toml
[lint.flake8-tidy-imports.banned-api]
"cgi".msg = "The cgi module is deprecated, see https://peps.python.org/pep-0594/#cgi."
"typing.TypedDict".msg = "Use typing_extensions.TypedDict instead."
```

#### `banned-module-level-imports`

### Description
List of specific modules that may not be imported at module level, and should instead be imported lazily (e.g., within a function definition, or an `if TYPE_CHECKING:` block, or some other nested context). This also affects the rule `import-outside-top-level` if `banned-module-level-imports` is enabled.

### Type
`list[str]`

### Default value
`[]`

### Example usage
```toml
[tool.ruff.lint.flake8-tidy-imports]
# Ban certain modules from being imported at module level, instead requiring
# that they're imported lazily (e.g., within a function definition).
banned-module-level-imports = ["torch", "tensorflow"]
```

```toml
[lint.flake8-tidy-imports]
# Ban certain modules from being imported at module level, instead requiring
# that they're imported lazily (e.g., within a function definition).
banned-module-level-imports = ["torch", "tensorflow"]
```
```

--------------------------------

### Python Nested F-string Quote Alternation

Source: https://docs.astral.sh/ruff/formatter

Illustrates Ruff's strategy for formatting deeply nested f-strings by alternating quote styles, starting with the configured style for the outermost string. This ensures readability and consistency across nested levels.

```python
# format.quote-style = "double"

f"outer f-string {f"nested f-string {f"another nested f-string"} end"} end"

```

```python
f"outer f-string {f'nested f-string {f"another nested f-string"} end'} end"

```

--------------------------------

### Python Docstring Line Length Violation Example

Source: https://docs.astral.sh/ruff/rules/doc-line-too-long

Demonstrates a Python docstring line that violates the maximum length rule (W505). This highlights the issue of long lines in docstrings impacting code readability.

```python
def function(x):
    """Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis auctor purus ut ex fermentum, at maximus est hendrerit."""


```

--------------------------------

### Correct pytest.raises Usage (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-raises-without-exception

Illustrates the correct usage of `pytest.raises` by providing the expected exception type (`SomeException` in this example). This pattern adheres to the PT010 linter rule. It depends on the `pytest` library and assumes `do_something()` is defined elsewhere.

```python
import pytest


def test_foo():
    with pytest.raises(SomeException):
        do_something()

```

--------------------------------

### Configure Ruff with File Path (VS Code)

Source: https://docs.astral.sh/ruff/editors/settings

This snippet shows how to configure the Ruff Language Server in VS Code by providing the path to a `ruff.toml` or `pyproject.toml` file. This setting allows the server to load configurations from an external file.

```json
{
    "ruff.configuration": "~/path/to/ruff.toml"
}
```

--------------------------------

### Use JSON for deserialization instead (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-marshal-usage

Provides a secure alternative to 'marshal' using Python's 'json.load' function. This example shows how to deserialize data from a JSON file, which is a safer format for handling untrusted data.

```python
import json

with open("foo.json", "rb") as file:
    foo = json.load(file)

```

--------------------------------

### Ruff Configuration: Extending Settings from Parent Directory in pyproject.toml

Source: https://docs.astral.sh/ruff/configuration

This snippet demonstrates how to use the `extend` feature in `pyproject.toml` to inherit settings from a configuration file in a parent directory. It also shows how to override specific settings, like `line-length`, for the current configuration.

```toml
[tool.ruff]
extend = "../pyproject.toml"
line-length = 100
```

--------------------------------

### TODO comment example without author

Source: https://docs.astral.sh/ruff/rules/missing-todo-author

This snippet demonstrates a TODO comment that violates the missing-todo-author rule by omitting an author. This is considered bad practice as it lacks context for future readers who may need to address the TODO.

```python
# TODO: should assign an author here

```

--------------------------------

### Docstring single quotes example

Source: https://docs.astral.sh/ruff/rules/bad-quotes-docstring

This snippet demonstrates a docstring using single quotes, which may be flagged by the linter if the configuration expects double quotes. The linter aims to enforce consistent docstring quoting styles.

```python
'''
bar
'''
```

--------------------------------

### Replace 'for' loop with dictionary comprehension

Source: https://docs.astral.sh/ruff/rules/manual-dict-comprehension

Demonstrates how to replace a 'for' loop used for dictionary creation with a more concise and performant dictionary comprehension. This is applicable when initializing a new dictionary.

```python
pairs = (("a", 1), ("b", 2))
result = {}
for x, y in pairs:
    if y % 2:
        result[x] = y
```

```python
pairs = (("a", 1), ("b", 2))
result = {x: y for x, y in pairs if y % 2}
```

--------------------------------

### Raise Vanilla Exception - Python

Source: https://docs.astral.sh/ruff/rules/raise-vanilla-class

Demonstrates the incorrect practice of raising generic `Exception` directly. This pattern is flagged by the linter because it can lead to broad exception catching, masking other potential errors. The corrected example shows raising a custom exception for safer error management.

```python
def main_function():
    if not cond:
        raise Exception()

def consumer_func():
    try:
        do_step()
        prepare()
        main_function()
    except Exception:
        logger.error("Oops")
```

```python
def main_function():
    if not cond:
        raise CustomException()

def consumer_func():
    try:
        do_step()
        prepare()
        main_function()
    except CustomException:
        logger.error("Main function failed")
    except Exception:
        logger.error("Oops")
```

--------------------------------

### Configure flake8-annotations: Mypy Init Return

Source: https://docs.astral.sh/ruff/settings

Enables omitting return type hints for `__init__` when arguments are annotated. This feature, defaulting to `false`, simplifies constructor definitions by reducing boilerplate when type information is otherwise present.

```toml
[tool.ruff.lint.flake8-annotations]
mypy-init-return = true
```

```ini
[lint.flake8-annotations]
mypy-init-return = true
```

--------------------------------

### Avoid Hardcoded Bind to All Interfaces: Python Example

Source: https://docs.astral.sh/ruff/rules/hardcoded-bind-all-interfaces

This snippet demonstrates the insecure practice of hardcoding a bind to all interfaces ('0.0.0.0') and provides a secure alternative. Binding to all interfaces can lead to unintended access from insecure or unauthorized networks. It is recommended to bind to specific interfaces like '127.0.0.1' or 'localhost'.

```python
ALLOWED_HOSTS = ["0.0.0.0"]

Use instead:
ALLOWED_HOSTS = ["127.0.0.1", "localhost"]
```

--------------------------------

### Fix printf-style format strings with '*' specifier (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-star-requires-sequence

This code example demonstrates the incorrect usage of the '*' specifier in printf-style format strings with non-tuple values, which raises a TypeError. It then shows the correct way to use the '*' specifier with a tuple or directly with values to avoid runtime errors.

```python
from math import pi

# Incorrect usage: raises TypeError
# "%(n).*f" % {"n": (2, pi)}

# Correct usage:
"%.*f" % (2, pi)  # Output: 3.14
```

--------------------------------

### Add Shebang to Executable Python File (Bash)

Source: https://docs.astral.sh/ruff/rules/shebang-missing-executable-file

Demonstrates the correct shebang line to add to the beginning of an executable Python file. This ensures the script is run with the intended Python interpreter. This is a Bash example, as the rule is Unix-specific.

```Bash
#!/usr/bin/env python

```

--------------------------------

### Configure Known Local Folders for Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules to be treated as local folders, typically for relative imports. Supports glob patterns. This configuration is applied within Ruff's linting settings.

```toml
[tool.ruff.lint.isort]
known-local-folder = ["src"]
```

```toml
[lint.isort]
known-local-folder = ["src"]
```

--------------------------------

### Print Tokens for AST Generation

Source: https://docs.astral.sh/ruff/contributing

Outputs the sequence of tokens that form the basis for building the Abstract Syntax Tree (AST). This is useful for understanding the lexer's output and how it maps to the subsequent parsing process. The output includes the token type and its byte offset within the file.

```bash
cargo dev print-tokens <file>
```

--------------------------------

### Unsafe fix for trio.sleep(0) with comments (Python)

Source: https://docs.astral.sh/ruff/rules/async-zero-sleep

This example illustrates a scenario where the automatic fix for replacing trio.sleep(0) with trio.lowlevel.checkpoint() is considered unsafe. The presence of comments within the trio.sleep() expression can lead to their removal during the automatic fix, hence the 'unsafe' flag.

```python
import trio

async def func():
    await trio.sleep(  # comment
        # comment
        0
    )
```

--------------------------------

### Detect useless comparison in Python (B015)

Source: https://docs.astral.sh/ruff/rules/useless-comparison

This code snippet demonstrates a useless comparison, which Ruff's B015 rule flags. The example shows how to replace it with an `assert` statement to enforce an invariant, including an optional error message.

```python
foo == bar

```

```python
assert foo == bar, "`foo` and `bar` should be equal."

```

--------------------------------

### Undocumented Public Package - Python Example

Source: https://docs.astral.sh/ruff/rules/undocumented-public-package

This snippet demonstrates the 'undocumented-public-package' rule (D104) in Python. It shows a public package definition without a docstring and the recommended way to add a docstring for better documentation and clarity.

```python
__all__ = ["Player", "Game"]

```

```python
"""Game and player management package.

This package provides classes for managing players and games.
"""

__all__ = ["player", "game"]

```

--------------------------------

### Avoid 'df' variable name for Pandas DataFrames (Python)

Source: https://docs.astral.sh/ruff/rules/pandas-df-variable-name

This code example demonstrates the problematic use of 'df' as a variable name for a Pandas DataFrame and shows the recommended alternative with a more descriptive name. It is a Python code snippet.

```python
import pandas as pd

df = pd.read_csv("animals.csv")

# Use instead:
# import pandas as pd
# animals = pd.read_csv("animals.csv")

```

--------------------------------

### Handle Comments with `if` to `max()` Replacement in Python

Source: https://docs.astral.sh/ruff/rules/if-stmt-min-max

This example illustrates the safety of replacing `if` statements with `max()` calls, specifically focusing on comment preservation. It shows a scenario where comments within the replacement range might be deleted or preserved, highlighting potential issues with automated fixes.

```Python
a, b = 0, 10

if a >= b: # deleted comment
    # deleted comment
    a = b # preserved comment
```

--------------------------------

### Run Ruff Benchmarks with Quiet Output

Source: https://docs.astral.sh/ruff/contributing

Executes Ruff benchmarks with a cleaner output, omitting statistical relevance information for a less verbose display. Dependencies: Rust toolchain, Ruff project.

```shell
cargo bench -p ruff_benchmark -- --quiet
```

--------------------------------

### Ruff Lint: Extend Per-File Ignores

Source: https://docs.astral.sh/ruff/settings

Specifies a list of mappings from file patterns to rule codes or prefixes that should be ignored on a per-file basis, in addition to global `per-file-ignores`. This allows for granular control over linting exclusions. Configuration is available in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint.extend-per-file-ignores]
# Also ignore `E402` in all `__init__.py` files.
"__init__.py" = ["E402"]
```

```toml
[lint.extend-per-file-ignores]
# Also ignore `E402` in all `__init__.py` files.
"__init__.py" = ["E402"]
```

--------------------------------

### Avoid Quoted Annotations in Stub Files (Python)

Source: https://docs.astral.sh/ruff/rules/quoted-annotation-in-stub

This example demonstrates the incorrect use of quoted type annotations in a stub file and the recommended way to write it. Stub files (.pyi) do not require quotes for forward references as they are not executed at runtime.

```python
def function() -> "int": ...

```

```python
def function() -> int: ...

```

--------------------------------

### Safe __annotations__ Access using inspect (Python 3.10+)

Source: https://docs.astral.sh/ruff/rules/access-annotations-from-class-dict

Illustrates the recommended method for accessing annotations on Python 3.10 and later using the `inspect.get_annotations` function. This function is part of the standard library and offers a reliable way to get annotations.

```python
import inspect

infect.get_annotations(foo)
```

--------------------------------

### Correct staticmethod usage with decorator (Python)

Source: https://docs.astral.sh/ruff/rules/no-staticmethod-decorator

This snippet shows the recommended way to define a static method using the @staticmethod decorator in Python. This adheres to the Pylint PLR0203 rule and improves code readability and consistency. It's a Python code example.

```python
class Foo:
    @staticmethod
    def bar(arg1, arg2): ...

```

--------------------------------

### Precedence: Dedicated Flag vs. --config Override

Source: https://docs.astral.sh/ruff/configuration

This example illustrates the precedence rule where a dedicated command-line flag overrides a setting specified via the --config flag. In this case, '--line-length=90' (dedicated flag) will set the line length to 90, even though '--config "line-length=100"' attempts to set it to 100. Dedicated flags always take priority.

```bash
$ ruff format path/to/file --line-length=90 --config "line-length=100"

```

--------------------------------

### Ruff Configuration: Extending Settings from Parent Directory in ruff.toml

Source: https://docs.astral.sh/ruff/configuration

This snippet demonstrates how to use the `extend` feature in `ruff.toml` to inherit settings from a configuration file in a parent directory. It also shows how to override specific settings, like `line-length`, for the current configuration.

```toml
extend = "../ruff.toml"
line-length = 100
```

--------------------------------

### Python Logging Extra Attribute Clash Example

Source: https://docs.astral.sh/ruff/rules/logging-extra-attr-clash

Demonstrates a common logging error where 'extra' attributes clash with 'LogRecord' attributes, leading to a KeyError. It shows the incorrect usage and the corrected version by renaming the 'extra' attribute to avoid the conflict.

```python
import logging

logging.basicConfig(format="%(name) - %(message)s", level=logging.INFO)

username = "Maria"

logging.info("Something happened", extra=dict(name=username))


```

```python
import logging

logging.basicConfig(format="%(user_id)s - %(message)s", level=logging.INFO)

username = "Maria"

logging.info("Something happened", extra=dict(user_id=username))


```

--------------------------------

### Python Example: Outdated sys.version_info Block

Source: https://docs.astral.sh/ruff/rules/outdated-version-block

This snippet demonstrates a conditional block using sys.version_info that is outdated for the minimum supported Python version. The linter flags this as a potential issue. The fix involves removing the outdated block if it's no longer necessary.

```python
import sys

if sys.version_info < (3, 0):
    print("py2")
else:
    print("py3")

```

```python
print("py3")

```

--------------------------------

### Specify included files for Ruff

Source: https://docs.astral.sh/ruff/configuration

This configuration shows how to explicitly define the files and directories that Ruff should include for linting or formatting. It supports glob patterns and can be set in `pyproject.toml` or `ruff.toml`. Note that paths must match files, not directories.

```toml
[tool.ruff]
include = ["pyproject.toml", "src/**/*.py", "scripts/**/*.py"]

```

```toml
include = ["pyproject.toml", "src/**/*.py", "scripts/**/*.py"]

```

--------------------------------

### Correct Decimal Constructor Usage in Python

Source: https://docs.astral.sh/ruff/rules/verbose-decimal-constructor

Demonstrates the preferred, more concise way to initialize Decimal objects in Python. It avoids unnecessary string or float casts, leading to improved readability and adherence to idiomatic Python practices.

```python
from decimal import Decimal

Decimal("0")
Decimal(float("Infinity"))
```

```python
from decimal import Decimal

Decimal(0)
Decimal("Infinity")
```

--------------------------------

### Spark Session Initialization: Black vs. Ruff

Source: https://docs.astral.sh/ruff/formatter/black

Demonstrates how Black and Ruff format the initialization of a PySpark SparkSession. Both formatters aim for readability, but Ruff may use more parentheses for clarity in complex configurations.

```python
def run(data_path, model_uri):
    with pyspark.sql.SparkSession.builder.config(
        key="spark.python.worker.reuse", value=True
    ).config(key="spark.ui.enabled", value=False).master(
        "local-cluster[2, 1, 1024]"
    ).getOrCreate():
        # ignore spark log output
        spark.sparkContext.setLogLevel("OFF")
        print(score_model(spark, data_path, model_uri))
```

```python
def run(data_path, model_uri):
    with pyspark.sql.SparkSession.builder.config(
        key="spark.python.worker.reuse", value=True
    ).config(key="spark.ui.enabled", value=False).master(
        "local-cluster[2, 1, 1024]"
    ).getOrCreate():
        # ignore spark log output
        spark.sparkContext.setLogLevel("OFF")
        print(score_model(spark, data_path, model_uri))
```

```python
def run(data_path, model_uri):
    with (
        pyspark.sql.SparkSession.builder.config(
            key="spark.python.worker.reuse", value=True
        )
        .config(key="spark.ui.enabled", value=False)
        .master("local-cluster[2, 1, 1024]")
        .getOrCreate()
    ):
        # ignore spark log output
        spark.sparkContext.setLogLevel("OFF")
        print(score_model(spark, data_path, model_uri))
```

--------------------------------

### Import not at top of file (E402) - Python Example

Source: https://docs.astral.sh/ruff/rules/module-import-not-at-top-of-file

This snippet demonstrates the E402 error, where imports are placed after other code. It adheres to PEP 8 by placing imports at the file's beginning. This rule is derived from pycodestyle and applies to both standard Python files and Jupyter notebooks at the cell level.

```python
"One string"
"Two string"
a = 1
import os
from sys import x

```

```python
import os
from sys import x

"One string"
"Two string"
a = 1

```

--------------------------------

### Avoid os.path.splitext, use pathlib equivalents (Python)

Source: https://docs.astral.sh/ruff/rules/os-path-splitext

This snippet demonstrates the recommended way to split a file's root and extension using Python's 'pathlib' module instead of the older 'os.path.splitext' function. It highlights improved readability and object-oriented path handling. Dependencies include the 'pathlib' module. Input is a file path string, and output is a reconstructed root path and the file extension.

```python
import os

(root, ext) = os.path.splitext("foo/bar.py")
```

```python
from pathlib import Path

path = Path("foo/bar.py")
root = path.parent / path.stem
ext = path.suffix
```

--------------------------------

### Incorrect staticmethod usage without decorator (Python)

Source: https://docs.astral.sh/ruff/rules/no-staticmethod-decorator

This snippet demonstrates the incorrect way of defining a static method without using the @staticmethod decorator. Pylint rule PLR0203 will flag this code. It's a Python code example.

```python
class Foo:
    def bar(arg1, arg2): ...

    bar = staticmethod(bar)

```

--------------------------------

### Incorrect Return Type Annotation Example (Python)

Source: https://docs.astral.sh/ruff/rules/non-self-return-type

Illustrates a common scenario where methods returning 'self' are annotated with a fixed class type, leading to type inference problems when the class is subclassed. This demonstrates the issue that the PYI034 rule aims to detect.

```python
class Shape:
    def set_scale(self, scale: float) -> Shape:
        self.scale = scale
        return self

class Circle(Shape):
    def set_radius(self, radius: float) -> Circle:
        self.radius = radius
        return self

# Type checker infers return type as `Shape`, not `Circle`.
Circle().set_scale(0.5)

# Thus, this expression is invalid, as `Shape` has no attribute `set_radius`.
Circle().set_scale(0.5).set_radius(2.7)
```

--------------------------------

### Inefficient List Copying with For-Loop (Python)

Source: https://docs.astral.sh/ruff/rules/manual-list-copy

This Python code snippet demonstrates an inefficient way to copy a list using a for-loop and the append method. It is recommended to use the built-in list() constructor or the .copy() method for better performance and readability, as shown in the alternative example.

```python
original = list(range(10000))
filtered = []
for i in original:
    filtered.append(i)

```

```python
original = list(range(10000))
filtered = list(original)

```

--------------------------------

### Configure relative import order (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Controls the order of relative imports. 'furthest-to-closest' is the default, equivalent to isort's reverse-relative=false. 'closest-to-furthest' is equivalent to isort's reverse-relative=true.

```toml
[tool.ruff.lint.isort]
relative-imports-order = "closest-to-furthest"

```

```toml
[lint.isort]
relative-imports-order = "closest-to-furthest"

```

--------------------------------

### Inherit __hash__ from parent class (Python)

Source: https://docs.astral.sh/ruff/rules/eq-without-hash

This example shows how to correctly handle hashability when inheriting from a parent class that already defines __hash__. If a subclass overrides __eq__ but wants to maintain the hashability provided by the parent, it can explicitly assign the parent's __hash__ method to itself. This ensures consistency between equality and hashing.

```python
class Person:
    def __init__(self):
        self.name = "monty"

    def __eq__(self, other):
        return isinstance(other, Person) and other.name == self.name

    def __hash__(self):
        return hash(self.name)

class Developer(Person):
    def __init__(self):
        # ... initialization code ...
        pass

    def __eq__(self, other):
        # ... equality check ...
        pass

    __hash__ = Person.__hash__

```

--------------------------------

### Recommended pytest.fixture Usage Example (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-deprecated-yield-fixture

This snippet shows the recommended and current standard for defining fixtures in pytest using `pytest.fixture`. It mirrors the functionality of the deprecated `yield_fixture` by yielding an object and including cleanup logic, ensuring compatibility with modern pytest versions.

```python
import pytest


@pytest.fixture()
def my_fixture():
    obj = SomeClass()
    yield obj
    obj.cleanup()

```

--------------------------------

### Correct File Opening with Context Manager (Python)

Source: https://docs.astral.sh/ruff/rules/open-file-with-context-handler

Shows the recommended way to open a file using a 'with' statement (context manager) in Python. This ensures the file is automatically closed, even if errors happen.

```python
with open("foo.txt") as file:
    ...
```

--------------------------------

### Example of redirected-noqa (RUF101) in Python

Source: https://docs.astral.sh/ruff/rules/redirected-noqa

This snippet demonstrates the incorrect usage of a 'noqa' directive with a redirected rule code (PGH001) and provides the corrected version using the canonical rule code (S307). Using redirected codes can lead to outdated linting practices.

```python
# Incorrect usage
x = eval(command)  # noqa: PGH001

# Correct usage
x = eval(command)  # noqa: S307
```

--------------------------------

### Enable Docstring Code Formatting in Ruff

Source: https://docs.astral.sh/ruff/settings

Controls whether Ruff should reformat code snippets found within docstrings. When enabled, Python code examples in various formats (doctest, Markdown, reStructuredText) are automatically reformatted to adhere to Ruff's formatting rules. If code is invalid, it's left untouched. The default is false.

```toml
[tool.ruff.format]
docstring-code-format = true

```

```toml
[format]
docstring-code-format = true

```

--------------------------------

### Configure Per-File Target Python Versions with Ruff

Source: https://docs.astral.sh/ruff/settings

Specify Python versions for specific file patterns, overriding global settings. Useful for mixed-version projects or specific subdirectories. This affects linting rules and formatting options.

```toml
[tool.ruff.per-file-target-version]
# Override the project-wide Python version for a developer scripts directory:
"scripts/*.py" = "py312"

```

```toml
[per-file-target-version]
# Override the project-wide Python version for a developer scripts directory:
"scripts/*.py" = "py312"

```

--------------------------------

### D211 Example: Blank line before class docstring (Python)

Source: https://docs.astral.sh/ruff/rules/blank-line-before-class

Demonstrates the incorrect and correct way to define a class with a docstring according to the D211 rule. This rule aims to maintain consistency by disallowing blank lines between class definitions and their docstrings.

```python
class PhotoMetadata:

    """Metadata about a photo."""

```

```python
class PhotoMetadata:
    """Metadata about a photo."""

```

--------------------------------

### Deprecated pytest.yield_fixture Usage Example (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-deprecated-yield-fixture

This snippet demonstrates the deprecated usage of `pytest.yield_fixture`. It imports pytest and defines a fixture that yields an object for use in tests, including cleanup logic. This pattern is discouraged in favor of the standard `pytest.fixture`.

```python
import pytest


@pytest.yield_fixture()
def my_fixture():
    obj = SomeClass()
    yield obj
    obj.cleanup()

```

--------------------------------

### Check TODO Tag Capitalization (Python Example)

Source: https://docs.astral.sh/ruff/rules/invalid-todo-capitalization

This snippet demonstrates the incorrect usage of a TODO tag with lowercase capitalization, which violates the TD006 rule. The linter flags this to enforce the convention of uppercase TODO tags for better readability and task identification.

```python
# todo(charlie): capitalize this

```

--------------------------------

### Configure Rule Selection for Linting

Source: https://docs.astral.sh/ruff/settings

Defines a list of rule codes or prefixes to activate for linting. This allows users to specify which rules Ruff should enforce. More specific prefixes take precedence, and `ignore` rules override `select` rules if conflicts arise.

```toml
[tool.ruff.lint]
select = ["E4", "E7", "E9", "F", "B", "Q"]

```

```toml
[lint]
select = ["E4", "E7", "E9", "F", "B", "Q"]

```

--------------------------------

### Configure Known Third-Party Modules for Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Defines a list of modules to be considered third-party, irrespective of filesystem introspection. Supports glob patterns. This setting is part of Ruff's isort linting configuration.

```toml
[tool.ruff.lint.isort]
known-third-party = ["src"]
```

```toml
[lint.isort]
known-third-party = ["src"]
```

--------------------------------

### Replace unnecessary enumerate with direct iteration - Python

Source: https://docs.astral.sh/ruff/rules/unnecessary-enumerate

This snippet shows the recommended alternative when `enumerate` is used only to get the value and the index is discarded. It demonstrates iterating directly over the sequence, which is more Pythonic and efficient than using `enumerate` when the index is not required.

```python
for value in sequence:
    print(value)
```

--------------------------------

### flake8-import-conventions Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-import-conventions plugin for managing import aliases.

```APIDOC
## `lint.flake8-import-conventions` Options

### Description
Options for the `flake8-import-conventions` plugin.

#### `aliases`

### Description
The conventional aliases for imports. These aliases can be extended by the `extend-aliases` option.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **aliases** (dict[str, str]) - Default: `{"altair": "alt", "matplotlib": "mpl", "matplotlib.pyplot": "plt", "numpy": "np", "numpy.typing": "npt", "pandas": "pd", "seaborn": "sns", "tensorflow": "tf", "tkinter":  "tk", "holoviews": "hv", "panel": "pn", "plotly.express": "px", "polars": "pl", "pyarrow": "pa", "xml.etree.ElementTree": "ET"}` - A dictionary mapping module names to their conventional aliases.

### Request Example
```toml
[tool.ruff.lint.flake8-import-conventions.aliases]
# Declare the default aliases.
altair = "alt"
"matplotlib.pyplot" = "plt"
numpy = "np"
pandas = "pd"
seaborn = "sns"
scipy = "sp"
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Suppressing Ruff Lint Errors Inline

Source: https://docs.astral.sh/ruff/linter

Provides examples of how to suppress individual Ruff lint errors or groups of errors directly within the code using the 'noqa' comment. This includes ignoring specific codes, multiple codes, all codes, and applying to multi-line strings and import blocks.

```python
# Ignore F841.
x = 1  # noqa: F841

# Ignore E741 and F841.
i = 1  # noqa: E741, F841

# Ignore _all_ violations.
x = 1  # noqa
```

```python
"""Lorem ipsum dolor sit amet.

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor.
"""  # noqa: E501
```

```python
import os  # noqa: I001
import abc
```

--------------------------------

### Enable Ruff Preview Mode

Source: https://docs.astral.sh/ruff/settings

Enable Ruff's preview mode to utilize unstable rules, fixes, and formatting. This setting is a boolean flag.

```toml
[tool.ruff]
# Enable preview features.
preview = true

```

```toml
# Enable preview features.
preview = true

```

--------------------------------

### Timezone-aware datetime instantiation (Python)

Source: https://docs.astral.sh/ruff/rules/call-datetime-without-tzinfo

Shows the correct method for creating a timezone-aware datetime object by specifying the 'tzinfo' argument. This ensures the datetime object represents a precise moment in time, avoiding potential issues associated with naive objects. It includes examples for general Python versions and Python 3.11+.

```python
import datetime

datetime.datetime(2000, 1, 1, 0, 0, 0, tzinfo=datetime.timezone.utc)
```

```python
import datetime

datetime.datetime(2000, 1, 1, 0, 0, 0, tzinfo=datetime.UTC)
```

--------------------------------

### Using os.path.expanduser

Source: https://docs.astral.sh/ruff/rules/os-path-expanduser

Demonstrates the usage of `os.path.expanduser` for expanding the user's home directory in a given path. This function is part of the standard `os.path` module.

```python
import os

os.path.expanduser("~/films/Monty Python")
```

--------------------------------

### Example of using trailing comma (Python)

Source: https://docs.astral.sh/ruff/rules/missing-trailing-comma

This snippet illustrates the recommended code structure to avoid the missing-trailing-comma (COM812) linter rule. It shows a dictionary literal with a trailing comma, which is considered good practice for reducing diff sizes.

```python
foo = {
    "bar": 1,
    "baz": 2,
}

```

--------------------------------

### Python: Detect Missing Explicit Return (RET503)

Source: https://docs.astral.sh/ruff/rules/implicit-return

This snippet demonstrates a Python function where an explicit 'return None' is missing at the end, which can lead to confusion as Python implicitly returns None. The example shows the problematic code and the corrected version.

```python
def foo(bar):
    if not bar:
        return 1

```

```python
def foo(bar):
    if not bar:
        return 1
    return None

```

--------------------------------

### Enable Type-Based Import Ordering (TOML)

Source: https://docs.astral.sh/ruff/settings

Orders imports based on their type, primarily determined by case, in addition to alphabetical sorting. This setting overrides the 'case-sensitive' option when enabled, providing a distinct import order.

```toml
[tool.ruff.lint.isort]
order-by-type = true
```

```toml
[lint.isort]
order-by-type = true
```

--------------------------------

### Configure File Exclusion Patterns for Ruff Formatting

Source: https://docs.astral.sh/ruff/settings

Specifies a list of file patterns to exclude from Ruff's formatting process. Exclusions use glob patterns and are relative to the project root. Defaults to an empty list.

```toml
[tool.ruff.format]
exclude = ["generated"]

```

```toml
[format]
exclude = ["generated"]

```

--------------------------------

### Ruff W391 Example: Too Many Trailing Newlines

Source: https://docs.astral.sh/ruff/rules/too-many-newlines-at-end-of-file

This code snippet demonstrates the incorrect usage flagged by the Ruff W391 rule, showing multiple trailing newlines after the code. The fix involves ensuring only a single trailing newline.

```python
spam(1)




```

```python
spam(1)


```

--------------------------------

### Python subprocess.run without shell

Source: https://docs.astral.sh/ruff/rules/subprocess-without-shell-equals-true

This snippet demonstrates calling `subprocess.run` in Python without explicitly enabling the shell. While generally safer, it's crucial to validate user input to prevent potential vulnerabilities. This code is derived from an example illustrating the S603 rule.

```python
import subprocess

cmd = input("Enter a command: ").split()
subprocess.run(cmd)
```

--------------------------------

### Unsorted __all__ definition

Source: https://docs.astral.sh/ruff/rules/unsorted-dunder-all

Demonstrates an unsorted __all__ definition, which violates the RUF022 rule. The 'isort-style' sort orders items by casing (SCREAMING_SNAKE_CASE, CamelCase, then others) and then naturally within each category. This example shows a basic list and a conditional addition that also needs sorting.

```python
import sys

__all__ = [
    "b",
    "c",
    "a",
]

if sys.platform == "win32":
    __all__ += ["z", "y"]


```

--------------------------------

### Ignoring Specific Rules with Ruff Configuration

Source: https://docs.astral.sh/ruff/linter

Shows how to globally ignore specific lint rules across a project by adding them to the 'ignore' list in the Ruff configuration files (pyproject.toml or ruff.toml).

```toml
[tool.ruff.lint]
ignore = ["F401"]
```

```toml
[lint]
ignore = ["F401"]
```

--------------------------------

### Correct Indented Form Feed (Python)

Source: https://docs.astral.sh/ruff/rules/indented-form-feed

This example shows the corrected version of code flagged by the RUF054 rule. It demonstrates removing the indented form feed character to ensure consistent and predictable indentation behavior, adhering to best practices.

```python
if foo():
    bar()
```

--------------------------------

### Python: Correct Exception Naming (N818)

Source: https://docs.astral.sh/ruff/rules/error-suffix-on-exception-name

This snippet shows the corrected version of the Python exception from the previous example, adhering to the N818 rule by appending the 'Error' suffix. This follows PEP 8 recommendations for exception naming.

```python
class ValidationError(Exception):
    pass

```

--------------------------------

### Detect Insecure logging.config.listen Calls in Python

Source: https://docs.astral.sh/ruff/rules/logging-config-insecure-listen

This code snippet demonstrates the insecure use of `logging.config.listen` in Python. This function starts a server that listens for logging configuration requests, which is dangerous because it passes parts of the configuration to the built-in `eval` function, potentially allowing arbitrary code execution. Developers should avoid using this function.

```python
import logging

logging.config.listen(9999)

```

--------------------------------

### Use pathlib.Path.stat() instead of os.path.getmtime

Source: https://docs.astral.sh/ruff/rules/os-path-getmtime

This snippet demonstrates the recommended replacement for os.path.getmtime using the pathlib module. It improves code readability by leveraging object-oriented path manipulation. The original code uses os.path.getmtime to get the modification time of a file.

```python
import os

os.path.getmtime(__file__)
```

```python
from pathlib import Path

Path(__file__).stat().st_mtime
```

--------------------------------

### Fix mutable default class attributes using typing.ClassVar (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-class-default

This example demonstrates using `typing.ClassVar` to explicitly declare that a class attribute is intended to be shared across all instances. This is a valid alternative when shared state is the desired behavior.

```python
from typing import ClassVar


class A:
    variable_1: ClassVar[list[int]] = []
    variable_2: ClassVar[set[int]] = set()
    variable_3: ClassVar[dict[str, int]] = {}

```

--------------------------------

### Configure Ruff Formatting Backend (Lua)

Source: https://docs.astral.sh/ruff/editors/settings

Configures the Ruff formatter backend using Lua, typically for Neovim. It specifies 'uv' as the backend, requiring uv version >= 0.8.13. The default backend is 'internal'.

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      format = {
        backend = "uv"
      }
    }
  }
}
```

--------------------------------

### Refactor function with many if-elif-else statements using a dictionary

Source: https://docs.astral.sh/ruff/rules/too-many-branches

This example demonstrates refactoring a Python function that uses a long chain of if-elif-else statements to determine a capital city. It replaces the conditional logic with a dictionary lookup, improving conciseness and readability. This approach is suitable when mapping discrete inputs to discrete outputs.

```python
def capital(country):
    if country == "Australia":
        return "Canberra"
    elif country == "Brazil":
        return "Brasilia"
    elif country == "Canada":
        return "Ottawa"
    elif country == "England":
        return "London"
    elif country == "France":
        return "Paris"
    elif country == "Germany":
        return "Berlin"
    elif country == "Poland":
        return "Warsaw"
    elif country == "Romania":
        return "Bucharest"
    elif country == "Spain":
        return "Madrid"
    elif country == "Thailand":
        return "Bangkok"
    elif country == "Turkey":
        return "Ankara"
    elif country == "United States":
        return "Washington"
    else:
        return "Unknown"  # 13th branch
```

```python
def capital(country):
    capitals = {
        "Australia": "Canberra",
        "Brazil": "Brasilia",
        "Canada": "Ottawa",
        "England": "London",
        "France": "Paris",
        "Germany": "Berlin",
        "Poland": "Warsaw",
        "Romania": "Bucharest",
        "Spain": "Madrid",
        "Thailand": "Bangkok",
        "Turkey": "Ankara",
        "United States": "Washington",
    }
    city = capitals.get(country, "Unknown")
    return city
```

--------------------------------

### Using open() builtin

Source: https://docs.astral.sh/ruff/rules/builtin-open

This snippet demonstrates the usage of the built-in `open()` function for file operations. It is generally recommended to use `pathlib.Path.open()` for better readability and object-oriented path manipulation.

```python
with open("f1.py", "wb") as fp:
    ...
```

--------------------------------

### Configure Ruff Notification Display

Source: https://docs.astral.sh/ruff/editors/settings

Controls when notifications are shown by the Ruff language server. This setting is deprecated in favor of the native language server and should be updated according to the migration guide. Possible values include 'off', 'onError', 'onWarning', and 'always'.

```json
{
    "ruff.showNotifications": "onWarning"
}
```

--------------------------------

### Avoid Naive Datetime Objects with datetime.datetime.now() (Python)

Source: https://docs.astral.sh/ruff/rules/call-datetime-now-without-tzinfo

This snippet demonstrates how to correctly use datetime.datetime.now() to create timezone-aware datetime objects. It highlights the risks of using naive datetime objects and provides the recommended approach using `tz` argument. The example shows the incorrect usage and its corrected counterparts.

```python
import datetime

datetime.datetime.now()
```

```python
import datetime

datetime.datetime.now(tz=datetime.timezone.utc)
```

```python
import datetime

datetime.datetime.now(tz=datetime.UTC)
```

--------------------------------

### Set Minimum File Size for Copyright (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Defines a minimum file size in bytes for copyright notice enforcement. Files smaller than this size will not be checked. The default value is `0`, meaning all files are validated. This helps avoid enforcing headers on small, potentially temporary files.

```toml
[tool.ruff.lint.flake8-copyright]
# Avoid enforcing a header on files smaller than 1024 bytes.
min-file-size = 1024

```

```toml
[lint.flake8-copyright]
# Avoid enforcing a header on files smaller than 1024 bytes.
min-file-size = 1024

```

--------------------------------

### flake8-comprehensions Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-comprehensions plugin to allow dictionary calls with keyword arguments.

```APIDOC
## `allow-dict-calls-with-keyword-arguments`

### Description
Allow `dict` calls that make use of keyword arguments (e.g., `dict(a=1, b=2)`).

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **allow-dict-calls-with-keyword-arguments** (bool) - Default: `false` - Enables or disables dictionary calls with keyword arguments.

### Request Example
```toml
[tool.ruff.lint.flake8-comprehensions]
allow-dict-calls-with-keyword-arguments = true
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Undocumented Public Method Check (Python)

Source: https://docs.astral.sh/ruff/rules/undocumented-public-method

This snippet demonstrates the `undocumented-public-method` check, which identifies public methods missing docstrings. It provides examples of code violating and adhering to the rule, illustrating the expected docstring formats (NumPy and Google styles).

```python
class Cat(Animal):
    def greet(self, happy: bool = True):
        if happy:
            print("Meow!")
        else:
            raise ValueError("Tried to greet an unhappy cat.")


```

```python
class Cat(Animal):
    def greet(self, happy: bool = True):
        """Print a greeting from the cat.

        Parameters
        ----------
        happy : bool, optional
            Whether the cat is happy, is True by default.

        Raises
        ------
        ValueError
            If the cat is not happy.
        """
        if happy:
            print("Meow!")
        else:
            raise ValueError("Tried to greet an unhappy cat.")


```

```python
class Cat(Animal):
    def greet(self, happy: bool = True):
        """Print a greeting from the cat.

        Args:
            happy: Whether the cat is happy, is True by default.

        Raises:
            ValueError: If the cat is not happy.
        """
        if happy:
            print("Meow!")
        else:
            raise ValueError("Tried to greet an unhappy cat.")


```

--------------------------------

### Enable Ruff Preview Mode for Linting

Source: https://docs.astral.sh/ruff/preview

This snippet shows how to enable Ruff's preview mode specifically for linting rules. Preview mode includes unstable features and may turn warnings into errors. It can be configured in pyproject.toml, ruff.toml, or via the CLI.

```toml
[tool.ruff.lint]
preview = true

```

```toml
[lint]
preview = true

```

```shell
ruff check --preview

```

--------------------------------

### Example of Unquoted Type Expression in typing.cast()

Source: https://docs.astral.sh/ruff/rules/runtime-cast-value

Demonstrates the incorrect usage of an unquoted type expression within a `typing.cast()` call, which violates the TC006 rule. This can lead to stylistic inconsistencies and potential issues with forward references or type checking imports.

```python
from typing import cast

x = cast(dict[str, int], foo)
```

--------------------------------

### Python Undocumented Nested Class Example

Source: https://docs.astral.sh/ruff/rules/undocumented-public-nested-class

Demonstrates a Python code snippet where a nested public class lacks a docstring, violating documentation standards. This check is crucial for code clarity as nested classes do not inherit docstrings from their enclosing scope.

```python
class Foo:
    """Class Foo."""

    class Bar: ...


bar = Foo.Bar()
bar.__doc__  # None
```

```python
class Foo:
    """Class Foo."""

    class Bar:
        """Class Bar."""


bar = Foo.Bar()
bar.__doc__  # "Class Bar."
```

--------------------------------

### Replace Literal[True, False] with bool in Python

Source: https://docs.astral.sh/ruff/rules/redundant-bool-literal

This snippet demonstrates the use of Literal[True, False] for type annotations, which can be replaced by the more concise 'bool' type. The example also shows how to handle Literals that include other types alongside booleans.

```python
from typing import Literal

x: Literal[True, False]
y: Literal[True, False, "hello", "world"]

# Use instead:
x: bool
y: Literal["hello", "world"] | bool

```

--------------------------------

### Detect Wildcard Imports (Python)

Source: https://docs.astral.sh/ruff/rules/undefined-local-with-import-star

This code snippet demonstrates the use of a wildcard import from the 'math' module. Ruff's F403 rule flags this pattern because it pollutes the namespace and makes code harder to understand. The example shows the problematic import and a refactored version using specific imports.

```python
from math import *

def area(radius):
    return pi * radius**2

```

```python
from math import pi

def area(radius):
    return pi * radius**2

```

--------------------------------

### Detect Ambiguous Unicode in Docstrings (Python)

Source: https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-docstring

This snippet demonstrates the use of a docstring containing an ambiguous Unicode character (full-width parenthesis) that would be flagged by the RUF002 linter rule. It serves as an example of code that violates the rule.

```python
"""A lovely docstring (with a `U+FF09` parenthesis."""

```

--------------------------------

### Correctly Await Trio Function Calls (Python)

Source: https://docs.astral.sh/ruff/rules/trio-sync-call

This snippet shows the corrected version of the previous example, where the trio.sleep function is properly awaited. This ensures that the asynchronous operation completes as expected, preventing potential runtime issues and ensuring correct program flow.

```python
import trio


async def double_sleep(x):
    await trio.sleep(2 * x)
```

--------------------------------

### Detect Repeated Keys in Dictionary Literals (Python)

Source: https://docs.astral.sh/ruff/rules/multi-value-repeated-key-literal

This snippet demonstrates how Ruff identifies dictionary literals where a key is assigned multiple values. It highlights that earlier values are overwritten by later ones, indicating a potential error. The example shows the problematic code and the corrected version with unique keys.

```python
foo = {
    "bar": 1,
    "baz": 2,
    "baz": 3,
}
foo["baz"]  # 3
```

```python
foo = {
    "bar": 1,
    "baz": 2,
}
foo["baz"]  # 2
```

--------------------------------

### Generate Ruff Documentation and Schema

Source: https://docs.astral.sh/ruff/contributing

Updates the `ruff.schema.json`, `docs/configuration.md`, and `docs/rules` files. This command ensures that documentation and schema definitions are synchronized with the latest changes in Ruff's configuration and rules.

```bash
cargo dev generate-all
```

--------------------------------

### Exempt Runtime-Evaluated Decorators from Type Checking Blocks (TOML)

Source: https://docs.astral.sh/ruff/settings

This configuration exempts classes and functions decorated with specific decorators from being moved into type-checking blocks. Common examples include Pydantic's `@validate_call` and attrs' `@define`. It also supports framework decorators like FastAPI's `@app.get`.

```toml
[tool.ruff.lint.flake8-type-checking]
runtime-evaluated-decorators = ["pydantic.validate_call", "attrs.define"]

```

```toml
[lint.flake8-type-checking]
runtime-evaluated-decorators = ["pydantic.validate_call", "attrs.define"]

```

--------------------------------

### Define Namespace Packages in Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies directories that should be treated as namespace packages. Ruff will consider these directories and their subdirectories as if they contained an `__init__.py` file for module resolution purposes. Default is an empty list.

```toml
[tool.ruff]
namespace-packages = ["airflow/providers"]

```

```toml
namespace-packages = ["airflow/providers"]

```

--------------------------------

### Python: Detect f-string docstrings

Source: https://docs.astral.sh/ruff/rules/f-string-docstring

This snippet demonstrates the incorrect use of an f-string as a docstring, which Python interprets as a joined string. The rule checks for this pattern and provides an example of the correct way to define a docstring using standard triple quotes.

```python
def foo():
    f"""Not a docstring."""


```

```python
def foo():
    """A docstring."""


```

--------------------------------

### Python: Correct Usage After Decorator (E304)

Source: https://docs.astral.sh/ruff/rules/blank-line-after-decorator

This snippet shows the correct Python code structure where no blank line exists between the decorator and the decorated object, adhering to the Ruff E304 rule. This example serves as the corrected version of the problematic code.

```python
class User(object):

    @property
    def name(self):
        pass

```

--------------------------------

### Incorrect pytest.raises with multiple statements

Source: https://docs.astral.sh/ruff/rules/pytest-raises-with-multiple-statements

Demonstrates an incorrect usage of pytest.raises where multiple statements are present within the context manager. This can lead to unexpected test behavior, as later statements might not be executed if an exception is raised earlier than anticipated. This example uses Python.

```python
import pytest

def test_foo():
    with pytest.raises(MyError):
        setup()
        func_to_test()  # not executed if `setup()` raises `MyError`
        assert foo()  # not executed
```

--------------------------------

### Override Ruff Settings with --config (Key-Value Pairs)

Source: https://docs.astral.sh/ruff/configuration

This shows how the --config flag can be used to provide arbitrary overrides for Ruff configuration settings using TOML key-value pairs. This is particularly useful for settings that lack dedicated command-line flags, such as 'lint.dummy-variable-rgx' or 'lint.per-file-ignores'. Settings for the linter must be prefixed with 'lint.', and formatter settings with 'format.'.

```bash
$ ruff check path/to/file --config path/to/ruff.toml --config "lint.dummy-variable-rgx = '__.*'" --config "lint.per-file-ignores = {'some_file.py' = ['F841']}"

```

--------------------------------

### Correct Dunder Method Usage in Python

Source: https://docs.astral.sh/ruff/rules/bad-dunder-method-name

This Python code snippet shows the correct way to define the `__init__` dunder method. Ruff's PLW3201 rule ensures that only recognized dunder methods are used, preventing potential confusion and runtime errors. The example highlights the standard convention for special method names in Python classes.

```python
class Foo:
    def __init__(self):
        ...

```

--------------------------------

### Correcting non-slot assignments in Python

Source: https://docs.astral.sh/ruff/rules/non-slot-assignment

This Python code snippet shows the corrected version of the previous example, where all assigned attributes ('name', 'surname') are explicitly defined within the __slots__ of the class. This adheres to the __slots__ definition and prevents runtime AttributeErrors.

```python
class Student:
    __slots__ = ("name", "surname")

    def __init__(self, name, surname):
        self.name = name
        self.surname = surname
        self.setup()

    def setup(self):
        pass

```

--------------------------------

### Set Ruff Import Strategy (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Configures how the `ruff` executable is loaded. 'fromEnvironment' searches the environment, while 'useBundled' uses the version included with the extension. The default is 'fromEnvironment'.

```json
{
    "ruff.importStrategy": "useBundled"
}
```

--------------------------------

### Correct Python Version Check using sys.version_info

Source: https://docs.astral.sh/ruff/rules/sys-version-slice3

This snippet shows the recommended and correct method for checking Python versions using sys.version_info. This attribute provides the version as a tuple (major, minor, micro, releaselevel, serial), allowing for accurate and reliable comparisons without truncation. For example, on Python 3.10, `sys.version_info[:2]` evaluates to (3, 10).

```python
import sys

sys.version_info[:2]  # Evaluates to (3, 10) on Python 3.10.

```

--------------------------------

### Example of printf-style formatting safety concerns in Python

Source: https://docs.astral.sh/ruff/rules/printf-string-formatting

Illustrates a scenario where automatic fixing of printf-style string formatting to f-strings might be unsafe. This occurs when the format string has a single generic specifier and the right-hand side is an ambiguous expression, such as a single-element tuple versus a single value.

```python
val = 1
print("%s" % val)  # "1"
print("{}".format(val))  # "1"

val = (1,)
print("%s" % val)  # "1"
print("{}".format(val))  # "(1,)"
```

--------------------------------

### Detect mixedCase global variables (Python)

Source: https://docs.astral.sh/ruff/rules/mixed-case-variable-in-global-scope

This snippet demonstrates the detection of global variables named using the mixedCase convention, which violates PEP 8. The linter suggests refactoring these variables to use snake_case for better readability and adherence to Python style guides.

```python
myVariable = "hello"
another_variable = "world"
yet_anotherVariable = "foo"

```

--------------------------------

### Use pathlib over os.path.join for Path Manipulation

Source: https://docs.astral.sh/ruff/rules/os-path-join

This rule checks for the usage of `os.path.join` and recommends using the `pathlib` module instead. `pathlib` provides a higher-level, more readable API for path operations, such as `Path.joinpath()` or the `/` operator, compared to the lower-level `os.path` module. While `pathlib` enhances readability and type safety, it might have slight performance implications on older Python versions compared to string-based operations.

```python
import os

os.path.join(os.path.join(ROOT_PATH, "folder"), "file.py")

```

```python
from pathlib import Path

Path(ROOT_PATH) / "folder" / "file.py"

```

--------------------------------

### Inefficient List Reversal (Python)

Source: https://docs.astral.sh/ruff/rules/list-reverse-copy

Demonstrates inefficient ways to reverse a list in Python by creating new lists. This pattern is flagged because it's less memory and computationally efficient than in-place reversal when the original list is not needed afterwards. The provided examples include using `reversed()` and slicing.

```python
l = [1, 2, 3]
l = reversed(l)

l = [1, 2, 3]
l = list(reversed(l))

l = [1, 2, 3]
l = l[::-1]
```

--------------------------------

### Use datetime.datetime.now(tz=...) for timezone-aware objects in Python

Source: https://docs.astral.sh/ruff/rules/call-datetime-utcnow

This snippet shows the recommended way to get a timezone-aware datetime object using `datetime.datetime.now(tz=datetime.timezone.utc)`. This is a suitable replacement for `datetime.datetime.utcnow()` and adheres to best practices for handling timezones in Python.

```python
import datetime

datetime.datetime.now(tz=datetime.timezone.utc)

```

--------------------------------

### Detect Duplicate Literal Members in Python typing.Literal

Source: https://docs.astral.sh/ruff/rules/duplicate-literal-member

This Python code snippet demonstrates how the PYI062 rule detects duplicate members within a `typing.Literal` annotation. The linter identifies redundant entries, and the example shows the problematic code and its corrected version.

```python
from typing import Literal

foo: Literal["a", "b", "a"]

```

```python
from typing import Literal

foo: Literal["a", "b"]

```

--------------------------------

### Check sys.version_info[0] equality comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-info0-eq3

This snippet demonstrates the incorrect way to check for Python 3 using sys.version_info[0] == 3. It highlights that this comparison will fail for future major Python versions. The recommended alternative uses `>=` for future-proof code.

```Python
import sys

if sys.version_info[0] == 3:
    ...
else:
    print("Python 2")  # This will be printed on Python 4.

```

```Python
import sys

if sys.version_info >= (3,):
    ...
else:
    print("Python 2")  # This will not be printed on Python 4.

```

--------------------------------

### per-file-ignores Configuration

Source: https://docs.astral.sh/ruff/settings

A list of mappings from file pattern to rule codes or prefixes to exclude when considering any matching files. An initial '!' negates the file pattern.

```APIDOC
## per-file-ignores Configuration

### Description
A list of mappings from file pattern to rule codes or prefixes to exclude, when considering any matching files. An initial '!' negates the file pattern.

### Default value
`{}`

### Type
`dict[str, list[RuleSelector]]`

### Example usage
```toml
[tool.ruff.lint.per-file-ignores]
# Ignore `E402` (import violations) in all `__init__.py` files, and in `path/to/file.py`.
"__init__.py" = ["E402"]
"path/to/file.py" = ["E402"]
# Ignore `D` rules everywhere except for the `src/` directory.
"!src/**.py" = ["D"]
```

```ini
[lint.per-file-ignores]
# Ignore `E402` (import violations) in all `__init__.py` files, and in `path/to/file.py`.
"__init__.py" = ["E402"]
"path/to/file.py" = ["E402"]
# Ignore `D` rules everywhere except for the `src/` directory.
"!src/**.py" = ["D"]
```
```

--------------------------------

### Correct sys.version_info Comparison (Python)

Source: https://docs.astral.sh/ruff/rules/bad-version-info-comparison

Provides the correct way to compare sys.version_info using only the '<' and '>=' operators. This ensures consistent and predictable behavior across different Python patch versions. Using these operators correctly avoids bugs related to version checking.

```Python
import sys

# Correct usage
if sys.version_info >= (3, 9):
    pass
if sys.version_info < (3, 10):
    pass

```

--------------------------------

### Detect Unused Private Type Aliases (Python)

Source: https://docs.astral.sh/ruff/rules/unused-private-type-alias

This code snippet demonstrates the detection of an unused private type alias in Python. The linter flags `_UnusedTypeAlias` as it is defined but not referenced. The corrected example shows a used type alias `_UsedTypeAlias` within a function signature.

```python
import typing

_UnusedTypeAlias: typing.TypeAlias = int
```

```python
import typing

_UsedTypeAlias: typing.TypeAlias = int

def func(arg: _UsedTypeAlias) -> _UsedTypeAlias: ...
```

--------------------------------

### Log Exception with Traceback using logging.exception (Python)

Source: https://docs.astral.sh/ruff/rules/error-instead-of-exception

Demonstrates the correct way to log an exception with its traceback using `logging.exception`. This is preferred over `logging.error` when an exception occurs, as it automatically includes the traceback information.

```python
import logging

def func():
    try:
        raise NotImplementedError
    except NotImplementedError:
        logging.exception("Exception occurred")

```

--------------------------------

### Avoid Redundant set() Casts in Python

Source: https://docs.astral.sh/ruff/rules/unnecessary-double-cast-or-process

This snippet addresses unnecessary set() operations. It provides examples of simplifying nested set() calls, such as set(set(iterable)) or set(list(iterable)), to a more efficient set(iterable) structure.

```Python
set(set(iterable))
# Use instead:
set(iterable)
```

```Python
set(list(iterable))
# Use instead:
set(iterable)
```

```Python
set(tuple(iterable))
# Use instead:
set(iterable)
```

```Python
set(sorted(iterable))
# Use instead:
set(iterable)
```

```Python
set(reversed(iterable))
# Use instead:
set(iterable)
```

--------------------------------

### Corrected Dunder Function Name Usage (Python)

Source: https://docs.astral.sh/ruff/rules/dunder-function-name

This example shows the corrected way to define a function that would otherwise be flagged by the N807 rule. It demonstrates adhering to PEP 8 by avoiding unnecessary dunder names or by properly documenting them.

```python
def my_function():
    pass

```

--------------------------------

### task-tags Configuration

Source: https://docs.astral.sh/ruff/settings

Defines a list of task tags (e.g., "TODO", "FIXME", "XXX") that are recognized for specific linting rules.

```APIDOC
## task-tags Configuration

### Description
A list of task tags to recognize (e.g., "TODO", "FIXME", "XXX").
Comments starting with these tags will be ignored by commented-out code detection (`ERA`), and skipped by line-length rules (`E501`) if `ignore-overlong-task-comments` is set to `true`.

### Default value
`["TODO", "FIXME", "XXX"]`

### Type
`list[str]`

### Example usage
```toml
[tool.ruff.lint]
task-tags = ["HACK"]
```

```ini
[lint]
task-tags = ["HACK"]
```
```

--------------------------------

### Detect Insecure Cipher Mode Usage in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-insecure-cipher-mode-usage

This snippet demonstrates how to detect the usage of insecure cipher modes like ECB with ARC4 in Python. It flags the insecure usage and provides an example of how to use a more secure mode like CTR instead. This check is derived from the flake8-bandit linter.

```python
from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes

algorithm = algorithms.ARC4(key)
cipher = Cipher(algorithm, mode=modes.ECB(iv))
encryptor = cipher.encryptor()
```

```python
from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes

algorithm = algorithms.ARC4(key)
cipher = Cipher(algorithm, mode=modes.CTR(iv))
encryptor = cipher.encryptor()
```

--------------------------------

### Fix mutable default class attributes using __init__ (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-class-default

This code shows a common and recommended way to fix mutable default class attributes by initializing them within the `__init__` method. This ensures that each instance gets its own distinct mutable object.

```python
class A:
    def __init__(self) -> None:
        self.variable_1: list[int] = []
        self.variable_2: set[int] = set()
        self.variable_3: dict[str, int] = {}

```

--------------------------------

### Configure Project Metadata and Ruff Settings (pyproject.toml)

Source: https://docs.astral.sh/ruff/tutorial

Sets the minimum supported Python version to 3.10+ in the `[project]` section and configures Ruff's line length and lint rules in the `[tool.ruff]` section within `pyproject.toml`.

```toml
[project]
# Support Python 3.10+.
requires-python = ">=3.10"

[tool.ruff]
# Set the maximum line length to 79.
line-length = 79

[tool.ruff.lint]
# Add the `line-too-long` rule to the enforced rule set.
extend-select = ["E501"]


```

--------------------------------

### Fix mutable default class attributes using immutable types (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-class-default

This example shows how to resolve the mutable default issue by using immutable counterparts for collections, such as tuples instead of lists, and `frozenset` instead of sets. `MappingProxyType` is used for dictionaries.

```python
from collections.abc import Sequence, Mapping, Set as AbstractSet
from types import MappingProxyType


class A:
    variable_1: Sequence[int] = ()
    variable_2: AbstractSet[int] = frozenset()
    variable_3: Mapping[str, int] = MappingProxyType({})

```

--------------------------------

### Python Example of Builtin Attribute Shadowing

Source: https://docs.astral.sh/ruff/rules/builtin-attribute-shadowing

This Python code demonstrates the builtin-attribute-shadowing (A003) rule. The `list` method within `Class` shadows the built-in `list` type. This shadowing is problematic when referenced within the class, such as in the return type annotation of the `repeat` method.

```python
class Class:
    @staticmethod
    def list() -> None:
        pass

    @staticmethod
    def repeat(value: int, times: int) -> list[int]:
        return [value] * times

```

--------------------------------

### Correct pytest fixture naming without leading underscore (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-incorrect-fixture-name-underscore

This snippet shows the recommended way to name pytest fixtures that return a value. The absence of a leading underscore aligns with pytest conventions for fixtures that provide a return value. This is the corrected version of the previous example.

```python
import pytest


@pytest.fixture()
def some_object():
    return SomeClass()


@pytest.fixture()
def some_object_with_cleanup():
    obj = SomeClass()
    yield obj
    obj.cleanup()

```

--------------------------------

### Configure Ruff for mypy-init-return setting

Source: https://docs.astral.sh/ruff/rules/missing-return-type-special-method

This configuration snippet shows how to enable the `mypy-init-return` setting in `pyproject.toml` or `ruff.toml` to allow omitting return type annotations for `__init__` methods when another argument is annotated.

```toml
[tool.ruff.lint.flake8-annotations]
mypy-init-return = true

```

--------------------------------

### Configure Copyright Author (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Specifies the author's name to be enforced within copyright notices. If set, this author string must appear immediately after the copyright notice. The default value is `null`.

```toml
[tool.ruff.lint.flake8-copyright]
author = "Ruff"

```

```toml
[lint.flake8-copyright]
author = "Ruff"

```

--------------------------------

### Naive datetime instantiation (Python)

Source: https://docs.astral.sh/ruff/rules/call-datetime-without-tzinfo

Demonstrates the incorrect way to instantiate a datetime object without timezone information. This results in a 'naive' datetime object, which can lead to bugs due to its ambiguity about the specific moment in time it represents.

```python
import datetime

datetime.datetime(2000, 1, 1, 0, 0, 0)
```

--------------------------------

### Configure Lines Between Import Types (TOML)

Source: https://docs.astral.sh/ruff/settings

Determines the number of blank lines between 'direct' and 'import from' style imports. Ruff's formatter supports limited values for this setting to maintain structure.

```toml
[tool.ruff.lint.isort]
# Use a single line between direct and from import.
lines-between-types = 1
```

```toml
[lint.isort]
# Use a single line between direct and from import.
lines-between-types = 1
```

--------------------------------

### Detect Useless Expression (Python)

Source: https://docs.astral.sh/ruff/rules/useless-expression

This snippet demonstrates the Ruff B018 rule, which flags expressions that have no effect. It shows an example of a useless expression and the recommended way to fix it by assigning the expression to a variable. This rule helps in cleaning up code and preventing accidental inclusions of non-functional code.

```python
1 + 1

```

```python
foo = 1 + 1

```

--------------------------------

### Use .hexdigest() with hashlib in Python

Source: https://docs.astral.sh/ruff/rules/hashlib-digest-hex

This snippet shows the recommended and more efficient way to generate a hexadecimal digest from a hashlib hash in Python using the .hexdigest() method. It contrasts with the .digest().hex() pattern, highlighting improved conciseness and readability. The example uses the sha512 algorithm with a byte string.

```python
from hashlib import sha512

hashed = sha512(b"some data").hexdigest()

```

--------------------------------

### Configure File Inclusion Patterns in Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies glob patterns for files to be included during linting. By default, Ruff includes Python files, pyi, pyw, notebooks, and pyproject.toml. This option allows customization of included file types. Default is `["*.py", "*.pyi", "*.pyw", "*.ipynb", "**/pyproject.toml"]`.

```toml
[tool.ruff]
include = ["*.py"]

```

```toml
include = ["*.py"]

```

--------------------------------

### Run Ruff Formatter

Source: https://docs.astral.sh/ruff/tutorial

Executes the Ruff formatter to automatically reformat Python code according to predefined style guidelines, such as line length limits. This command ensures code consistency.

```bash
$ uv run ruff format

```

--------------------------------

### Fix Mutable Default with default_factory in Dataclass (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-dataclass-default

This Python code shows the recommended way to handle mutable default values in dataclasses using `field(default_factory=...)`. This ensures each instance gets a new mutable object, preventing shared state bugs.

```python
from dataclasses import dataclass, field


@dataclass
class A:
    mutable_default: list[int] = field(default_factory=list)
```

--------------------------------

### Python: Detect non-ASCII characters in import statements

Source: https://docs.astral.sh/ruff/rules/non-ascii-import-name

This snippet demonstrates how the 'non-ascii-import-name' linter rule detects non-ASCII characters in Python import statements. It highlights the issue and provides corrected examples using ASCII-only names or aliases to ensure compatibility and readability.

```python
import br

# Use instead:
import bar

# If the module is third-party, use an ASCII-only alias:
import br as bar
```

--------------------------------

### Profile Ruff Benchmark on macOS with Instruments

Source: https://docs.astral.sh/ruff/contributing

Profiles Ruff's benchmarks on macOS using `cargo-instruments`. It targets the 'linter' benchmark with the 'profiling' profile. Dependencies: `cargo-instruments`, Rust toolchain, Ruff project.

```shell
cargo instruments -t time --bench linter --profile profiling -p ruff_benchmark -- --profile-time=1
```

--------------------------------

### Avoid subclassing built-in dict, list, str (Python)

Source: https://docs.astral.sh/ruff/rules/subclass-builtin

Demonstrates the issue with subclassing built-in types like dict, where dunder methods might be bypassed, leading to unexpected behavior. This example shows how a custom dict subclass fails to apply uppercase to keys because the built-in dict's initialization bypasses `__setitem__`.

```python
class UppercaseDict(dict):
    def __setitem__(self, key, value):
        super().__setitem__(key.upper(), value)


d = UppercaseDict({"a": 1, "b": 2})  # Bypasses __setitem__
print(d)  # {'a': 1, 'b': 2}

```

--------------------------------

### Python: Annotate `self` in Instance Methods (Removed Rule)

Source: https://docs.astral.sh/ruff/rules/missing-type-self

This example demonstrates the code structure that would have triggered the ANN101 rule, which required type annotations for the `self` argument in Python instance methods. The rule is now removed because type checkers infer this type.

```python
class Foo:
    def bar(self): ...

```

```python
class Foo:
    def bar(self: "Foo"): ...

```

--------------------------------

### Combine 'as' Imports on the Same Line (TOML)

Source: https://docs.astral.sh/ruff/settings

The `combine-as-imports` option for the `isort` plugin allows combining `as` imports onto the same line. This setting follows the behavior of isort's `combine-as-imports` option, aiming to reduce line count for imports.

```toml
[tool.ruff.lint.isort]
combine-as-imports = true

```

```toml
[lint.isort]
combine-as-imports = true

```

--------------------------------

### Configure Lines After Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Sets the number of blank lines to appear after import blocks. A value of -1 indicates automatic determination. Ruff's formatter has specific compatibility constraints for this setting.

```toml
[tool.ruff.lint.isort]
# Use a single line after each import block.
lines-after-imports = 1
```

```toml
[lint.isort]
# Use a single line after each import block.
lines-after-imports = 1
```

--------------------------------

### Python Shebang Check (EXE003) - Incorrect Example

Source: https://docs.astral.sh/ruff/rules/shebang-missing-python

This code snippet demonstrates an incorrect shebang directive for a Python script, which does not specify a Python interpreter. Ruff's EXE003 rule flags this as an issue because the script might be executed with an unintended default interpreter.

```python
#!/usr/bin/env bash
```

--------------------------------

### Detect Duplicate Base Classes in Python

Source: https://docs.astral.sh/ruff/rules/duplicate-bases

This code snippet demonstrates a Python class definition with duplicate base classes, which is flagged by the Ruff linter. The example illustrates the problematic code and the corrected version with unique base classes to avoid runtime TypeErrors.

```python
class Foo:
    pass


class Bar(Foo, Foo):
    pass

```

```python
class Foo:
    pass


class Bar(Foo):
    pass

```

--------------------------------

### Prioritize 'from' Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Determines whether 'import from' statements should be placed before straight imports during sorting. Default value is false.

```toml
[tool.ruff.lint.isort]
from-first = true

```

```toml
[lint.isort]
from-first = true

```

--------------------------------

### Remove superfluous else return - Python

Source: https://docs.astral.sh/ruff/rules/superfluous-else-return

This rule checks for 'else' statements that are unnecessary because the preceding 'if' block contains a 'return' statement. Removing the 'else' reduces nesting and improves code readability. This example demonstrates the 'before' and 'after' of applying this rule in Python.

```python
def foo(bar, baz):
    if bar:
        return 1
    else:
        return baz

```

```python
def foo(bar, baz):
    if bar:
        return 1
    return baz

```

--------------------------------

### Python: Detect Lowercase Import Aliased to Non-Lowercase

Source: https://docs.astral.sh/ruff/rules/lowercase-imported-as-non-lowercase

This snippet demonstrates the incorrect usage flagged by the Ruff N812 linter. It shows a Python import where 'myclassname' is imported from 'example' and aliased as 'MyClassName', violating PEP 8 naming conventions. The recommended fix is to use the lowercase alias directly.

```python
from example import myclassname as MyClassName
```

```python
# Use instead:
from example import myclassname
```

--------------------------------

### Replace os.makedirs with pathlib.Path.mkdir

Source: https://docs.astral.sh/ruff/rules/os-makedirs

This snippet demonstrates the recommended way to create nested directories using Python's `pathlib` module. It replaces the older `os.makedirs` function with the more modern and object-oriented `Path.mkdir(parents=True)` method, improving code readability and maintainability.

```python
import os

os.makedirs("./nested/directory/")
```

```python
from pathlib import Path

Path("./nested/directory/").mkdir(parents=True)
```

--------------------------------

### Python Shebang Check (EXE003) - Correct Example

Source: https://docs.astral.sh/ruff/rules/shebang-missing-python

This code snippet shows a correctly formatted shebang directive for a Python script, explicitly including 'python3'. Ruff's EXE003 rule would not flag this as an issue, ensuring the script is executed with the intended Python interpreter.

```python
#!/usr/bin/env python3
```

--------------------------------

### Define variables for type ordering (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Overrides the list of tokens to always recognize as variables for the 'order-by-type' rule, regardless of their casing.

```toml
[tool.ruff.lint.isort]
variables = ["VAR"]

```

```toml
[lint.isort]
variables = ["VAR"]

```

--------------------------------

### Redeclared Variable Assignment (Python)

Source: https://docs.astral.sh/ruff/rules/redeclared-assigned-name

Identifies when a variable is assigned multiple times within the same assignment statement. This is considered redundant as only the last assignment takes effect. The example demonstrates the issue and a corrected version assuming the last assignment is the intended one.

```python
a, b, a = (1, 2, 3)
print(a)  # 3
```

```python
# this is assuming you want to assign 3 to `a`
_, b, a = (1, 2, 3)
print(a)  # 3
```

--------------------------------

### Correct sys.version_info Comparison (Python)

Source: https://docs.astral.sh/ruff/rules/unrecognized-version-info-check

This snippet shows the correct way to compare sys.version_info in Python stub files by comparing against an integer. This avoids the pitfalls of string comparison and adheres to best practices for version checking.

```python
import sys

if sys.version_info[0] == 2: ...

```

--------------------------------

### Benchmark Pyupgrade with Hyperfine

Source: https://docs.astral.sh/ruff/contributing

Benchmarks the `pyupgrade` tool using `hyperfine` for performance measurement. This command is run from `crates/ruff_linter/resources/test/cpython`. Dependencies: `hyperfine`, `git`, `find`, `xargs`, `pyupgrade`.

```shell
hyperfine --ignore-failure --warmup 5 --prepare "git reset --hard HEAD" \
  "find . -type f -name \"*.py\" | xargs -P 0 pyupgrade --py311-plus"
```

--------------------------------

### Configure Pydocstyle to Ignore Variable Parameters in Ruff

Source: https://docs.astral.sh/ruff/settings

When set to `true`, this option tells the pydocstyle plugin to ignore missing documentation for `*args` and `**kwargs` parameters. This simplifies docstring requirements for functions with variable positional or keyword arguments.

```toml
[tool.ruff.lint.pydocstyle]
ignore-var-parameters = true

```

```toml
[lint.pydocstyle]
ignore-var-parameters = true

```

--------------------------------

### Check for Duplicate Union Members (Python)

Source: https://docs.astral.sh/ruff/rules/duplicate-union-member

This snippet demonstrates the PYI016 rule which flags redundant duplicate members in Python union types. The example shows an incorrect union with a duplicate string type and its corrected, simplified version. The rule aims to enforce cleaner and more efficient type hinting.

```python
foo: str | str

```

```python
foo: str

```

--------------------------------

### Airflow DAG Missing Schedule Argument Example

Source: https://docs.astral.sh/ruff/rules/airflow-dag-no-schedule-argument

Demonstrates an Airflow DAG defined without an explicit 'schedule' parameter, relying on the implicit default. This is flagged by the AIR002 linter rule. The default schedule can lead to unexpected behavior in Airflow 2 and break scheduling in Airflow 3.

```python
from airflow import DAG


# Using the implicit default schedule.
dag = DAG(dag_id="my_dag")
```

```python
from datetime import timedelta

from airflow import DAG


dag = DAG(dag_id="my_dag", schedule=timedelta(days=1))
```

--------------------------------

### Printf-style formatting with positional placeholders (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-expected-mapping

This snippet illustrates an alternative correct approach using Python's printf-style string formatting with positional placeholders. This method correctly accepts a tuple of values, unlike the named placeholder variant shown previously.

```python
"%s, %s" % ("Hello", "World")

```

--------------------------------

### Type Annotation None Not at End of Union (Python)

Source: https://docs.astral.sh/ruff/rules/none-not-at-end-of-union

This rule checks for type annotations where 'None' is not placed at the end of a union. It is a preview rule, requiring the --preview flag. The example demonstrates the incorrect and preferred syntax for type annotations involving None.

```Python
def func(arg: None | int): ...
```

```Python
def func(arg: int | None): ...
```

--------------------------------

### Correct sys.platform check in Python

Source: https://docs.astral.sh/ruff/rules/unrecognized-platform-check

This code snippet shows the recommended way to check sys.platform using simple string comparisons like '==' or '!=', which are easily understood by type checkers. This rule applies to .pyi stub files.

```python
import sys

if sys.platform == "linux":
    # Linux specific definitions
    ...
else:
    # Posix specific definitions
    ...
```

--------------------------------

### Example of Deprecated NumPy Type Alias Usage

Source: https://docs.astral.sh/ruff/rules/numpy-deprecated-type-alias

This snippet demonstrates the usage of a deprecated NumPy type alias (`np.int`). The rule suggests using the built-in Python types (`int`) instead. This rule is relevant for codebases interacting with NumPy versions prior to 1.24.

```python
import numpy as np

np.int
```

--------------------------------

### Incorrect __eq__ annotation with typing.Any

Source: https://docs.astral.sh/ruff/rules/any-eq-ne-annotation

Demonstrates the incorrect usage of `typing.Any` for the second parameter in the `__eq__` method. This pattern is flagged by the PYI032 linter rule, as `object` is the recommended type annotation for such cases.

```python
from typing import Any

class Foo:
    def __eq__(self, obj: Any) -> bool: ...

```

--------------------------------

### Use Timezone-Aware Datetime for Date in Python

Source: https://docs.astral.sh/ruff/rules/call-date-today

Provides recommended alternatives for getting the current date using timezone-aware datetime objects. These methods ensure that date information is unambiguous and consistent across different timezones, preventing potential errors associated with naive datetime objects.

```python
import datetime

datetime.datetime.now(tz=datetime.timezone.utc).date()
```

```python
import datetime

# For Python 3.11 and later
datetime.datetime.now(tz=datetime.UTC).date()
```

--------------------------------

### Ruff vs. Black: Comment Association in Expressions

Source: https://docs.astral.sh/ruff/formatter/black

Ruff associates comments with the entire boolean expression, preserving original line breaks, while Black associates comments with specific variables, potentially splitting the expression over multiple lines. This behavior is demonstrated with an example expression containing an inline comment.

```python
(
    # A comment in the middle
    some_example_var and some_example_var not in some_example_var
)

```

```python
(
    # A comment in the middle
    some_example_var
    and some_example_var not in some_example_var
)

```

```python
(
    # A comment in the middle
    some_example_var and some_example_var not in some_example_var
)

```

--------------------------------

### Enable Preview Formatting Style in Ruff

Source: https://docs.astral.sh/ruff/settings

A boolean flag to enable unstable preview style formatting features in Ruff. Defaults to false.

```toml
[tool.ruff.format]
# Enable preview style formatting.
preview = true

```

```toml
[format]
# Enable preview style formatting.
preview = true

```

--------------------------------

### Use Timezone-Aware `datetime.datetime.fromtimestamp()` (Python)

Source: https://docs.astral.sh/ruff/rules/call-date-fromtimestamp

This snippet shows the recommended way to get a timezone-aware date object by using `datetime.datetime.fromtimestamp()` with a specified timezone, and then extracting the date component. This adheres to best practices for handling dates and times, particularly for Python versions prior to 3.11.

```python
import datetime

datetime.datetime.fromtimestamp(946684800, tz=datetime.timezone.utc).date()

```

--------------------------------

### Detect Undefined Names in Python (F821)

Source: https://docs.astral.sh/ruff/rules/undefined-name

This snippet demonstrates how Ruff's F821 rule identifies instances where a name is used without being previously defined. Such usage will typically result in a NameError at runtime. The corrected example shows how to define the variable before use or pass it as an argument.

```python
def double():
    return n * 2  # raises `NameError` if `n` is undefined when `double` is called

```

```python
def double(n):
    return n * 2

```

--------------------------------

### Compare Benchmarks with critcmp

Source: https://docs.astral.sh/ruff/contributing

Steps to compare benchmarks for Pull Request reviews using Criterion.rs and `critcmp`. This involves saving two separate baselines ('main' and 'pr') and then comparing them. Dependencies: Rust toolchain, Ruff project, `critcmp`.

```shell
# On main
cargo bench -p ruff_benchmark -- --save-baseline=main

# After applying your changes
cargo bench -p ruff_benchmark -- --save-baseline=pr

critcmp main pr
```

--------------------------------

### Fixing Invalid TODO Tags (Python)

Source: https://docs.astral.sh/ruff/rules/invalid-todo-tag

This snippet demonstrates how to correct invalid TODO tags in Python code, adhering to the Ruff TD001 rule. It shows an incorrect example using '# FIXME(ruff)' and the corrected version using '# TODO(ruff)'. Ensure comments intended as TODOs use the 'TODO' prefix for clarity and consistency.

```python
# FIXME(ruff): this should get fixed!

```

```python
# TODO(ruff): this is now fixed!

```

--------------------------------

### Configure Indentation Style for Ruff Formatting

Source: https://docs.astral.sh/ruff/settings

Determines whether to use spaces or tabs for code indentation. 'space' is the default and recommended by PEP 8. 'tab' uses tab characters.

```toml
[tool.ruff.format]
# Use tabs instead of 4 space indentation.
indent-style = "tab"

```

```toml
[format]
# Use tabs instead of 4 space indentation.
indent-style = "tab"

```

--------------------------------

### Python: Use newer sys.version_info before older versions

Source: https://docs.astral.sh/ruff/rules/bad-version-info-order

This code snippet shows the recommended way to structure `sys.version_info` comparisons in Python. By placing the condition for newer Python versions first (e.g., `>= (3, 10)`), the code adheres to the convention, making it easier to understand the intended behavior for the latest Python versions. This is especially important in stub files.

```python
import sys

if sys.version_info >= (3, 10):
    def read_data(x): ...

else:
    def read_data(x, *, preserve_order=True): ...

```

--------------------------------

### Selecting Preview Rules in Ruff

Source: https://docs.astral.sh/ruff/preview

This shows how to explicitly select a preview rule like 'HYP001' when preview mode is enabled. Preview rules are not enabled by default through categories or 'ALL' selectors. This requires enabling preview mode and then selecting the specific rule.

```toml
[tool.ruff.lint]
extend-select = ["HYP001"]

```

```toml
[lint]
extend-select = ["HYP001"]

```

```shell
ruff check --extend-select HYP001

```

--------------------------------

### Python: Detect Unused 'noqa' Directives (RUF100)

Source: https://docs.astral.sh/ruff/rules/unused-noqa

This Python code snippet demonstrates how Ruff's RUF100 rule identifies an unused 'noqa' directive. The example shows an import statement with a '# noqa: F401' comment. This directive is flagged because the 'F401' violation (unused import) is no longer present in the subsequent code. The corrected version removes the 'noqa' directive, as it's no longer needed.

```python
import foo  # noqa: F401


def bar():
    foo.bar()

```

```python
import foo


def bar():
    foo.bar()

```

--------------------------------

### Run Ruff Microbenchmarks

Source: https://docs.astral.sh/ruff/contributing

Executes the microbenchmarks for the Ruff linter and formatter using Cargo. This command assumes you are in the Ruff project root directory. Dependencies: Rust toolchain, Ruff project.

```shell
cargo benchmark
```

--------------------------------

### Detect Trailing Comma on Bare Tuple (Python)

Source: https://docs.astral.sh/ruff/rules/trailing-comma-on-bare-tuple

This rule checks for trailing commas on bare tuples in Python. A trailing comma on a bare tuple can cause Python to interpret the value as a tuple, leading to unexpected behavior. The examples show the incorrect usage and the corrected versions.

```python
import json


foo = json.dumps({"bar": 1}),

```

```python
import json


foo = json.dumps({"bar": 1})

```

```python
import json


foo = (json.dumps({"bar": 1}),)

```

--------------------------------

### Handle Useless Expression Side Effects (Python)

Source: https://docs.astral.sh/ruff/rules/useless-expression

This snippet illustrates how Ruff's B018 rule handles expressions that might seem useless but are used for side effects. It shows an example where an attribute access is used within a context manager. The recommended fix is to assign the attribute access to an anonymous variable (`_`) to explicitly indicate that the return value is intentionally ignored, thus satisfying the linter while preserving the intended side effect.

```python
with errors.ExceptionRaisedContext():
    obj.attribute

```

```python
with errors.ExceptionRaisedContext():
    _ = obj.attribute

```

--------------------------------

### Check Tab Indentation in Python Docstrings (D206)

Source: https://docs.astral.sh/ruff/rules/docstring-tab-indentation

This Python code snippet demonstrates a function with a docstring that incorrectly uses tab indentation. Ruff's D206 rule flags this as a violation of PEP 8, which recommends spaces for indentation. The example shows the problematic code and the recommended correction.

```python
def sort_list(l: list[int]) -> list[int]:
    """Return a sorted copy of the list.

    Sort the list in ascending order and return a copy of the result using the bubble
    sort algorithm.
    """


```

```python
def sort_list(l: list[int]) -> list[int]:
    """Return a sorted copy of the list.

    Sort the list in ascending order and return a copy of the result using the bubble
    sort algorithm.
    """


```

--------------------------------

### Fix D205: Add blank line after docstring summary (Python)

Source: https://docs.astral.sh/ruff/rules/missing-blank-line-after-summary

This snippet demonstrates the incorrect and correct formatting for multi-line docstrings according to PEP 257. The D205 error is triggered when a blank line is missing after the summary line, as shown in the 'Example' section. The 'Use instead' section provides the corrected version.

```python
def sort_list(l: list[int]) -> list[int]:
    """Return a sorted copy of the list.
    Sort the list in ascending order and return a copy of the
    result using the bubble sort algorithm.
    "


```

```python
def sort_list(l: list[int]) -> list[int]:
    """Return a sorted copy of the list.

    Sort the list in ascending order and return a copy of the
    result using the bubble sort algorithm.
    ""


```

--------------------------------

### Correct sys.version_info comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-cmp-str10

This Python code snippet shows the recommended approach for comparing the system version using sys.version_info. This method compares version tuples, ensuring correct behavior even when Python versions increment beyond 10.

```python
import sys

sys.version_info >= (3,)  # `True` on Python 10.

```

--------------------------------

### Unsafe Fix Example with Comments (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-dict-comprehension-for-iterable

Illustrates a scenario where applying an automatic fix for the unnecessary dict comprehension rule (C420) is marked as unsafe. This occurs when comments are present within the dictionary comprehension, as their preservation during the automatic fix cannot be guaranteed, potentially leading to code changes beyond the intended refactoring.

```Python
# Example of an unsafe fix due to comments within the dict comprehension
{
    # comment 1
    a:  # comment 2
    None  # comment 3
    for a in iterable  # comment 4
}
```

--------------------------------

### Force Imports to Top of Section (TOML)

Source: https://docs.astral.sh/ruff/settings

Forces specific modules to appear at the top of their respective import sections. Default value is an empty list.

```toml
[tool.ruff.lint.isort]
force-to-top = ["src"]

```

```toml
[lint.isort]
force-to-top = ["src"]

```

--------------------------------

### Remove Surrounding Whitespace from Docstrings (Python)

Source: https://docs.astral.sh/ruff/rules/surrounding-whitespace

This rule checks for and removes unnecessary whitespace surrounding Python docstrings. It helps maintain consistent formatting according to PEP 257 and other style guides. The fix involves removing leading/trailing blank lines or spaces within the docstring itself.

```python
def factorial(n: int) -> int:
    """ Return the factorial of n. """


```

```python
def factorial(n: int) -> int:
    """Return the factorial of n."""

```

--------------------------------

### Define Extra Standard Libraries (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules to be considered part of the standard library, in addition to Ruff's built-in list. Supports glob patterns. Default value is an empty list.

```toml
[tool.ruff.lint.isort]
extra-standard-library = ["path"]

```

```toml
[lint.isort]
extra-standard-library = ["path"]

```

--------------------------------

### Update Airflow Imports from Core to Providers (Python)

Source: https://docs.astral.sh/ruff/rules/airflow3-moved-to-provider

This code snippet demonstrates how to refactor Airflow imports when functions and values have been moved from the core Airflow package to specific provider packages, as required by Airflow 3.0. Users need to install the relevant provider package and update their import statements.

```python
from airflow.auth.managers.fab.fab_auth_manager import FabAuthManager

fab_auth_manager_app = FabAuthManager().get_fastapi_app()

```

```python
from airflow.providers.fab.auth_manager.fab_auth_manager import FabAuthManager

fab_auth_manager_app = FabAuthManager().get_fastapi_app()

```

--------------------------------

### Incorrect Python Version Check using sys.version[:3]

Source: https://docs.astral.sh/ruff/rules/sys-version-slice3

This snippet demonstrates the incorrect way to check Python versions using string slicing on sys.version. It truncates the version number, leading to potential bugs, especially with multi-digit minor versions. For example, on Python 3.10, `sys.version[:3]` evaluates to '3.1'.

```python
import sys

sys.version[:3]  # Evaluates to "3.1" on Python 3.10.

```

--------------------------------

### Configure Ruff with File Path (Zed)

Source: https://docs.astral.sh/ruff/editors/settings

This JSON configuration is for the Zed editor, setting up the Ruff Language Server with a specified configuration file path. It ensures that Ruff uses the external configuration for its operations.

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "configuration": "~/path/to/ruff.toml"
        }
      }
    }
  }
}
```

--------------------------------

### Avoid printf-style logging format (Python)

Source: https://docs.astral.sh/ruff/rules/logging-percent-format

This snippet demonstrates the incorrect use of printf-style string formatting with the logging module. It shows how formatting is eagerly performed even if the log message is not displayed. The rule flags this as inefficient and potentially error-prone.

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened" % user)

```

--------------------------------

### Fix Multiple Leading Hashes in Block Comments (Python)

Source: https://docs.astral.sh/ruff/rules/multiple-leading-hashes-for-block-comment

This snippet demonstrates the incorrect and corrected format for block comments according to the Ruff E266 rule. It checks for and flags block comments that begin with more than one '#'. The fix involves ensuring each line of a block comment starts with a single '# '.

```python
### Block comment

```

```python
# Block comment

```

```python
##############
# Block header
##############

```

--------------------------------

### Consolidate Consecutive Nonlocal Statements (Python)

Source: https://docs.astral.sh/ruff/rules/repeated-global

This snippet illustrates the refactoring of multiple `nonlocal` statements into a single declaration. Similar to the `global` statement, the `nonlocal` keyword can accept multiple variable names separated by commas. This example shows the improvement in code style by consolidating separate `nonlocal` declarations. This is relevant for Python linting.

```python
def outer():
    x = 10
    def inner():
        nonlocal x
        nonlocal y
        print(x, y)
    inner()
```

```python
def outer():
    x = 10
    def inner():
        nonlocal x, y
        print(x, y)
    inner()
```

--------------------------------

### Compare sys.version_info to tuple literal (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-cmp-str3

This snippet shows the recommended approach for comparing Python versions using `sys.version_info`. Comparing the version tuple directly prevents issues with lexicographical sorting and ensures correct evaluation across different Python versions.

```python
import sys

sys.version_info > (3, 9)  # `True` on Python 3.10.

```

--------------------------------

### Replace open/write with Path.write_text (Python)

Source: https://docs.astral.sh/ruff/rules/write-whole-file

This snippet demonstrates how to replace the common pattern of opening a file in write mode and using the write() method with the more concise Path.write_text() method from the pathlib module. This is suitable for writing string content to a file.

```Python
with open(filename, "w") as f:
    f.write(contents)
```

```Python
from pathlib import Path

Path(filename).write_text(contents)
```

--------------------------------

### Force Wrapping of Aliased Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Ensures that 'import from' statements with multiple members and at least one alias wrap, with each member on its own line. Requires 'combine-as-imports = true'. Default value is false.

```toml
[tool.ruff.lint.isort]
force-wrap-aliases = true
combine-as-imports = true

```

```toml
[lint.isort]
force-wrap-aliases = true
combine-as-imports = true

```

--------------------------------

### Avoid Jump Statements in Finally Blocks (Python)

Source: https://docs.astral.sh/ruff/rules/jump-statement-in-finally

This rule detects break, continue, and return statements within finally blocks. Such statements can hide exceptions raised in try or except blocks, as finally blocks always execute. The example demonstrates how a return statement in a finally block silences a ValueError.

```python
def speed(distance, time):
    try:
        return distance / time
    except ZeroDivisionError:
        raise ValueError("Time cannot be zero")
    finally:
        return 299792458  # `ValueError` is silenced

```

```python
def speed(distance, time):
    try:
        return distance / time
    except ZeroDivisionError:
        raise ValueError("Time cannot be zero")


```

--------------------------------

### Context Manager Formatting: Black vs. Ruff (Multiple)

Source: https://docs.astral.sh/ruff/formatter/black

Compares how Black and Ruff format a 'with' statement with multiple context managers. Ruff aims to fit the last context manager on a single line if possible, while Black may break them differently.

```python
# Black
with tempfile.TemporaryDirectory() as d1:
    symlink_path = Path(d1).joinpath("testsymlink")
    with tempfile.TemporaryDirectory(dir=d1) as d2, tempfile.TemporaryDirectory(
        dir=d1
    ) as d4, tempfile.TemporaryDirectory(dir=d2) as d3, tempfile.NamedTemporaryFile(
        dir=d4
    ) as source_file, tempfile.NamedTemporaryFile(
        dir=d3
    ) as lock_file:
        pass
```

```python
# Ruff
with tempfile.TemporaryDirectory() as d1:
    symlink_path = Path(d1).joinpath("testsymlink")
    with tempfile.TemporaryDirectory(dir=d1) as d2, tempfile.TemporaryDirectory(
        dir=d1
    ) as d4, tempfile.TemporaryDirectory(dir=d2) as d3, tempfile.NamedTemporaryFile(dir=d3) as lock_file:
        pass
```

--------------------------------

### Django Model: Unordered Body Content Check (DJ012)

Source: https://docs.astral.sh/ruff/rules/django-unordered-body-content-in-model

This snippet demonstrates the incorrect ordering of elements within a Django Model, specifically placing the `__str__` method before database fields. The linter identifies this as a violation of the Django Style Guide, which dictates a specific order for fields, Meta classes, and methods. The correct version shows the fields placed before other elements.

```python
from django.db import models


class StrBeforeFieldModel(models.Model):
    class Meta:
        verbose_name = "test"
        verbose_name_plural = "tests"

    def __str__(self):
        return "foobar"

    first_name = models.CharField(max_length=32)
    last_name = models.CharField(max_length=40)


```

```python
from django.db import models


class StrBeforeFieldModel(models.Model):
    first_name = models.CharField(max_length=32)
    last_name = models.CharField(max_length=40)

    class Meta:
        verbose_name = "test"
        verbose_name_plural = "tests"

    def __str__(self):
        return "foobar"


```

--------------------------------

### Correct Dictionary Comprehension (Python)

Source: https://docs.astral.sh/ruff/rules/ruff-static-key-dict-comprehension

Shows the correct way to create a dictionary comprehension where the key is derived from the iterated values. This avoids the issue of creating a single-key dictionary unintentionally, as highlighted by the RUF011 rule's intent.

```python
data = ["some", "Data"]
{value: value.upper() for value in data}

```

--------------------------------

### Use sys.version_info tuple comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-info-minor-cmp-int

This snippet shows the recommended and future-proof way to compare Python version information using a tuple. This approach prevents potential bugs when Python major versions are incremented.

```Python
import sys

if sys.version_info < (3, 7):
    print("Python 3.6 or earlier.")

```

--------------------------------

### Use `extra` for Logging Formatting (Python)

Source: https://docs.astral.sh/ruff/rules/logging-string-concat

This snippet shows the recommended way to format logging messages using the `extra` keyword argument. This defers string formatting until the log message is actually processed, improving efficiency and consistency. It allows for structured logging data that handlers can utilize effectively. This is an alternative to direct string concatenation.

```python
import logging

logging.basicConfig(format="%(user_id)s - %(message)s", level=logging.INFO)

user = "Maria"

logging.info("Something happened", extra=dict(user_id=user))

```

--------------------------------

### Avoid Assignment in assert Statements (Python)

Source: https://docs.astral.sh/ruff/rules/assignment-in-assert

This example demonstrates the incorrect use of a named assignment expression within an assert statement and the recommended alternative. The issue arises because assert statements are disabled with the -O flag, causing the assignment and subsequent use of the variable to be ignored. The correct approach separates the assignment from the assert statement.

```Python
assert (x := 0) == 0
print(x)


```

```Python
x = 0
assert x == 0
print(x)

```

--------------------------------

### Python: Prevent Blank Lines Before Function Docstrings (D201)

Source: https://docs.astral.sh/ruff/rules/blank-line-before-function

This Python code snippet demonstrates the incorrect and correct formatting for function docstrings according to the D201 rule. The linter flags functions where a blank line separates the definition from the docstring. The fix involves removing this blank line to adhere to PEP 257 and other style guides.

```python
def average(values: list[float]) -> float:

    """Return the mean of the given values."""

```

```python
def average(values: list[float]) -> float:
    """Return the mean of the given values."""

```

--------------------------------

### Use explicit strict parameter with zip (Python)

Source: https://docs.astral.sh/ruff/rules/zip-without-explicit-strict

This rule checks for `zip` calls where the `strict` parameter is not explicitly set. When `zip` is called with iterables of different lengths, it truncates to the shortest length by default. Explicitly setting `strict=True` raises a `ValueError` for unequal lengths, while `strict=False` makes the intention to allow unequal lengths clear. This linting rule is derived from `flake8-bugbear` and is available starting from Ruff v0.0.167.

```python
zip(a, b)

```

```python
zip(a, b, strict=True)

```

--------------------------------

### Ruff General Options

Source: https://docs.astral.sh/ruff/configuration

Miscellaneous and global options for Ruff, including cache control, exit status, and configuration overrides.

```APIDOC
## Ruff General Options

### Description
Miscellaneous and global options that affect Ruff's overall behavior, including caching, exit codes, and configuration.

### Method
N/A (CLI Options)

### Endpoint
N/A (CLI Options)

### Parameters
#### Command-line Flags
- **-n, --no-cache** (boolean) - Disable cache reads. [env: RUFF_NO_CACHE=]
- **--cache-dir** `<CACHE_DIR>` (string) - Path to the cache directory. [env: RUFF_CACHE_DIR=]
- **--stdin-filename** `<STDIN_FILENAME>` (string) - The name of the file when passing it through stdin.
- **-e, --exit-zero** (boolean) - Exit with status code "0", even upon detecting lint violations.
- **--exit-non-zero-on-fix** (boolean) - Exit with a non-zero status code if any files were modified via fix, even if no lint violations remain.
- **--config** `<CONFIG_OPTION>` (string) - Either a path to a TOML configuration file (`pyproject.toml` or `ruff.toml`), or a TOML `<KEY> = <VALUE>` pair overriding a specific configuration option. Overrides always take precedence.
- **--isolated** (boolean) - Ignore all configuration files.

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Incorrect __post_init__ with Default Parameters

Source: https://docs.astral.sh/ruff/rules/post-init-default

Demonstrates the incorrect usage of default parameters within a dataclass's __post_init__ method. This code snippet highlights a common pitfall in Python dataclasses where default values in __post_init__ are ineffective for the generated __init__ method.

```python
from dataclasses import InitVar, dataclass


@dataclass
class Foo:
    bar: InitVar[int] = 0

    def __post_init__(self, bar: int = 1, baz: int = 2) -> None:
        print(bar, baz)


foo = Foo()  # Prints '0 2'.

```

--------------------------------

### Fix Over-Indented Docstring Section Underlines (Python)

Source: https://docs.astral.sh/ruff/rules/overindented-section-underline

This code snippet demonstrates the incorrect and correct formatting for NumPy-style docstrings with section underlines. The rule targets issues with indentation consistency in section headers and their corresponding underlines, which is crucial for tools like Sphinx. The fix involves aligning the underline characters with the start of the section header.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Parameters
        ----------
    distance : float
        Distance traveled.
    time : float
        Time spent traveling.

    Returns
          ------
    float
        Speed as distance divided by time.

    Raises
      ------
    FasterThanLightError
        If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Parameters
    ----------
    distance : float
        Distance traveled.
    time : float
        Time spent traveling.

    Returns
    -------
    float
        Speed as distance divided by time.

    Raises
    ------
    FasterThanLightError
        If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Ruff Formatting Settings

Source: https://docs.astral.sh/ruff/editors/settings

Configure Ruff's formatting behavior, including preview mode.

```APIDOC
## `format.preview`

### Description
Whether to enable Ruff's preview mode when formatting.

### Type
bool

### Default Value
null

### Example Usage
```json
{
    "ruff.format.preview": true
}
```
```

--------------------------------

### Manipulate path strings using pathlib (Python)

Source: https://docs.astral.sh/ruff/rules/os-sep-split

Shows the recommended way to handle path manipulation using Python's `pathlib` module. It illustrates accessing the filename with `.name`, the parent directory name with `.parent.name`, and iterating over all path components using `.parts`.

```Python
from pathlib import Path

Path("path/to/file_name.txt").name

Path("path/to/file_name.txt").parent.name

# Iterating over the path parts
if any(part in blocklist for part in Path("my/file/path").parts):
    ...
```

--------------------------------

### Python: Fix docstring section headers missing colons

Source: https://docs.astral.sh/ruff/rules/missing-section-name-colon

This snippet demonstrates the incorrect and correct formatting for Google-style docstring section headers. It highlights the requirement for section headers like 'Args', 'Returns', and 'Raises' to end with a colon. This rule is particularly relevant for maintaining code readability and adhering to style guides.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.
        time: Time spent traveling.

    Returns:
        Speed as distance divided by time.

    Raises:
        FasterThanLightError: If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.
        time: Time spent traveling.

    Returns:
        Speed as distance divided by time.

    Raises:
        FasterThanLightError: If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Detect Ambiguous Unicode Characters in Python Comments (RUF003)

Source: https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-comment

This rule identifies comments containing Unicode characters that are visually confusable with standard ASCII characters. It helps prevent subtle bugs and malicious code obfuscation. The example demonstrates the difference between Cyrillic '' and Latin 'o'.

```python
foo()  # nqa  # "" is Cyrillic (U+043E)

```

```python
foo()  # noqa  # "o" is Latin (U+006F)

```

--------------------------------

### Configure Target Version and Ruff Settings (ruff.toml)

Source: https://docs.astral.sh/ruff/tutorial

Sets the target Python version to `py310` and configures Ruff's line length and lint rules in the `[tool.ruff]` section within `ruff.toml`.

```toml
# Support Python 3.10+.
target-version = "py310"
# Set the maximum line length to 79.
line-length = 79

[lint]
# Add the `line-too-long` rule to the enforced rule set.
extend-select = ["E501"]


```

--------------------------------

### Configure Ruff FixAll Code Actions (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Enables or disables the registration of the Ruff server for 'source.fixAll' code actions. Defaults to true.

```json
{
    "ruff.fixAll": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      fixAll = false
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "fixAll": false
        }
      }
    }
  }
}
```

--------------------------------

### Use pathlib.Path.stat() instead of os.path.getatime

Source: https://docs.astral.sh/ruff/rules/os-path-getatime

This snippet demonstrates how to replace the usage of `os.path.getatime` with the equivalent functionality provided by `pathlib.Path.stat().st_atime`. Using `pathlib` improves code readability and leverages a higher-level API for path operations.

```python
import os

os.path.getatime(__file__)
```

```python
from pathlib import Path

Path(__file__).stat().st_atime
```

--------------------------------

### Use Positional Arguments for Logging Formatting (Python)

Source: https://docs.astral.sh/ruff/rules/logging-string-concat

This snippet demonstrates an alternative method for deferred string formatting in logging messages by passing values as arguments to the logging method. This approach, similar to using `extra`, ensures that string formatting only occurs when necessary, avoiding performance penalties associated with eager concatenation. This is another valid alternative to direct string concatenation.

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened", user)

```

--------------------------------

### Detect Variable Shadowing Built-ins in Python (Ruff A001)

Source: https://docs.astral.sh/ruff/rules/builtin-variable-shadowing

This snippet demonstrates how Ruff's A001 rule identifies variable assignments that reuse names of Python built-ins, such as 'max'. Shadowing built-ins can lead to unreadable code and TypeErrors, as shown in the example where 'max' is redefined as an integer instead of being used as the built-in function. The corrected version uses a different variable name, 'result', to avoid this conflict.

```python
def find_max(list_of_lists):
    max = 0
    for flat_list in list_of_lists:
        for value in flat_list:
            max = max(max, value)  # TypeError: 'int' object is not callable
    return max

# Corrected version:
def find_max(list_of_lists):
    result = 0
    for flat_list in list_of_lists:
        for value in flat_list:
            result = max(result, value)
    return result

```

--------------------------------

### Configure Ruff OrganizeImports Code Actions (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Enables or disables the registration of the Ruff server for 'source.organizeImports' code actions. Defaults to true.

```json
{
    "ruff.organizeImports": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      organizeImports = false
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "organizeImports": false
        }
      }
    }
  }
}
```

--------------------------------

### Check for Ambiguous Unicode Characters in Python String

Source: https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-string

This Python code snippet demonstrates the use of ambiguous Unicode characters in a string. The '' character (Greek eta) is visually similar to the Latin 'H'. Ruff's RUF001 rule flags such characters to prevent potential confusion and subtle bugs. The example shows the problematic code and the recommended alternative using standard ASCII characters.

```python
print("ello, world!")  # "" is the Greek eta (U+0397).

```

```python
print("Hello, world!")  # "H" is the Latin capital H (U+0048).

```

--------------------------------

### Ruff Default Configuration (pyproject.toml / ruff.toml)

Source: https://docs.astral.sh/ruff/configuration

This snippet shows the default configuration for Ruff, including excluded directories, line length, indent width, target Python version, selected and ignored linting rules, fixable rules, and formatting preferences like quote style and indent style. It's applicable to both `pyproject.toml` and `ruff.toml`.

```toml
[tool.ruff]
# Exclude a variety of commonly ignored directories.
exclude = [
    ".bzr",
    ".direnv",
    ".eggs",
    ".git",
    ".git-rewrite",
    ".hg",
    ".ipynb_checkpoints",
    ".mypy_cache",
    ".nox",
    ".pants.d",
    ".pyenv",
    ".pytest_cache",
    ".pytype",
    ".ruff_cache",
    ".svn",
    ".tox",
    ".venv",
    ".vscode",
    "__pypackages__",
    "_build",
    "buck-out",
    "build",
    "dist",
    "node_modules",
    "site-packages",
    "venv",
]

# Same as Black.
line-length = 88
indent-width = 4

# Assume Python 3.9
target-version = "py39"

[tool.ruff.lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`) codes by default.
# Unlike Flake8, Ruff doesn't enable pycodestyle warnings (`W`) or
# McCabe complexity (`C901`) by default.
select = ["E4", "E7", "E9", "F"]
ignore = []

# Allow fix for all enabled rules (when `--fix`) is provided.
fixable = ["ALL"]
unfixable = []

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[tool.ruff.format]
# Like Black, use double quotes for strings.
quote-style = "double"

# Like Black, indent with spaces, rather than tabs.
indent-style = "space"

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = "auto"

# Enable auto-formatting of code examples in docstrings. Markdown,
# reStructuredText code/literal blocks and doctests are all supported.
#
# This is currently disabled by default, but it is planned for this
# to be opt-out in the future.
docstring-code-format = false

# Set the line length limit used when formatting code snippets in
# docstrings.
#
# This only has an effect when the `docstring-code-format` setting is
# enabled.
docstring-code-line-length = "dynamic"

```

```toml
# Exclude a variety of commonly ignored directories.
exclude = [
    ".bzr",
    ".direnv",
    ".eggs",
    ".git",
    ".git-rewrite",
    ".hg",
    ".ipynb_checkpoints",
    ".mypy_cache",
    ".nox",
    ".pants.d",
    ".pyenv",
    ".pytest_cache",
    ".pytype",
    ".ruff_cache",
    ".svn",
    ".tox",
    ".venv",
    ".vscode",
    "__pypackages__",
    "_build",
    "buck-out",
    "build",
    "dist",
    "node_modules",
    "site-packages",
    "venv",
]

# Same as Black.
line-length = 88
indent-width = 4

# Assume Python 3.9
target-version = "py39"

[lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`) codes by default.
# Unlike Flake8, Ruff doesn't enable pycodestyle warnings (`W`) or
# McCabe complexity (`C901`) by default.
select = ["E4", "E7", "E9", "F"]
ignore = []

# Allow fix for all enabled rules (when `--fix`) is provided.
fixable = ["ALL"]
unfixable = []

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[format]
# Like Black, use double quotes for strings.
quote-style = "double"

# Like Black, indent with spaces, rather than tabs.
indent-style = "space"

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = "auto"

# Enable auto-formatting of code examples in docstrings. Markdown,
# reStructuredText code/literal blocks and doctests are all supported.
#
# This is currently disabled by default, but it is planned for this
# to be opt-out in the future.
docstring-code-format = false

# Set the line length limit used when formatting code snippets in
# docstrings.
#
# This only has an effect when the `docstring-code-format` setting is
# enabled.
docstring-code-line-length = "dynamic"

```

--------------------------------

### Correct Logging without exc_info=True (Python)

Source: https://docs.astral.sh/ruff/rules/exc-info-outside-except-handler

Shows the correct way to log a message without `exc_info=True` when no exception is being handled. This avoids the misleading `NoneType: None` output.

```python
import logging


logging.warning("Foobar")
```

--------------------------------

### Check os.path.isabs and use pathlib.Path.is_absolute()

Source: https://docs.astral.sh/ruff/rules/os-path-isabs

This snippet demonstrates the incorrect usage of `os.path.isabs` and the recommended alternative using `pathlib.Path.is_absolute()`. The linter identifies the former and suggests the latter for better code quality.

```python
import os

if os.path.isabs(file_name):
    print("Absolute path!")
```

```python
from pathlib import Path

if Path(file_name).is_absolute():
    print("Absolute path!")
```

--------------------------------

### Python: Detect Invalid `noqa` Codes (RUF102)

Source: https://docs.astral.sh/ruff/rules/invalid-rule-code

This snippet demonstrates how the RUF102 rule flags invalid `noqa` codes in Python. Invalid codes like 'XYZ999' are detected, and the corrected examples show how to either remove the `noqa` comment or use a valid code such as 'E402'. This rule requires the `--preview` flag to be enabled.

```python
import os  # noqa: XYZ999
```

```python
import os
```

```python
import os  # noqa: E402
```

--------------------------------

### Override import section order (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Allows custom ordering of import sections. This can be used to prioritize specific types of imports or custom sections.

```toml
[tool.ruff.lint.isort]
section-order = ["future", "standard-library", "first-party", "local-folder", "third-party"]

```

```toml
[lint.isort]
section-order = ["future", "standard-library", "first-party", "local-folder", "third-party"]

```

--------------------------------

### Run Pylint for Error Checking

Source: https://docs.astral.sh/ruff/contributing

Executes Pylint with maximum parallelism to only report errors. Assumes you are in the `crates/ruff_linter/resources/test/cpython` directory. Dependencies: Pylint, Git.

```shell
time pylint -j 0 -E $(git ls-files '*.py')
```

--------------------------------

### Avoid Escaped Quotes in Python Strings

Source: https://docs.astral.sh/ruff/rules/avoidable-escaped-quote

This rule checks for strings containing escaped quotes. It suggests modifying the outer quote style to prevent the need for escaping inner quotes, thus enhancing code readability. For example, a string with an escaped double quote can be rewritten using single quotes. This rule is not recommended when using a code formatter.

```python
foo = "bar\"s"

```

```python
foo = 'bar"s'

```

--------------------------------

### Specify required import lines (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Adds a specified import line to all files. This is useful for ensuring consistent import practices across a project.

```toml
[tool.ruff.lint.isort]
required-imports = ["from __future__ import annotations"]

```

```toml
[lint.isort]
required-imports = ["from __future__ import annotations"]

```

--------------------------------

### Configure Ruff to Extend Rules (pyproject.toml)

Source: https://docs.astral.sh/ruff/tutorial

This configuration extends Ruff's default linting rules to include 'UP' (pyupgrade) and 'D' (pydocstyle) rules. It also specifies a 'google' convention for pydocstyle.

```toml
[project]
requires-python = ">=3.10"

[tool.ruff.lint]
extend-select = [
  "UP",  # pyupgrade
  "D",   # pydocstyle
]

[tool.ruff.lint.pydocstyle]
convention = "google"

```

--------------------------------

### Ruff Linter Configuration Options

Source: https://docs.astral.sh/ruff/configuration

Options related to configuring which rules are fixable and how files are selected for linting.

```APIDOC
## Ruff Linter Configuration

### Description
Options to control which linting rules are considered fixable and how files are excluded from analysis.

### Method
N/A (CLI Options)

### Endpoint
N/A (CLI Options)

### Parameters
#### Command-line Flags
- **--fixable** `<RULE_CODE>` (string) - List of rule codes to treat as eligible for fix. Only applicable when fix itself is enabled.
- **--unfixable** `<RULE_CODE>` (string) - List of rule codes to treat as ineligible for fix. Only applicable when fix itself is enabled.
- **--extend-fixable** `<RULE_CODE>` (string) - Like `--fixable`, but adds additional rule codes on top of those already specified.
- **--exclude** `<FILE_PATTERN>` (string) - List of paths, used to omit files and/or directories from analysis.
- **--extend-exclude** `<FILE_PATTERN>` (string) - Like `--exclude`, but adds additional files and directories on top of those already excluded.
- **--respect-gitignore** (boolean) - Respect file exclusions via `.gitignore` and other standard ignore files. Use `--no-respect-gitignore` to disable.
- **--force-exclude** (boolean) - Enforce exclusions, even for paths passed to Ruff directly on the command-line. Use `--no-force-exclude` to disable.

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Configure Ruff to Extend Rules (ruff.toml)

Source: https://docs.astral.sh/ruff/tutorial

This configuration extends Ruff's default linting rules to include 'UP' (pyupgrade) and 'D' (pydocstyle) rules. It also specifies a 'google' convention for pydocstyle.

```toml
target-version = "py310"

[lint]
extend-select = [
  "UP",  # pyupgrade
  "D",   # pydocstyle
]

[lint.pydocstyle]
convention = "google"

```

--------------------------------

### Configure Import Aliases (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Defines conventional aliases for imported modules. This configuration helps maintain consistent import statements across a project. The default aliases include common libraries like numpy (np) and pandas (pd). These can be extended using the `extend-aliases` option.

```toml
[tool.ruff.lint.flake8-import-conventions.aliases]
# Declare the default aliases.
altair = "alt"
"matplotlib.pyplot" = "plt"
numpy = "np"
pandas = "pd"
seaborn = "sns"
scipy = "sp"

```

```toml
[lint.flake8-import-conventions.aliases]
# Declare the default aliases.
altair = "alt"
"matplotlib.pyplot" = "plt"
numpy = "np"
pandas = "pd"
seaborn = "sns"
scipy = "sp"

```

--------------------------------

### Configure Ruff Exclude Patterns (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Specifies a list of file patterns to exclude from Ruff's linting and formatting processes. Useful for ignoring test files or build directories.

```json
{
    "ruff.exclude": ["**/tests/**"]
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      exclude = ["**/tests/**"]
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "exclude": ["**/tests/**"]
        }
      }
    }
  }
}
```

--------------------------------

### Configure Banned 'from' Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules from which direct 'from ... import ...' statements are disallowed. This is useful for enforcing that entire modules are imported, promoting clarity and potentially avoiding namespace pollution. For instance, banning 'typing' prevents 'from typing import List'.

```toml
[tool.ruff.lint.flake8-import-conventions]
# Declare the banned `from` imports.
banned-from = ["typing"]

```

```toml
[lint.flake8-import-conventions]
# Declare the banned `from` imports.
banned-from = ["typing"]

```

--------------------------------

### Force Single-Line Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Enforces that all 'from' imports appear on their own line. Default value is false.

```toml
[tool.ruff.lint.isort]
force-single-line = true

```

```toml
[lint.isort]
force-single-line = true

```

--------------------------------

### Replace os.path.samefile with Path.samefile

Source: https://docs.astral.sh/ruff/rules/os-path-samefile

This snippet demonstrates how to replace the usage of `os.path.samefile` with the more readable `Path.samefile` method from the `pathlib` module. It is recommended for improved code clarity and type safety.

```python
import os

os.path.samefile("f1.py", "f2.py")
```

```python
from pathlib import Path

Path("f1.py").samefile("f2.py")
```

--------------------------------

### Ruff Lint: Extend Fixable Rules

Source: https://docs.astral.sh/ruff/settings

Adds a list of rule codes or prefixes to consider fixable, supplementing the rules already defined by the `fixable` option. This allows for broader automatic fixing of identified issues. Configuration is done via `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
# Enable fix for flake8-bugbear (`B`), on top of any rules specified by `fixable`.
extend-fixable = ["B"]
```

```toml
[lint]
# Enable fix for flake8-bugbear (`B`), on top of any rules specified by `fixable`.
extend-fixable = ["B"]
```

--------------------------------

### Configure Ruff Formatting Backend (JSON - LSP)

Source: https://docs.astral.sh/ruff/editors/settings

Sets the Ruff formatting backend via LSP initialization options in JSON format. It configures the 'format.backend' setting to 'uv', which requires uv version >= 0.8.13. The default backend is 'internal'.

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "format": {
            "backend": "uv"
          }
        }
      }
    }
  }
}
```

--------------------------------

### Print CST with LibCST Parser

Source: https://docs.astral.sh/ruff/contributing

Generates and displays the Concrete Syntax Tree (CST) of a Python file using the LibCST library. Unlike the AST, the CST preserves all syntactic elements, including whitespace, comments, and newlines, providing a more complete representation of the source code.

```bash
cargo dev print-cst <file>
```

--------------------------------

### Format Code with ruff_python_formatter

Source: https://docs.astral.sh/ruff/contributing

Applies code formatting according to the specifications defined in the `ruff_python_formatter` project. This command helps maintain consistent code style across the project.

```bash
cargo dev format_dev
```

--------------------------------

### Incorrect sys.version_info Comparison (Python)

Source: https://docs.astral.sh/ruff/rules/bad-version-info-comparison

Demonstrates the problematic usage of comparison operators with sys.version_info. This check is intended to catch common errors that lead to unexpected behavior when determining Python version compatibility. It highlights that only '<' and '>=' are permitted for reliable version checks.

```Python
import sys

# Incorrect usage
if sys.version_info == (3, 8):
    pass
if sys.version_info < (3, 8):
    pass
if sys.version_info <= (3, 8):
    pass
if sys.version_info > (3, 8, 1):
    pass
if sys.version_info in (3, 8):
    pass

```

--------------------------------

### Ruff Lint: Exclude Patterns

Source: https://docs.astral.sh/ruff/settings

Configures a list of file path patterns to exclude from Ruff's linting process. These exclusions are in addition to globally excluded files and use glob syntax. Settings can be applied in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
exclude = ["generated"]
```

```toml
[lint]
exclude = ["generated"]
```

--------------------------------

### Efficient use of min() and max() in Python

Source: https://docs.astral.sh/ruff/rules/sorted-min-max

This snippet shows the recommended and efficient way to find the minimum and maximum values in a Python list using the built-in min() and max() functions. This approach is more readable and performant compared to using sorted().

```python
nums = [3, 1, 4, 1, 5]
lowest = min(nums)
highest = max(nums)
```

--------------------------------

### Profile Ruff Check with ruff_dev and perf on Linux

Source: https://docs.astral.sh/ruff/contributing

Profiles the `ruff check` command using `ruff_dev` and `perf` on Linux. This gathers samples for a flamegraph. Adjust repeat count (30) and sample rate (999) as needed. Dependencies: `perf`, Rust toolchain, Ruff project, `ruff_dev`.

```shell
cargo build --bin ruff_dev --profile=profiling
perf record -g -F 999 target/profiling/ruff_dev repeat --repeat 30 --exit-zero --no-cache path/to/cpython > /dev/null
```

--------------------------------

### Configure Dependency Direction for Ruff Analyze

Source: https://docs.astral.sh/ruff/settings

Specifies the direction for generating dependency maps in Ruff's analyze command. It can be set to 'dependencies' (file to its dependencies) or 'dependents' (files that depend on it). The default is 'dependencies'. This is configured in pyproject.toml or ruff.toml.

```toml
[tool.ruff.analyze]
direction = "dependencies"

```

```toml
[analyze]
direction = "dependencies"

```

--------------------------------

### Configure Ruff Log Level (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Sets the verbosity level for Ruff server logs. Available levels include 'trace', 'debug', 'info', 'warn', and 'error'. Defaults to 'info'.

```json
{
    "ruff.logLevel": "debug"
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      logLevel = "debug"
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "logLevel": "debug"
        }
      }
    }
  }
}
```

--------------------------------

### Configure Case-Sensitive Import Sorting (TOML)

Source: https://docs.astral.sh/ruff/settings

The `case-sensitive` option for the `isort` plugin controls whether import sorting respects case sensitivity. Note that if `order-by-type` is enabled, it will take precedence over this setting.

```toml
[tool.ruff.lint.isort]
case-sensitive = true

```

```toml
[lint.isort]
case-sensitive = true

```

--------------------------------

### Enable Ruff Preview Mode for Unstable Features

Source: https://docs.astral.sh/ruff/settings

A boolean flag to enable Ruff's preview mode. When enabled, Ruff utilizes unstable rules and fixes, allowing users to test and provide feedback on upcoming features. This is useful for adopting the latest linting capabilities.

```toml
[tool.ruff.lint]
preview = true

```

```toml
[lint]
preview = true

```

--------------------------------

### Undocumented Magic Method vs. Documented Magic Method (Python)

Source: https://docs.astral.sh/ruff/rules/undocumented-magic-method

Demonstrates the difference between a magic method without a docstring and one with a docstring. Magic methods, like `__str__`, should include docstrings to explain their functionality, arguments, and return values.

```python
class Cat(Animal):
    def __str__(self) -> str:
        return f"Cat: {self.name}"


cat = Cat("Dusty")
print(cat)  # "Cat: Dusty"

```

```python
class Cat(Animal):
    def __str__(self) -> str:
        """Return a string representation of the cat."""
        return f"Cat: {self.name}"


cat = Cat("Dusty")
print(cat)  # "Cat: Dusty"

```

--------------------------------

### Ruff Formatter Command

Source: https://docs.astral.sh/ruff/configuration

Options for the `ruff format` command, used to format Python code.

```APIDOC
## `ruff format` Command

### Description
Runs the Ruff formatter on the specified files or directories to format Python code.

### Method
N/A (CLI Command)

### Endpoint
N/A (CLI Command)

### Parameters
#### Arguments
- **[FILES]...** (string) - List of files or directories to format. Defaults to the current directory (`.`).

#### Command-line Flags
- **--check** (boolean) - Avoid writing any formatted files back; instead, exit with a non-zero status code if any files would have been modified.
- **--diff** (boolean) - Avoid writing any formatted files back; instead, exit with a non-zero status code and the difference between the current file and how the formatted file would look like.
- **--extension** `<EXTENSION>` (string) - List of mappings from file extension to language (e.g., `ipy:ipynb`).
- **--target-version** `<TARGET_VERSION>` (string) - The minimum Python version to support (e.g., `py37`, `py310`). Possible values: `py37`, `py38`, `py39`, `py310`, `py311`, `py312`, `py313`, `py314`.
- **--preview** (boolean) - Enable preview mode for unstable formatting. Use `--no-preview` to disable.
- **--output-format** `<OUTPUT_FORMAT>` (string) - Output serialization format for violations when used with `--check`. Default is "full". Possible values: `concise`, `full`, `json`, `json-lines`, `junit`, `grouped`, `github`, `gitlab`, `pylint`, `rdjson`, `azure`, `sarif`.
- **--exit-non-zero-on-format** (boolean) - Exit with a non-zero status code if any files were modified via format, even if all files were formatted successfully.
- **--respect-gitignore** (boolean) - Respect file exclusions via `.gitignore`. Use `--no-respect-gitignore` to disable.
- **--exclude** `<FILE_PATTERN>` (string) - List of paths to omit from analysis.
- **--force-exclude** (boolean) - Enforce exclusions even for paths passed directly to Ruff. Use `--no-force-exclude` to disable.
- **--line-length** `<LINE_LENGTH>` (integer) - Set the line length for formatting.
- **--range** `<RANGE>` (string) - When specified, Ruff will try to only format the code in the given range.

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Ruff Code Action Settings

Source: https://docs.astral.sh/ruff/editors/settings

Configure how Ruff displays Quick Fix actions for disabling rules and autofixing violations.

```APIDOC
## `disableRuleComment.enable`

### Description
Whether to display Quick Fix actions to disable rules via `noqa` suppression comments.

### Type
bool

### Default Value
true

### Example Usage
```json
{
    "ruff.codeAction.disableRuleComment.enable": false
}
```

## `fixViolation.enable`

### Description
Whether to display Quick Fix actions to autofix violations.

### Type
bool

### Default Value
true

### Example Usage
```json
{
    "ruff.codeAction.fixViolation.enable": false
}
```
```

--------------------------------

### Configure Pytest Mark Parentheses (TOML)

Source: https://docs.astral.sh/ruff/settings

Controls whether pytest markers, like `@pytest.mark.foo`, require parentheses. When `true`, `@pytest.mark.foo()` is enforced; when `false` (the default), `@pytest.mark.foo` is valid and `@pytest.mark.foo()` is invalid.

```toml
[tool.ruff.lint.flake8-pytest-style]
mark-parentheses = true

```

```toml
[lint.flake8-pytest-style]
mark-parentheses = true

```

--------------------------------

### Avoid Multiple startswith Calls with Tuples - Python

Source: https://docs.astral.sh/ruff/rules/multiple-starts-ends-with

This Python code snippet demonstrates how to refactor multiple `startswith` calls into a single call using a tuple of prefixes. This improves efficiency and readability by leveraging the built-in tuple argument support of the `startswith` method.

```python
msg = "Hello, world!"
if msg.startswith("Hello") or msg.startswith("Hi"):
    print("Greetings!")

# Use instead:
msg = "Hello, world!"
if msg.startswith(("Hello", "Hi")):
    print("Greetings!")

```

--------------------------------

### Correct printf usage with gettext (Python)

Source: https://docs.astral.sh/ruff/rules/printf-in-get-text-func-call

Shows the correct way to handle printf-style formatting with gettext. The translation template is passed to the gettext function, and the actual formatting is applied to the returned translation, ensuring the correct lookup in the translation catalog.

```python
from gettext import gettext as _

name = "Maria"
_("Hello, %s!") % name  # Looks for "Hello, %s!".

```

--------------------------------

### Incorrect File Opening (Python)

Source: https://docs.astral.sh/ruff/rules/open-file-with-context-handler

Demonstrates opening a file without a context manager, which is flagged by the SIM115 rule. This method does not guarantee file closure if exceptions occur.

```python
file = open("foo.txt")
...
file.close()
```

--------------------------------

### Round-trip Python Code Parsing and Serialization

Source: https://docs.astral.sh/ruff/contributing

Reads a Python file or Jupyter Notebook, parses it into an internal representation, serializes that representation, and then writes it back to a file. This process is crucial for evaluating the fidelity of Ruff's code representation and ensuring that fixes do not unintentionally alter code.

```bash
cargo dev round-trip <python file or jupyter notebook>
```

--------------------------------

### typing-modules Configuration

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules whose exports should be treated as equivalent to members of the `typing` module, aiding type annotation inference.

```APIDOC
## typing-modules Configuration

### Description
A list of modules whose exports should be treated equivalently to members of the `typing` module.
This is useful for ensuring proper type annotation inference for projects that re-export `typing` and `typing_extensions` members from a compatibility module. If omitted, any members imported from modules apart from `typing` and `typing_extensions` will be treated as ordinary Python objects.

### Default value
`[]`

### Type
`list[str]`

### Example usage
```toml
[tool.ruff.lint]
typing-modules = ["airflow.typing_compat"]
```

```ini
[lint]
typing-modules = ["airflow.typing_compat"]
```
```

--------------------------------

### Correct `default_factory` Initialization for `defaultdict` (Python)

Source: https://docs.astral.sh/ruff/rules/default-factory-kwarg

This snippet shows the correct way to initialize a `defaultdict` by providing the factory callable as a positional argument. This ensures the `defaultdict` behaves as expected, returning the default value (e.g., 0 for `int`, an empty list for `list`) when a key is not found.

```python
from collections import defaultdict

defaultdict(int)
defaultdict(list)
```

--------------------------------

### flake8-type-checking Options

Source: https://docs.astral.sh/ruff/settings

Configure options for the flake8-type-checking plugin, which helps manage type checking imports.

```APIDOC
## `lint.flake8-type-checking`

### Description
Options for the `flake8-type-checking` plugin.

#### `exempt-modules`

### Description
Exempt certain modules from needing to be moved into type-checking blocks.

### Type
`list[str]`

### Default value
`["typing"]`

### Example usage
```toml
[tool.ruff.lint.flake8-type-checking]
exempt-modules = ["typing", "typing_extensions"]
```

```toml
[lint.flake8-type-checking]
exempt-modules = ["typing", "typing_extensions"]
```

#### `quote-annotations`

### Description
Whether to add quotes around type annotations, if doing so would allow the corresponding import to be moved into a type-checking block.
For example, in the following, Python requires that `Sequence` be available at runtime, despite the fact that it's only used in a type annotation:
```python
from collections.abc import Sequence


def func(value: Sequence[int]) -> None:
    ...
```

In other words, moving `from collections.abc import Sequence` into an `if TYPE_CHECKING:` block above would cause a runtime error, as the type would no longer be available at runtime.
By default, Ruff will respect such runtime semantics and avoid moving the import to prevent such runtime errors.
Setting `quote-annotations` to `true` will instruct Ruff to add quotes around the annotation (e.g., `"Sequence[int]"`), which in turn enables Ruff to move the import into an `if TYPE_CHECKING:` block, like so:
```python
from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from collections.abc import Sequence


def func(value: "Sequence[int]") -> None:
    ...
```

Note that this setting has no effect when `from __future__ import annotations` is present, as `__future__` annotations are always treated equivalently to quoted annotations. Similarly, this setting has no effect on Python versions after 3.14 because these annotations are also deferred.

### Type
`bool`

### Default value
`false`

### Example usage
```toml
[tool.ruff.lint.flake8-type-checking]
# Enable quoting annotations to allow moving imports into type-checking blocks.
quote-annotations = true
```
```

--------------------------------

### Check for pyghmi import

Source: https://docs.astral.sh/ruff/rules/suspicious-pyghmi-import

This snippet demonstrates the use of the 'pyghmi' module, which is flagged by Ruff's S415 rule. This rule is intended to prevent the use of potentially insecure IPMI-related functionalities. The rule is in preview and requires the `--preview` flag to be enabled.

```python
import pyghmi

```

--------------------------------

### Generate Ruff Rules Table

Source: https://docs.astral.sh/ruff/contributing

Generates a markdown-compatible table listing all Ruff rules. This output is utilized for the comprehensive rules documentation found at https://docs.astral.sh/ruff/rules/.

```bash
cargo dev generate-rules-table
```

--------------------------------

### Python: Correctly Handle Returns in Try-Except-Finally

Source: https://docs.astral.sh/ruff/rules/return-in-try-except-finally

Shows the recommended pattern for handling return values across try, except, and finally blocks. The return value is assigned to a variable, and then returned after the finally block completes.

```python
def squared(n):
    try:
        return_value = n**2
    except Exception:
        return_value = "An exception occurred"
    finally:
        return_value = -1
    return return_value

```

--------------------------------

### Use pathlib.Path.resolve

Source: https://docs.astral.sh/ruff/rules/os-path-abspath

This snippet shows the recommended alternative using `pathlib.Path.resolve()` to obtain the absolute path. `pathlib` provides a high-level, object-oriented API for filesystem paths.

```python
from pathlib import Path

file_path = Path("../path/to/file").resolve()
```

--------------------------------

### Ruff Lint: Extend Ignore Rules

Source: https://docs.astral.sh/ruff/settings

Deprecated option to specify additional rule codes or prefixes to ignore during linting, complementing the main `ignore` setting. Users are advised to use the `ignore` option instead. Configuration can be set in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
# Skip unused variable rules (`F841`).
extend-ignore = ["F841"]
```

```toml
[lint]
# Skip unused variable rules (`F841`).
extend-ignore = ["F841"]
```

--------------------------------

### Configure flake8-bandit: Hardcoded Temp Directory

Source: https://docs.astral.sh/ruff/settings

Provides a list of directories considered temporary for security checks (e.g., `S108`). The default list includes common temporary directories like `/tmp`. This helps identify potential security risks associated with hardcoding sensitive paths.

```toml
[tool.ruff.lint.flake8-bandit]
hardcoded-tmp-directory = ["/foo/bar"]
```

```ini
[lint.flake8-bandit]
hardcoded-tmp-directory = ["/foo/bar"]
```

--------------------------------

### Customize Copyright Notice Regex (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Allows customization of the regular expression used to match copyright notices. The default regex is `(?i)Copyright\s+((?:\(C\)|)\s+)?\d{4}((-|,\s)\d{4})*`. This setting enables fine-grained control over what constitutes a valid copyright notice.

```toml
[tool.ruff.lint.flake8-copyright]
notice-rgx = "(?i)Copyright \(C\) \d{4}"

```

```toml
[lint.flake8-copyright]
notice-rgx = "(?i)Copyright \(C\) \d{4}"

```

--------------------------------

### Add Ruff to Project Dependencies

Source: https://docs.astral.sh/ruff/tutorial

Adds the Ruff linter and formatter to the project's development dependencies using the `uv` package manager. This makes Ruff available for use within the project's environment.

```bash
$ uv add --dev ruff

```

--------------------------------

### Replace subprocess.run stdout/stderr with capture_output (Python)

Source: https://docs.astral.sh/ruff/rules/replace-stdout-stderr

This snippet demonstrates how to refactor the use of `subprocess.run` in Python. Instead of manually setting `stdout=subprocess.PIPE` and `stderr=subprocess.PIPE`, it shows the preferred method using the `capture_output=True` keyword argument, which is available from Python 3.7 onwards. This change improves readability and explicitness. The fix is considered unsafe because comments on the original arguments might be lost.

```python
import subprocess

subprocess.run(["foo"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
```

```python
import subprocess

subprocess.run(["foo"], capture_output=True)
```

--------------------------------

### Pre-commit Hooks Configuration for Ruff

Source: https://docs.astral.sh/ruff/integrations

This configuration sets up Ruff as a pre-commit hook using `ruff-pre-commit`. It includes hooks for both `ruff-check` and `ruff-format`, ensuring code is linted and formatted before committing.

```yaml
- repo: https://github.com/astral-sh/ruff-pre-commit
  # Ruff version.
  rev: v0.14.8
  hooks:
    # Run the linter.
    - id: ruff-check
    # Run the formatter.
    - id: ruff-format
```

--------------------------------

### Configure Target Python Version for Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies the minimum Python version Ruff should target. Ruff will avoid suggesting code changes that use features unavailable in this version. It can be set in pyproject.toml or ruff.toml. If both `target-version` and `project.requires-python` are specified, `target-version` takes precedence.

```toml
[tool.ruff]
target-version = "py37"

```

```toml
# Always generate Python 3.7-compatible code.
target-version = "py37"

```

--------------------------------

### Extend Safe Fixes in Ruff Configuration

Source: https://docs.astral.sh/ruff/settings

Allows applying unsafe fixes for specified rules (e.g., 'E' and 'F401') without requiring the `--unsafe-fixes` flag. This configuration is applicable to both `pyproject.toml` and `ruff.toml` files under the `[tool.ruff.lint]` or `[lint]` sections, respectively.

```toml
[tool.ruff.lint]
extend-safe-fixes = ["E", "F401"]

```

```toml
[lint]
extend-safe-fixes = ["E", "F401"]

```

--------------------------------

### flake8-gettext Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-gettext plugin for internationalization function names.

```APIDOC
## `lint.flake8-gettext` Options

### Description
Options for the `flake8-gettext` plugin.

#### `extend-function-names`

### Description
Additional function names to consider as internationalization calls, in addition to those included in `function-names`.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **extend-function-names** (list[str]) - Default: `[]` - A list of additional function names for i18n calls.

### Request Example
```toml
[tool.ruff.lint.flake8-gettext]
extend-function-names = ["ugettetxt"]
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A

#### `function-names`

### Description
The function names to consider as internationalization calls.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **function-names** (list[str]) - Default: `["_", "gettext", "ngettext"]` - A list of function names considered as i18n calls.

### Request Example
```toml
[tool.ruff.lint.flake8-gettext]
function-names = ["_", "gettext", "ngettext", "ugettetxt"]
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Ruff Lint: Extend Safe Fixes

Source: https://docs.astral.sh/ruff/settings

Provides a list of rule codes or prefixes for which potentially unsafe fixes should be treated as safe by Ruff. This setting is configured within `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]

```

--------------------------------

### Specify Excluded Files for Ruff Analysis

Source: https://docs.astral.sh/ruff/settings

Defines a list of file patterns to exclude from Ruff's analysis, in addition to globally excluded files. Exclusions use glob patterns and can be single-path or relative. Configuration is done in pyproject.toml or ruff.toml.

```toml
[tool.ruff.analyze]
exclude = ["generated"]

```

```toml
[analyze]
exclude = ["generated"]

```

--------------------------------

### Extend Unsafe Fixes in Ruff Configuration

Source: https://docs.astral.sh/ruff/settings

Specifies a list of rule codes or prefixes for which safe fixes should be treated as unsafe, requiring the `--unsafe-fixes` flag. This configuration can be applied in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
extend-unsafe-fixes = ["E", "F401"]

```

```toml
[lint]
extend-unsafe-fixes = ["E", "F401"]

```

--------------------------------

### Replace printf-style formatting with str.format in Python

Source: https://docs.astral.sh/ruff/rules/printf-string-formatting

Demonstrates replacing old printf-style string formatting with the more modern and readable str.format method in Python. This improves code clarity and avoids quirks associated with printf-style formatting.

```python
print("%s, %s" % ("Hello", "World"))  # "Hello, World"

# Use instead:
print("{}, {}".format("Hello", "World"))  # "Hello, World"
```

--------------------------------

### Configure Ruff Formatting Backend (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Sets the backend for Ruff formatting in VS Code. Options include 'internal' (built-in Ruff) or 'uv' (external uv formatter). Requires uv version >= 0.8.13 for the 'uv' option. The default is 'internal'.

```json
{
    "ruff.format.backend": "uv"
}
```

--------------------------------

### Configure Quote Style for Ruff Formatting

Source: https://docs.astral.sh/ruff/settings

Sets the preferred quote character for strings. Options are 'double' (default), 'single', and 'preserve' (keeps existing quotes). Ruff may deviate to avoid unnecessary escaping.

```toml
[tool.ruff.format]
# Prefer single quotes over double quotes.
quote-style = "single"

```

```toml
[format]
# Prefer single quotes over double quotes.
quote-style = "single"

```

--------------------------------

### Detecting return in __init__ (Python)

Source: https://docs.astral.sh/ruff/rules/return-in-init

This rule checks for __init__ methods in Python classes that return a value. The __init__ method should only implicitly return None; explicitly returning any other value will cause a runtime error. Instead, initialize class attributes.

```python
class Example:
    def __init__(self):
        return []
```

```python
class Example:
    def __init__(self):
        self.value = []
```

--------------------------------

### Python F-string Formatting with Nested Quotes

Source: https://docs.astral.sh/ruff/formatter

Demonstrates how Ruff handles nested quotes within f-strings, respecting configured quote styles and Python version limitations. It shows scenarios where specific quote nesting is not allowed in older Python versions.

```python
# This f-string cannot be formatted as follows when targeting Python < 3.12
f"""nested " """

```

```python
# format.quote-style = "double"

f'{1=:"foo"}'
# This f-string cannot be formatted as follows for all target Python versions
f"{1=:"foo"}"

```

--------------------------------

### unfixable Configuration

Source: https://docs.astral.sh/ruff/settings

Lists rule codes or prefixes that should be considered non-fixable by Ruff.

```APIDOC
## unfixable Configuration

### Description
A list of rule codes or prefixes to consider non-fixable.

### Default value
`[]`

### Type
`list[RuleSelector]`

### Example usage
```toml
[tool.ruff.lint]
# Disable fix for unused imports (`F401`).
unfixable = ["F401"]
```

```ini
[lint]
# Disable fix for unused imports (`F401`).
unfixable = ["F401"]
```
```

--------------------------------

### Extend Rule Selection in Ruff

Source: https://docs.astral.sh/ruff/settings

Enables additional linting rules beyond the default set. This option allows specifying rule codes or prefixes (e.g., 'B' for flake8-bugbear, 'Q' for flake8-quotes) to be enabled. Configuration can be done in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
extend-select = ["B", "Q"]

```

```toml
[lint]
extend-select = ["B", "Q"]

```

--------------------------------

### Correct printf-style formatting with named placeholders (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-expected-mapping

This snippet shows the correct way to use named placeholders in Python's printf-style string formatting. It provides a dictionary as the value, which matches the expected map type for named placeholders, thus avoiding a TypeError.

```python
"%(greeting)s, %(name)s" % {"greeting": "Hello", "name": "World"}

```

--------------------------------

### Context Manager Formatting: Parentheses for Clarity (Python 3.9+)

Source: https://docs.astral.sh/ruff/formatter/black

Shows how Ruff, when targeting Python 3.9+, uses parentheses around context managers in a 'with' statement to facilitate clearer breaks across multiple lines.

```python
with tempfile.TemporaryDirectory() as d1:
    symlink_path = Path(d1).joinpath("testsymlink")
    with (
        tempfile.TemporaryDirectory(dir=d1) as d2,
        tempfile.TemporaryDirectory(dir=d1) as d4,
        tempfile.TemporaryDirectory(dir=d2) as d3,
        tempfile.NamedTemporaryFile(dir=d4) as source_file,
        tempfile.NamedTemporaryFile(dir=d3) as lock_file,
    ):
        pass
```

--------------------------------

### Ruff's Formatting of Compound Statements with `with`

Source: https://docs.astral.sh/ruff/formatter/black

Illustrates how Ruff formats a 'with' statement containing a complex chain of builder method calls, aligning with the formatting of other compound statements for consistency.

```python
def test():
    if (
        pyspark.sql.SparkSession.builder.config(
            key="spark.python.worker.reuse", value=True
        )
        .config(key="spark.ui.enabled", value=False)
        .master("local-cluster[2, 1, 1024]")
        .getOrCreate()
    ):
        # ignore spark log output
        spark.sparkContext.setLogLevel("OFF")
        print(score_model(spark, data_path, model_uri))
```

--------------------------------

### Run Ruff Linter Check

Source: https://docs.astral.sh/ruff/tutorial

Executes the Ruff linter to check the project's Python code for errors and style violations. This command identifies issues like unused imports.

```bash
$ uv run ruff check

```

--------------------------------

### flake8-self Options

Source: https://docs.astral.sh/ruff/settings

Configure options for the flake8-self plugin, which checks for self-usage in class methods.

```APIDOC
## `extend-ignore-names`

### Description
Additional names to ignore when considering `flake8-self` violations, in addition to those included in `ignore-names`.

### Type
`list[str]`

### Default value
`[]`

### Example usage
```toml
[tool.ruff.lint.flake8-self]
extend-ignore-names = ["_base_manager", "_default_manager",  "_meta"]
```

```toml
[lint.flake8-self]
extend-ignore-names = ["_base_manager", "_default_manager",  "_meta"]
```

## `ignore-names`

### Description
A list of names to ignore when considering `flake8-self` violations.

### Type
`list[str]`

### Default value
`["_make", "_asdict", "_replace", "_fields", "_field_defaults", "_name_", "_value_"]`

### Example usage
```toml
[tool.ruff.lint.flake8-self]
ignore-names = ["_new"]
```

```toml
[lint.flake8-self]
ignore-names = ["_new"]
```
```

--------------------------------

### Use PEP 695 Type Parameters Without Leading Underscores (Python)

Source: https://docs.astral.sh/ruff/rules/private-type-parameter

This snippet shows the recommended way to define PEP 695 type parameters in generic classes and functions. By removing the leading underscore, the code adheres to the UP049 rule, enhancing readability without sacrificing any privacy.

```python
class GenericClass[T]:
    var: T

def generic_function[T](var: T) -> list[T]:
    return var[0]
```

--------------------------------

### Map Included Dependencies in Ruff Analyze

Source: https://docs.astral.sh/ruff/settings

Specifies a mapping from a file path to a list of Python or non-Python file paths/globs that should be considered its dependencies, irrespective of detected imports. This is configured within pyproject.toml or ruff.toml.

```toml
[tool.ruff.analyze.include-dependencies]
"foo/bar.py" = ["foo/baz/*.py"]
"foo/baz/reader.py" = ["configs/bar.json"]

```

```toml
[analyze.include-dependencies]
"foo/bar.py" = ["foo/baz/*.py"]
"foo/baz/reader.py" = ["configs/bar.json"]

```

--------------------------------

### Configure Ruff Executable Path

Source: https://docs.astral.sh/ruff/editors/settings

Specifies a list of paths to Ruff executables. The first existing path in the list is used. This setting overrides the `ruff.importStrategy` setting and is crucial for ensuring Ruff is found and executed correctly.

```json
{
    "ruff.path": ["/home/user/.local/bin/ruff"]
}
```

--------------------------------

### Enable Docstring Linting Rules (D) in Ruff

Source: https://docs.astral.sh/ruff/faq

This configuration enables the `D` rule code prefix in Ruff's linter, which is necessary for docstring-related checks. It should be used in conjunction with a specified docstring convention.

```toml
[tool.ruff.lint]
select = ["D"]

[tool.ruff.lint.pydocstyle]
convention = "google"

```

```toml
[lint]
select = ["D"]

[lint.pydocstyle]
convention = "google"

```

--------------------------------

### Incorrect sys.version_info Comparison (Python)

Source: https://docs.astral.sh/ruff/rules/unrecognized-version-info-check

This snippet demonstrates an incorrect way to compare sys.version_info in Python stub files by comparing against a string. This can lead to unexpected behavior and is flagged by the PYI003 rule.

```python
import sys

if sys.version_info[0] == "2": ...

```

--------------------------------

### Avoid Shallow Copy of os.environ in Python

Source: https://docs.astral.sh/ruff/rules/shallow-copy-environ

Demonstrates the incorrect way to shallow copy `os.environ` using `copy.copy` and the recommended method using `os.environ.copy()`. Shallow copies can lead to unintended mutations of the original environment variables.

```python
import copy
import os

env = copy.copy(os.environ)
```

```python
import os

env = os.environ.copy()
```

--------------------------------

### Avoid broad except clauses in Python

Source: https://docs.astral.sh/ruff/rules/blind-except

This snippet demonstrates how to avoid overly broad 'except' clauses in Python. Catching specific exceptions like FileNotFoundError is preferred over catching general exceptions like BaseException to prevent unexpected behavior and allow for controlled program termination.

```python
try:
    foo()
except BaseException:
    ...

# Use instead:
try:
    foo()
except FileNotFoundError:
    ...

# Exceptions that are re-raised will _not_ be flagged:
try:
    foo()
except BaseException:
    raise

# Exceptions that are logged will _not_ be flagged:
try:
    foo()
except BaseException:
    logging.exception("Something went wrong")

```

--------------------------------

### Configure Pydocstyle Convention in Ruff

Source: https://docs.astral.sh/ruff/settings

Sets the docstring convention for the pydocstyle plugin to 'google', 'numpy', or 'pep257'. Enabling a convention disables rules not part of it, allowing selective re-enabling or disabling of specific rules.

```toml
[tool.ruff.lint.pydocstyle]
convention = "google"

```

```toml
[lint.pydocstyle]
convention = "google"

```

--------------------------------

### Set max complexity for McCabe plugin (Ruff/mccabe)

Source: https://docs.astral.sh/ruff/settings

Configures the maximum McCabe complexity allowed before triggering C901 errors. This helps in identifying overly complex functions.

```toml
[tool.ruff.lint.mccabe]
# Flag errors (C901) whenever the complexity level exceeds 5.
max-complexity = 5

```

```toml
[lint.mccabe]
# Flag errors (C901) whenever the complexity level exceeds 5.
max-complexity = 5

```

--------------------------------

### flake8-errmsg Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-errmsg plugin for handling string lengths in exception messages.

```APIDOC
## `lint.flake8-errmsg` Options

### Description
Options for the `flake8-errmsg` plugin.

#### `max-string-length`

### Description
Maximum string length for string literals in exception messages.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **max-string-length** (int) - Default: `0` - The maximum allowed string length for exception messages.

### Request Example
```toml
[tool.ruff.lint.flake8-errmsg]
max-string-length = 20
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Configure Ruff with Inline JSON (VS Code)

Source: https://docs.astral.sh/ruff/editors/settings

This VS Code configuration snippet uses inline JSON to define Ruff's linting and formatting settings directly within the editor's settings. This is useful for quick adjustments or when an external configuration file is not preferred.

```json
{
    "ruff.configuration": {
        "lint": {
            "unfixable": ["F401"],
            "extend-select": ["TID251"],
            "flake8-tidy-imports": {
                "banned-api": {
                    "typing.TypedDict": {
                        "msg": "Use `typing_extensions.TypedDict` instead",
                    }
                }
            }
        },
        "format": {
            "quote-style": "single"
        }
    }
}
```

--------------------------------

### GitLab CI/CD with Ruff Check and Format

Source: https://docs.astral.sh/ruff/integrations

This GitLab CI/CD configuration sets up Ruff to run both `ruff check` and `ruff format`. It generates a code quality report compatible with GitLab and formats code, ensuring code quality and style consistency within the pipeline.

```yaml
.base_ruff:
  stage: build
  interruptible: true
  image:
    name: ghcr.io/astral-sh/ruff:0.14.8-alpine
  before_script:
    - cd $CI_PROJECT_DIR
    - ruff --version

Ruff Check:
  extends: .base_ruff
  script:
    - ruff check --output-format=gitlab --output-file=code-quality-report.json
  artifacts:
    reports:
      codequality: $CI_PROJECT_DIR/code-quality-report.json

Ruff Format:
  extends: .base_ruff
  script:
    - ruff format --diff
```

--------------------------------

### Enable Length-Based Sorting for Straight Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Sorts only straight imports by their string length. This option does not affect 'from' imports. It's a specific sorting behavior within Ruff's isort linting.

```toml
[tool.ruff.lint.isort]
length-sort-straight = true
```

```toml
[lint.isort]
length-sort-straight = true
```

--------------------------------

### Configure flake8-bandit: Extend Markup Names

Source: https://docs.astral.sh/ruff/settings

Adds extra callable names that function similarly to `markupsafe.Markup`. This setting, defaulting to an empty list, expands the list of recognized safe markup-generating functions.

```toml
[tool.ruff.lint.flake8-bandit]
extend-markup-names = ["webhelpers.html.literal", "my_package.Markup"]
```

```ini
[lint.flake8-bandit]
extend-markup-names = ["webhelpers.html.literal", "my_package.Markup"]
```

--------------------------------

### Configure Minimum Dots for String Imports in Ruff

Source: https://docs.astral.sh/ruff/settings

Sets the minimum number of dots required in a string to be considered a valid import when `detect-string-imports` is enabled. This helps filter out strings that are unlikely to be actual imports. The default value is 2.

```toml
[tool.ruff.analyze]
string-imports-min-dots = 2

```

```toml
[analyze]
string-imports-min-dots = 2

```

--------------------------------

### Prevent XSS with markupsafe.Markup Interpolation (Python)

Source: https://docs.astral.sh/ruff/rules/ruff-unsafe-markup-use

Demonstrates how to safely use markupsafe.Markup by interpolating dynamic content instead of directly embedding it using f-strings or other non-literal methods. This prevents XSS vulnerabilities by ensuring proper escaping mechanisms are employed.

```python
from markupsafe import Markup

content = "<script>alert('Hello, world!')</script>"
html = Markup(f"<b>{content}</b>")  # XSS
```

```python
from markupsafe import Markup

content = "<script>alert('Hello, world!')</script>"
html = Markup("<b>{{}}</b>").format(content)  # Safe
```

```python
from markupsafe import Markup

lines = [
    Markup("<b>heading</b>"),
    "<script>alert('XSS attempt')</script>",
]
html = Markup("<br>".join(lines))  # XSS
```

```python
from markupsafe import Markup

lines = [
    Markup("<b>heading</b>"),
    "<script>alert('XSS attempt')</script>",
]
html = Markup("<br>").join(lines)  # Safe
```

--------------------------------

### Ruff Linting Settings

Source: https://docs.astral.sh/ruff/editors/settings

Configure Ruff's linting behavior, including enabling/disabling linting, preview mode, and rule selection.

```APIDOC
## `lint.enable`

### Description
Whether to enable linting. Set to `false` to use Ruff exclusively as a formatter.

### Type
bool

### Default Value
true

## `lint.preview`

### Description
Whether to enable Ruff's preview mode when linting.

### Type
bool

### Default Value
null

## `lint.select`

### Description
Rules to enable by default. See the documentation.

### Type
string[]

### Default Value
null

## `lint.extendSelect`

### Description
Rules to enable in addition to those in `lint.select`.

### Type
string[]

### Default Value
null

## `lint.ignore`

### Description
Rules to disable by default. See the documentation.

### Type
string[]

### Default Value
null

### Example Usage (lint.select)
```json
{
    "ruff.lint.select": ["E", "F"]
}
```

### Example Usage (lint.extendSelect)
```json
{
    "ruff.lint.extendSelect": ["W"]
}
```

### Example Usage (lint.ignore)
```json
{
    "ruff.lint.ignore": ["E4", "E7"]
}
```
```

--------------------------------

### Avoid subprocess.Popen with preexec_fn in Python

Source: https://docs.astral.sh/ruff/rules/subprocess-popen-preexec-fn

Demonstrates the unsafe usage of `subprocess.Popen` with `preexec_fn` and provides safer alternatives. The `preexec_fn` argument is deprecated and can lead to deadlocks, especially in threaded environments. Use `start_new_session=True` or `process_group=0` (Python 3.11+) instead.

```python
import os, subprocess

subprocess.Popen(foo, preexec_fn=os.setsid)
subprocess.Popen(bar, preexec_fn=os.setpgid(0, 0))

```

```python
import subprocess

subprocess.Popen(foo, start_new_session=True)
subprocess.Popen(bar, process_group=0)  # Introduced in Python 3.11

```

--------------------------------

### Configure Allowed Unused Imports for Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules to ignore when checking for unused imports. This is useful for modules with known side effects upon import, like `hvplot.pandas`. Modules listed are treated as fully-qualified names, and their submodules are also ignored. Default value is an empty list.

```toml
[tool.ruff.lint.pyflakes]
allowed-unused-imports = ["hvplot.pandas"]

```

```toml
[lint.pyflakes]
allowed-unused-imports = ["hvplot.pandas"]

```

--------------------------------

### Configure Autofixing Violations in Ruff

Source: https://docs.astral.sh/ruff/editors/settings

This snippet demonstrates how to enable or disable Quick Fix actions for automatically fixing Ruff violations. The configuration applies to VS Code, Neovim, and Zed.

```json
{
    "ruff.codeAction.fixViolation.enable": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      codeAction = {
        fixViolation = {
          enable = false
        }
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "codeAction": {
            "fixViolation": = {
              "enable": false
            }
          }
        }
      }
    }
  }
}
```

--------------------------------

### Combine Nested With Statements - Python

Source: https://docs.astral.sh/ruff/rules/multiple-with-statements

This rule checks for unnecessary nesting of multiple consecutive context managers. Combining them into a single 'with' statement reduces indentation depth and improves readability. Certain context managers from libraries like 'anyio', 'asyncio', and 'trio' are exempt when used as standalone statements.

```python
with A() as a:
    with B() as b:
        pass

```

```python
with A() as a, B() as b:
    pass

```

--------------------------------

### Avoid f-strings with markupsafe.Markup (Python)

Source: https://docs.astral.sh/ruff/rules/unsafe-markup-use

Demonstrates how to safely use `markupsafe.Markup` by avoiding direct interpolation of f-strings, which can lead to XSS. Instead, it shows the recommended method of using `.format()` to interpolate variables into the `Markup` object, preventing vulnerabilities.

```python
from markupsafe import Markup

content = "<script>alert('Hello, world!')</script>"
html = Markup(f"<b>{content}</b>")  # XSS

# Use instead:
html = Markup("<b>{{}}</b>").format(content)  # Safe
```

--------------------------------

### Specify Python Interpreter Path (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Provides a list of paths to Python interpreters. Only the first path in the list is used. This path is crucial for finding the `ruff` executable when `importStrategy` is 'fromEnvironment' with the native server, or for running `ruff-lsp` otherwise. The default is an empty list.

```json
{
    "ruff.interpreter": ["/home/user/.local/bin/python"]
}
```

--------------------------------

### Remove Files for Pylint Benchmark

Source: https://docs.astral.sh/ruff/contributing

Removes specific files and directories from the CPython repository. This is a preparatory step before benchmarking Pylint, as Pylint may not handle certain file types or test cases present in the original repository.

```bash
rm Lib/test/bad_coding.py \
  Lib/test/bad_coding2.py \
  Lib/test/bad_getattr.py \
  Lib/test/bad_getattr2.py \
  Lib/test/bad_getattr3.py \
  Lib/test/badcert.pem \
  Lib/test/badkey.pem \
  Lib/test/badsyntax_3131.py \
  Lib/test/badsyntax_future10.py \
  Lib/test/badsyntax_future3.py \
  Lib/test/badsyntax_future4.py \
  Lib/test/badsyntax_future5.py \
  Lib/test/badsyntax_future6.py \
  Lib/test/badsyntax_future7.py \
  Lib/test/badsyntax_future8.py \
  Lib/test/badsyntax_future9.py \
  Lib/test/badsyntax_pep3120.py \
  Lib/test/test_asyncio/test_runners.py \
  Lib/test/test_copy.py \
  Lib/test/test_inspect.py \
  Lib/test/test_typing.py
```

--------------------------------

### Configure Native Language Server (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Controls the usage of the native Ruff language server versus `ruff-lsp`. Options are 'on', 'off', or 'auto'. 'auto' selects based on Ruff version and settings, defaulting to the native server for Ruff >= 0.5.3 unless deprecated settings are detected. Defaults to 'auto'.

```json
{
    "ruff.nativeServer": "on"
}
```

--------------------------------

### Apply Fixes with Ruff

Source: https://docs.astral.sh/ruff/tutorial

Runs the Ruff linter with the `--fix` option to automatically resolve fixable issues in the code. This command cleans up common code quality problems.

```bash
$ uv run ruff check --fix

```

--------------------------------

### Avoid IOBase.write in loops, use writelines - Python

Source: https://docs.astral.sh/ruff/rules/for-loop-writes

Demonstrates the inefficient use of `IOBase.write` inside a for loop for writing multiple lines to a file. This pattern is discouraged because `IOBase.writelines` is more idiomatic and often more performant for batch writing. The code shows how to rewrite this using `writelines` for both text and binary files.

```python
from pathlib import Path

with Path("file").open("w") as f:
    for line in lines:
        f.write(line)

with Path("file").open("wb") as f_b:
    for line_b in lines_b:
        f_b.write(line_b.encode())

```

```python
from pathlib import Path

with Path("file").open("w") as f:
    f.writelines(lines)

with Path("file").open("wb") as f_b:
    f_b.writelines(line_b.encode() for line_b in lines_b)

```

--------------------------------

### Shell Command for Sorting Imports with Ruff

Source: https://docs.astral.sh/ruff/formatter

Provides the shell command to sort imports using Ruff's linter (`ruff check`) with the 'I' (isort) select flag and fix enabled, followed by formatting with `ruff format`. This is a workaround until a unified command is available.

```bash
ruff check --select I --fix
ruff format

```

--------------------------------

### Fix pathlib.Path explicit current directory initialization (Python)

Source: https://docs.astral.sh/ruff/rules/path-constructor-current-directory

This snippet demonstrates how to fix the unnecessary explicit initialization of `pathlib.Path` with the current directory. It shows the problematic code using `Path('.')` and the corrected version using the default `Path()`. This rule is derived from `flake8-use-pathlib` and is marked unsafe if comments exist within the parentheses.

```python
from pathlib import Path

_ = Path(".")
```

```python
from pathlib import Path

_ = Path()
```

--------------------------------

### Ruff Lint: Explicit Preview Rules

Source: https://docs.astral.sh/ruff/settings

A boolean flag that determines whether exact rule codes are required to select preview rules. When enabled, preview rules will not be selected by prefixes. This setting can be configured in `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
# Require explicit selection of preview rules.
explicit-preview-rules = true
```

```toml
[lint]
# Require explicit selection of preview rules.
explicit-preview-rules = true
```

--------------------------------

### Enable Preview Mode for Ruff Analyze

Source: https://docs.astral.sh/ruff/settings

Controls whether Ruff's preview mode is enabled. When true, Ruff exposes unstable commands. This setting is configurable in pyproject.toml or ruff.toml.

```toml
[tool.ruff.analyze]
# Enable preview features.
preview = true

```

```toml
[analyze]
# Enable preview features.
preview = true

```

--------------------------------

### Define Default Section for Uncategorized Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

The `default-section` option for the `isort` plugin specifies the default section for any imports that do not fit into the predefined `section-order`. This helps manage the organization of third-party and first-party imports.

```toml
[tool.ruff.lint.isort]
default-section = "first-party"

```

```toml
[lint.isort]
default-section = "first-party"

```

--------------------------------

### Configure flake8-bandit: Allowed Markup Calls

Source: https://docs.astral.sh/ruff/settings

Specifies a list of callable names whose results can be safely passed to `markupsafe.Markup`. This helps prevent false positives for security checks like XSS vulnerabilities. The default value is an empty list.

```toml
[tool.ruff.lint.flake8-bandit]
allowed-markup-calls = ["bleach.clean", "my_package.sanitize"]
```

```ini
[lint.flake8-bandit]
allowed-markup-calls = ["bleach.clean", "my_package.sanitize"]
```

--------------------------------

### Declare Interface with __all__ (Python)

Source: https://docs.astral.sh/ruff/rules/unused-import

Shows how to use the `__all__` variable in an `__init__.py` file to explicitly declare which symbols are part of the module's public interface, thus avoiding unused import warnings.

```python
# __init__.py
import some_module

__all__ = ["some_module"]

```

--------------------------------

### Control __init__.py Import Ignoring in Ruff

Source: https://docs.astral.sh/ruff/settings

A deprecated option that previously controlled the automatic removal of unused imports in `__init__.py` files. While flagged, these imports were not automatically removed. The option is enabled by default but can be opted out of. Users are advised to update their configurations.

```toml
[tool.ruff.lint]
ignore-init-module-imports = false

```

```toml
[lint]
ignore-init-module-imports = false

```

--------------------------------

### Safe version parsing with packaging.version

Source: https://docs.astral.sh/ruff/rules/map-int-version-parsing

Provides the recommended method for parsing version strings using the `packaging.version` library. This approach correctly handles complex version formats that would fail with the map(int, split('.')) method.

```python
import packaging.version as version

version.parse(matplotlib.__version__)
```

--------------------------------

### Configure logger-objects for Equivalent Logging

Source: https://docs.astral.sh/ruff/settings

Defines a list of objects to be treated as `logging.Logger` instances. This is crucial for accurate diagnostics and identifying `logging` deprecations when `logging.Logger` objects are re-exported from common modules. It ensures that these re-exported loggers are recognized correctly by the linter.

```toml
[tool.ruff.lint]
logger-objects = ["logging_setup.logger"]

```

```toml
[lint]
logger-objects = ["logging_setup.logger"]

```

--------------------------------

### GitHub Actions using astral-sh/ruff-action

Source: https://docs.astral.sh/ruff/integrations

This configuration demonstrates using the `ruff-action` GitHub Action to integrate Ruff into a CI workflow. It automatically checks for Ruff violations and can be configured with specific versions and arguments.

```yaml
name: Ruff
on: [ push, pull_request ]
jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/ruff-action@v3
```

--------------------------------

### Improve Exception Reusability with Defined Messages (Python)

Source: https://docs.astral.sh/ruff/rules/raise-vanilla-args

This snippet demonstrates how to refactor exception handling to define messages within the exception class, rather than formatting them at the raise site. This improves the reusability and consistency of exception messages across different parts of the code.

```Python
class CantBeNegative(Exception):
    pass


def foo(x):
    if x < 0:
        raise CantBeNegative(f"{x} is negative")

```

```Python
class CantBeNegative(Exception):
    def __init__(self, number):
        super().__init__(f"{number} is negative")


def foo(x):
    if x < 0:
        raise CantBeNegative(x)

```

--------------------------------

### typing-extensions Configuration

Source: https://docs.astral.sh/ruff/settings

Controls whether to allow imports from the `typing_extensions` module for Python versions prior to a symbol's inclusion in the standard `typing` module.

```APIDOC
## typing-extensions Configuration

### Description
Whether to allow imports from the third-party `typing_extensions` module for Python versions before a symbol was added to the first-party `typing` module.
Many rules try to import symbols from the `typing` module but fall back to `typing_extensions` for earlier versions of Python. This option can be used to disable this fallback behavior in cases where `typing_extensions` is not installed.

### Default value
`true`

### Type
`bool`

### Example usage
```toml
[tool.ruff.lint]
# Disable `typing_extensions` imports
typing-extensions = false
```

```ini
[lint]
# Disable `typing_extensions` imports
typing-extensions = false
```
```

--------------------------------

### Replace For Loop with List Comprehension (Python)

Source: https://docs.astral.sh/ruff/rules/manual-list-comprehension

Demonstrates how to replace a standard for loop used for list transformation with a more concise and performant Python list comprehension. This is applicable when creating a new list based on an existing iterable, potentially with filtering.

```python
original = list(range(10000))
filtered = []
for i in original:
    if i % 2:
        filtered.append(i)
```

```python
original = list(range(10000))
filtered = [x for x in original if x % 2]
```

--------------------------------

### Allow Dict Calls with Keyword Arguments (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Enables the use of keyword arguments in dictionary calls, such as `dict(a=1, b=2)`. This is a boolean setting defaulting to `false`. It impacts how dictionary literals are parsed and linted.

```toml
[tool.ruff.lint.flake8-comprehensions]
allow-dict-calls-with-keyword-arguments = true

```

```toml
[lint.flake8-comprehensions]
allow-dict-calls-with-keyword-arguments = true

```

--------------------------------

### Configure Flake8 Quotes Inline Style (TOML)

Source: https://docs.astral.sh/ruff/settings

Determine the preferred quote style for inline strings, choosing between 'single' and 'double'. Ensure this setting matches the `format.quote-style` configuration for consistent formatting.

```toml
[tool.ruff.lint.flake8-quotes]
inline-quotes = "single"

```

```toml
[lint.flake8-quotes]
inline-quotes = "single"

```

--------------------------------

### flake8-implicit-str-concat Configuration

Source: https://docs.astral.sh/ruff/settings

Configure the flake8-implicit-str-concat plugin for handling implicit string concatenations.

```APIDOC
## `lint.flake8-implicit-str-concat` Options

### Description
Options for the `flake8-implicit-str-concat` plugin.

#### `allow-multiline`

### Description
Whether to allow implicit string concatenations for multiline strings. By default, implicit concatenations of multiline strings are allowed (but continuation lines, delimited with a backslash, are prohibited). Setting `allow-multiline = false` will automatically disable the `explicit-string-concatenation` (`ISC003`) rule.

### Method
Configuration option

### Endpoint
N/A

### Parameters
#### Configuration Options
- **allow-multiline** (bool) - Default: `true` - Controls whether to allow implicit multiline string concatenations.

### Request Example
```toml
[tool.ruff.lint.flake8-implicit-str-concat]
allow-multiline = false
```

### Response
N/A
#### Success Response (200)
N/A

#### Response Example
N/A
```

--------------------------------

### Enforce Exclude Patterns with Ruff

Source: https://docs.astral.sh/ruff/settings

Configures Ruff to strictly enforce `exclude` and `extend-exclude` patterns, even for paths explicitly provided to Ruff. This ensures exclusions are respected universally, which is beneficial for tools like `pre-commit`. Default is false.

```toml
[tool.ruff]
force-exclude = true

```

```toml
force-exclude = true

```

--------------------------------

### Python Instance Method Argument Naming (N805)

Source: https://docs.astral.sh/ruff/rules/invalid-first-argument-name-for-method

This snippet demonstrates the incorrect usage of an instance method argument name and the recommended fix. The linter checks for instance methods that do not use 'self' as the first argument. Configuration options like 'lint.pep8-naming.ignore-names' can be used to exclude specific names from this check.

```python
class Example:
    def function(cls, data): ...

# Use instead:
class Example:
    def function(self, data): ...
```

--------------------------------

### Define custom import sections (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Groups modules into custom import sections. This is useful for organizing imports related to specific libraries or functionalities.

```toml
[tool.ruff.lint.isort.sections]
# Group all Django imports into a separate section.
"django" = ["django"]

```

```toml
[lint.isort.sections]
# Group all Django imports into a separate section.
"django" = ["django"]

```

--------------------------------

### Correct Property and Method Definition (Python)

Source: https://docs.astral.sh/ruff/rules/property-with-parameters

This snippet shows the correct way to handle parameterized operations associated with a property. It separates the property definition from the parameterized method, adhering to Python best practices.

```python
class Cat:
    @property
    def purr(self): ...

    def purr_volume(self, volume): ...

```

--------------------------------

### Enable Zsh Autocompletion for Ruff

Source: https://docs.astral.sh/ruff/configuration

Enables Zsh autocompletion for Ruff by generating the completion script and configuring the Zsh environment. This involves saving the script to a specific directory and updating the Zsh configuration file.

```shell
ruff generate-shell-completion zsh > ~/.zfunc/_ruff
fpath+=~/.zfunc
autoload -Uz compinit && compinit
```

--------------------------------

### Use `format_html` for Safe HTML Rendering (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-mark-safe-usage

This snippet illustrates the recommended, secure way to render HTML with dynamic content using `django.utils.html.format_html`. This function automatically escapes user-provided data, mitigating XSS risks.

```python
from django.utils.html import format_html


def render_username(username):
    return format_html("<i>{}</i>", username)  # username is escaped.

```

--------------------------------

### Python: Check for missing named placeholders in printf-style strings

Source: https://docs.astral.sh/ruff/rules/percent-format-missing-argument

This snippet demonstrates the incorrect usage of printf-style string formatting in Python where a named placeholder '%(greeting)s' is missing from the provided dictionary. It also shows the corrected version where all placeholders are accounted for, preventing potential KeyErrors.

```python
"%(greeting)s, %(name)s" % {"name": "world"}

```

```python
"Hello, %(name)s" % {"name": "world"}

```

--------------------------------

### Illustrate Syntax Error (Python)

Source: https://docs.astral.sh/ruff/rules/syntax-error

This snippet demonstrates a common syntax error in Python where an assignment is incomplete. The corrected version shows the expected syntax for a valid assignment.

```python
x =

```

```python
x = 1

```

--------------------------------

### Replace os.path.getsize with pathlib.Path.stat()

Source: https://docs.astral.sh/ruff/rules/os-path-getsize

This snippet demonstrates how to replace the os.path.getsize function with the more modern and readable pathlib.Path.stat().st_size method. Using pathlib is recommended for path manipulation in Python.

```python
import os

os.path.getsize(__file__)
```

```python
from pathlib import Path

Path(__file__).stat().st_size
```

--------------------------------

### Exclude .pyi files from Ruff formatting

Source: https://docs.astral.sh/ruff/configuration

This configuration snippet demonstrates how to exclude specific file patterns, such as '.pyi' files, from Ruff's formatting process while still allowing them to be linted. It can be applied in either `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.format]
exclude = ["*.pyi"]

```

```toml
[format]
exclude = ["*.pyi"]

```

--------------------------------

### Flatten Nested min/max Calls (Python)

Source: https://docs.astral.sh/ruff/rules/nested-min-max

Demonstrates how to flatten nested `min` and `max` calls into a single call for improved readability. This is the recommended approach by the ruff linter.

```python
minimum = min(1, 2, min(3, 4, 5))
maximum = max(1, 2, max(3, 4, 5))
diff = maximum - minimum
```

```python
minimum = min(1, 2, 3, 4, 5)
maximum = max(1, 2, 3, 4, 5)
diff = maximum - minimum
```

--------------------------------

### Detect sys.version[:1] Usage and Suggest sys.version_info.major Alternative

Source: https://docs.astral.sh/ruff/rules/sys-version-slice1

This snippet demonstrates the problematic usage of `sys.version[:1]` which can lead to incorrect version comparisons, especially with multi-digit major Python versions. It also shows the recommended alternative, `sys.version_info.major`, for accurate major version retrieval.

```python
import sys

sys.version[:1]  # Incorrect: If using Python 10, this evaluates to "1".

# Recommended alternative:
f"{sys.version_info.major}"  # Correct: If using Python 10, this evaluates to "10".
```

--------------------------------

### Run Specific Ruff Benchmarks

Source: https://docs.astral.sh/ruff/contributing

Filters Ruff benchmarks to run only specific ones, such as the lexer benchmarks. This is useful for focusing on particular components. Dependencies: Rust toolchain, Ruff project.

```shell
cargo bench -p ruff_benchmark lexer
```

--------------------------------

### Enforce Ruff Version Requirement

Source: https://docs.astral.sh/ruff/settings

Set a requirement for the Ruff version to ensure consistent results across environments. Exits with an error if the version does not meet the specified PEP 440 specifier.

```toml
[tool.ruff]
required-version = ">=0.0.193"

```

```toml
required-version = ">=0.0.193"

```

--------------------------------

### Use Set Literals Instead of set() with Literals (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-literal-set

This section demonstrates the recommended alternative to unnecessary `set()` calls with literal arguments. It shows how to replace constructs like `set([1, 2])` with the more idiomatic and concise set literal `{1, 2}`. An empty `set()` call is also presented as the correct way to create an empty set.

```python
{1, 2}
{1, 2}
set()
```

--------------------------------

### Replace open/read with pathlib.Path.read_text (Python)

Source: https://docs.astral.sh/ruff/rules/read-whole-file

This snippet demonstrates how to refactor code that reads an entire file using open() and f.read() to a more concise version using pathlib.Path.read_text(). This is beneficial for simplifying file content retrieval and improving code readability. The original code requires explicit file handling with 'with open(...)', while the pathlib approach is more direct.

```python
with open(filename) as f:
    contents = f.read()

```

```python
from pathlib import Path

contents = Path(filename).read_text()

```

--------------------------------

### Replace os.path functions with pathlib in Python

Source: https://docs.astral.sh/ruff/rules

This rule suggests replacing deprecated or less efficient functions from the `os.path` module with their modern equivalents in Python's `pathlib` module. It covers various file system operations like path manipulation, file checks, and directory operations. Using `pathlib` generally leads to more readable and object-oriented code.

```python
from pathlib import Path

# Replaces os.path.abspath()
resolved_path = Path('/path/to/file').resolve()

# Replaces os.chmod()
Path('/path/to/file').chmod(0o755)

# Replaces os.mkdir()
Path('/path/to/new_dir').mkdir()

# Replaces os.makedirs()
Path('/path/to/nested/dirs').mkdir(parents=True)

# Replaces os.rename()
Path('/path/to/old_name').rename('/path/to/new_name')

# Replaces os.replace()
Path('/path/to/old_file').replace('/path/to/new_location')

# Replaces os.rmdir()
Path('/path/to/empty_dir').rmdir()

# Replaces os.remove() and os.unlink()
Path('/path/to/file').unlink()

# Replaces os.getcwd()
current_directory = Path.cwd()

# Replaces os.path.exists()
if Path('/path/to/check').exists():
    pass

# Replaces os.path.expanduser()
user_home_path = Path.home() / '.config'

# Replaces os.path.isdir()
if Path('/path/to/dir').is_dir():
    pass

# Replaces os.path.isfile()
if Path('/path/to/file').is_file():
    pass

# Replaces os.path.islink()
if Path('/path/to/symlink').is_symlink():
    pass

# Replaces os.readlink()
symlink_target = Path('/path/to/symlink').readlink()

# Replaces os.stat()
file_stat = Path('/path/to/file').stat()
file_owner = Path('/path/to/file').owner()
file_group = Path('/path/to/file').group()

# Replaces os.path.isabs()
if Path('/absolute/path').is_absolute():
    pass

# Replaces os.path.join()
combined_path = Path('/base/dir') / 'subdir' / 'file.txt'

# Replaces os.path.basename()
file_name = Path('/path/to/file.txt').name

# Replaces os.path.dirname()
directory_name = Path('/path/to/file.txt').parent

# Replaces os.path.samefile()
if Path('/path/to/file1').samefile('/path/to/file2'):
    pass

# Replaces os.path.splitext()
file_path = Path('/path/to/archive.tar.gz')
file_suffix = file_path.suffix # '.gz'
file_stem = file_path.stem      # 'archive.tar'
file_parent = file_path.parent  # '/path/to'

# Replaces open()
with Path('/path/to/file').open('r') as f:
    content = f.read()

# Replaces os.path.getsize()
file_size = Path('/path/to/file').stat().st_size

# Replaces os.path.getatime()
access_time = Path('/path/to/file').stat().st_atime

# Replaces os.path.getmtime()
modification_time = Path('/path/to/file').stat().st_mtime

# Replaces os.path.getctime()
creation_time = Path('/path/to/file').stat().st_ctime

# Replaces .split(os.sep)
path_parts = Path('/path/to/file').parts # ('/', 'path', 'to', 'file')

# Replaces glob()
for py_file in Path('.').glob('*.py'):
    print(py_file)

# Replaces os.listdir()
for item in Path('.').iterdir():
    print(item)

# Invalid suffix passed to .with_suffix()
# Path('/path/to/file.txt').with_suffix('.tar.gz') # This is valid, but incorrect usage might be flagged.

# Replaces os.symlink()
Path('/path/to/target').symlink_to('/path/to/link')

```

--------------------------------

### Ruff vs. Black: Single 'with' item layout

Source: https://docs.astral.sh/ruff/formatter/black

Ruff applies the same layout for 'with' statements with a single context manager as it does for other compound statements like 'while' and 'if'. Black uses a different layout in this specific scenario.

--------------------------------

### logger-objects Configuration

Source: https://docs.astral.sh/ruff/settings

Specifies a list of objects that should be treated equivalently to a `logging.Logger` object. This is useful for ensuring proper diagnostics for projects that re-export a `logging.Logger` object.

```APIDOC
## logger-objects Configuration

### Description
A list of objects that should be treated equivalently to a `logging.Logger` object. This is useful for ensuring proper diagnostics (e.g., to identify `logging` deprecations and other best-practices) for projects that re-export a `logging.Logger` object from a common module.

### Default value
`[]`

### Type
`list[str]`

### Example usage
```toml
[tool.ruff.lint]
logger-objects = ["logging_setup.logger"]
```

```ini
[lint]
logger-objects = ["logging_setup.logger"]
```
```

--------------------------------

### Async function using non-blocking trio.Path method

Source: https://docs.astral.sh/ruff/rules/blocking-path-method-in-async-function

Shows the correct way to check for file existence in an async function using the non-blocking `trio.Path.exists` method. This avoids blocking the event loop and maintains asynchronous performance.

```python
import trio


async def func():
    path = trio.Path("my_file.txt")
    file_exists = await path.exists()

```

--------------------------------

### Ignoring All Ruff Violations in a File

Source: https://docs.astral.sh/ruff/linter

Demonstrates the file-level directives for completely ignoring all lint violations within a file. This is achieved using '# ruff: noqa' or '# ruff: noqa: {code}' comments.

```python
# ruff: noqa
```

```python
# ruff: noqa: {code}
```

--------------------------------

### Use pathlib.Path.stat().st_ctime instead of os.path.getctime

Source: https://docs.astral.sh/ruff/rules/os-path-getctime

This rule identifies the use of `os.path.getctime` for retrieving the creation time of a file. It recommends using `pathlib.Path.stat().st_ctime` as a more modern and readable alternative, aligning with Python's object-oriented approach to filesystem operations.

```python
import os

os.path.getctime(__file__)
```

```python
from pathlib import Path

Path(__file__).stat().st_ctime
```

--------------------------------

### Documenting Raised Exceptions in Python Functions

Source: https://docs.astral.sh/ruff/rules/docstring-missing-exception

This snippet demonstrates how to properly document exceptions raised within a Python function. It shows the 'before' and 'after' of a function's docstring, highlighting the addition of a 'Raises' section to include exceptions that might be thrown. This improves code clarity and maintainability by informing users about potential error conditions.

```python
class FasterThanLightError(ArithmeticError): ...


def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.
        time: Time spent traveling.

    Returns:
        Speed as distance divided by time.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

```python
class FasterThanLightError(ArithmeticError): ...


def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.
        time: Time spent traveling.

    Returns:
        Speed as distance divided by time.

    Raises:
        FasterThanLightError: If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Configure Max Public Methods for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Specifies the maximum number of public methods allowed within a class. This aims to promote modular and manageable class designs. The default value is 20. This setting corresponds to the `PLR0904` linting rule.

```toml
[tool.ruff.lint.pylint]
max-public-methods = 30

```

```toml
[lint.pylint]
max-public-methods = 30

```

--------------------------------

### Ignore Unused Variadic Arguments (e.g., *args, **kwargs) (TOML)

Source: https://docs.astral.sh/ruff/settings

This configuration option for `flake8-unused-arguments` determines whether to ignore unused variadic arguments, such as `*args` and `**kwargs`. Setting this to `true` prevents warnings for these common argument patterns.

```toml
[tool.ruff.lint.flake8-unused-arguments]
ignore-variadic-names = true

```

```toml
[lint.flake8-unused-arguments]
ignore-variadic-names = true

```

--------------------------------

### Secure File Permissions with os.chmod (Python)

Source: https://docs.astral.sh/ruff/rules/bad-file-permissions

This snippet demonstrates how to use the `os.chmod` function in Python to set file permissions. It contrasts overly permissive settings (0o666) with more secure ones (0o600) to prevent unintended access and potential code execution.

```Python
import os

os.chmod("/etc/secrets.txt", 0o666)  # rw-rw-rw-
```

```Python
import os

os.chmod("/etc/secrets.txt", 0o600)  # rw-------
```

--------------------------------

### Efficient In-Place List Reversal (Python)

Source: https://docs.astral.sh/ruff/rules/list-reverse-copy

Shows the recommended, efficient method for reversing a list in Python using the in-place `.reverse()` method. This approach modifies the list directly without creating a new one, which is preferable when the original list is no longer required. Note that this fix is considered unsafe as it mutates the list in-place.

```python
l = [1, 2, 3]
l.reverse()
```

--------------------------------

### Git Diff After Adding '# noqa'

Source: https://docs.astral.sh/ruff/tutorial

This git diff output shows the changes made to a file after using the '--add-noqa' flag, illustrating the addition of '# noqa: UP035' to the import statement.

```diff
diff --git a/numbers/src/numbers/calculate.py b/numbers/src/numbers/calculate.py
index 71fca60c8d..e92d839f1b 100644
--- a/numbers/src/numbers/calculate.py
+++ b/numbers/src/numbers/calculate.py
@@ -1,4 +1,4 @@
-from typing import Iterable
+from typing import Iterable  # noqa: UP035

```

--------------------------------

### Avoid str.format for Logging Messages (Python)

Source: https://docs.astral.sh/ruff/rules/logging-string-format

This snippet demonstrates how to avoid using `str.format` for logging messages, which can lead to inefficient string formatting. It shows the recommended alternatives using the `extra` keyword argument or deferred formatting.

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("{} - Something happened".format(user))

```

```python
import logging

logging.basicConfig(format="%(user_id)s - %(message)s", level=logging.INFO)

user = "Maria"

logging.info("Something happened", extra={"user_id": user})

```

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened", user)

```

--------------------------------

### Correct default value in stub file

Source: https://docs.astral.sh/ruff/rules/typed-argument-default-in-stub

Shows the correct way to handle default values for typed arguments in stub files using the '...' ellipsis. This is the recommended approach as it clearly indicates a default value without reproducing a complex or platform-dependent literal.

```python
def foo(arg: list[int] = ...) -> None: ...
```

--------------------------------

### Configure Typing Modules for Annotation Inference

Source: https://docs.astral.sh/ruff/settings

Lists modules whose exports should be treated as members of the `typing` module. This enhances type annotation inference for projects that re-export typing symbols from compatibility modules. If omitted, non-`typing` exports are treated as regular Python objects.

```toml
[tool.ruff.lint]
typing-modules = ["airflow.typing_compat"]

```

```toml
[lint]
typing-modules = ["airflow.typing_compat"]

```

--------------------------------

### Correct logging.getLogger() usage with __name__

Source: https://docs.astral.sh/ruff/rules/invalid-get-logger-argument

This snippet shows the recommended way to obtain a logger instance using logging.getLogger() with the '__name__' module-level dunder constant. This ensures that the logger's name is the fully qualified module name, as advised by the logging documentation.

```python
import logging

logger = logging.getLogger(__name__)

```

--------------------------------

### Replace os.replace with pathlib.Path.replace (Python)

Source: https://docs.astral.sh/ruff/rules/os-replace

This snippet demonstrates how to replace the usage of `os.replace` with the more readable and object-oriented `pathlib.Path.replace` method. While `os.replace` is functional, `pathlib` offers better type safety and integration with other path operations. Note that `os` functions might be preferred for performance-critical applications.

```Python
import os

os.replace("old.py", "new.py")
```

```Python
from pathlib import Path

Path("old.py").replace("new.py")
```

--------------------------------

### Append to existing dictionary using dictionary comprehension

Source: https://docs.astral.sh/ruff/rules/manual-dict-comprehension

Shows how to update an existing dictionary with values derived from a 'for' loop by using a dictionary comprehension with the 'update' method. This is useful when modifying a pre-existing dictionary.

```python
pairs = (("a", 1), ("b", 2))
result.update({x: y for x, y in pairs if y % 2})
```

--------------------------------

### Configure flake8-annotations: Suppress Dummy Args

Source: https://docs.astral.sh/ruff/settings

Suppresses `ANN000`-level violations for arguments matching a 'dummy' variable regex (e.g., `_`). This option, defaulting to `false`, helps ignore type warnings for intentionally unused parameters.

```toml
[tool.ruff.lint.flake8-annotations]
suppress-dummy-args = true
```

```ini
[lint.flake8-annotations]
suppress-dummy-args = true
```

--------------------------------

### Configure Ruff Line Length (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Sets the maximum line length for both linting and formatting operations. This helps maintain code style consistency across the project.

```json
{
    "ruff.lineLength": 100
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      lineLength = 100
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "lineLength": 100
        }
      }
    }
  }
}
```

--------------------------------

### Adding '# noqa' Directives to Existing Violations

Source: https://docs.astral.sh/ruff/tutorial

This command demonstrates how to use Ruff's '--add-noqa' flag in conjunction with '--select' to automatically add '# noqa' comments to all existing violations of a specific rule (UP035) in the current directory.

```bash
$ uv run ruff check --select UP035 --add-noqa .
Added 1 noqa directive.

```

--------------------------------

### External Rule Codes in Ruff

Source: https://docs.astral.sh/ruff/settings

Defines a list of rule codes or prefixes that Ruff does not natively support but should be preserved for purposes like validating `# noqa` directives. This is useful for managing directives related to plugins not yet implemented by Ruff. Configuration is supported in both `pyproject.toml` and `ruff.toml`.

```toml
[tool.ruff.lint]
external = ["V"]

```

```toml
[lint]
external = ["V"]

```

--------------------------------

### Replace pprint with return statements in Python

Source: https://docs.astral.sh/ruff/rules/p-print

This snippet shows the recommended way to refactor code that previously used `pprint` for debugging. Instead of printing the dictionary, the function now simply returns the merged dictionary, adhering to best practices for production code.

```python
def merge_dicts(dict_a, dict_b):
    dict_c = {**dict_a, **dict_b}
    return dict_c
```

--------------------------------

### Ruff Logging Options

Source: https://docs.astral.sh/ruff/configuration

Options to control the verbosity and output of Ruff's logging messages.

```APIDOC
## Ruff Logging Options

### Description
Control the level of detail and output for Ruff's logging messages.

### Method
N/A (CLI Options)

### Endpoint
N/A (CLI Options)

### Parameters
#### Command-line Flags
- **-v, --verbose** (boolean) - Enable verbose logging.
- **-q, --quiet** (boolean) - Print diagnostics, but nothing else.
- **-s, --silent** (boolean) - Disable all logging (but still exit with status code "1" upon detecting diagnostics).

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Override Tokens Recognized as Classes for Import Sorting (TOML)

Source: https://docs.astral.sh/ruff/settings

The `classes` option provides an override list of tokens that should always be recognized as classes for `order-by-type` sorting, regardless of their casing. This ensures specific class names are sorted correctly.

```toml
[tool.ruff.lint.isort]
classes = ["SVC"]

```

```toml
[lint.isort]
classes = ["SVC"]

```

--------------------------------

### Configure Max Arguments for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Sets the maximum number of arguments allowed for a function or method definition. This helps enforce simpler function signatures. The default value is 5. This setting corresponds to the `PLR0913` linting rule.

```toml
[tool.ruff.lint.pylint]
max-args = 10

```

```toml
[lint.pylint]
max-args = 10

```

--------------------------------

### Replace os.listdir with Path.iterdir

Source: https://docs.astral.sh/ruff/rules/os-listdir

This snippet demonstrates replacing the use of `os.listdir` with `pathlib.Path.iterdir` for iterating over directory contents. `pathlib` provides a more object-oriented and readable approach to file system operations compared to the lower-level `os` module. This change can improve code clarity and type safety, though potential performance differences exist on older Python versions.

```python
p = "."
for d in os.listdir(p):
    ...
```

```python
if os.listdir(p):
    ...
```

```python
if "file" in os.listdir(p):
    ...
```

```python
p = Path(".")
for d in p.iterdir():
    ...
```

```python
if any(p.iterdir()):
    ...
```

```python
if (p / "file").exists():
    ...
```

--------------------------------

### Replace os.path.isfile with pathlib.Path.is_file()

Source: https://docs.astral.sh/ruff/rules/os-path-isfile

This snippet demonstrates the replacement of `os.path.isfile` with the more readable and type-safe `pathlib.Path.is_file()` method. While `pathlib` offers advantages in modern Python, be aware of potential performance differences compared to string-based operations on older Python versions.

```python
import os

os.path.isfile("docs")
```

```python
from pathlib import Path

Path("docs").is_file()
```

--------------------------------

### Ruff Lint: Dummy Variable Regex

Source: https://docs.astral.sh/ruff/settings

Defines a regular expression to identify and ignore "dummy" variables during linting, particularly for unused variable rules. The default regex is provided, and custom patterns can be set using `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
# Only ignore variables named "_".
dummy-variable-rgx = "^$"
```

```toml
[lint]
# Only ignore variables named "_".
dummy-variable-rgx = "^$"
```

--------------------------------

### Configure Ruff with Inline JSON (Zed)

Source: https://docs.astral.sh/ruff/editors/settings

This Zed editor configuration uses inline JSON to set up the Ruff Language Server. It directly embeds the linting and formatting rules within the editor's LSP settings.

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "configuration": {
            "lint": {
              "unfixable": ["F401"],
              "extend-select": ["TID251"],
              "flake8-tidy-imports": {
                "banned-api": {
                  "typing.TypedDict": {
                    "msg": "Use `typing_extensions.TypedDict` instead"
                  }
                }
              }
            },
            "format": {
              "quote-style": "single"
            }
          }
        }
      }
    }
  }
}
```

--------------------------------

### Correct __iter__ method returning Iterator (Python)

Source: https://docs.astral.sh/ruff/rules/generator-return-from-iter-method

This snippet shows the preferred way to implement an __iter__ method by returning an Iterator. This is considered simpler and more elegant, aligning with the principle that implementation details should not be part of the type contract. This pattern avoids the PYI058 linter warning.

```python
from collections.abc import Iterator


class CustomIterator:
    def __iter__(self) -> Iterator:
        yield from range(42)


class CustomIterator2:
    def __iter__(self) -> Iterator[str]:
        yield from "abdefg"
```

--------------------------------

### Use SHA256 for Secure Hashing

Source: https://docs.astral.sh/ruff/rules/hashlib-insecure-hash-function

This snippet shows the recommended way to perform secure hashing using `hashlib.sha256`. It replaces the insecure `md5` with a cryptographically stronger algorithm, mitigating risks associated with weak hash functions.

```python
import hashlib


def certificate_is_valid(certificate: bytes, known_hash: str) -> bool:
    hash = hashlib.sha256(certificate).hexdigest()
    return hash == known_hash

```

--------------------------------

### Avoid explicit current directory in Path constructor (Python)

Source: https://docs.astral.sh/ruff/rules

This rule advises against explicitly passing the current directory (`.`) to the `pathlib.Path` constructor. While functional, it's often redundant as `Path('.')` refers to the current directory by default. Prefer omitting the argument for clarity when the current directory is intended.

```python
# Instead of:
# current_dir = Path('.')

# Use:
current_dir = Path.cwd()
# Or simply refer to '.' implicitly where needed.

# Example:
# For operations relative to the current directory:
# Path('some_file.txt').read_text()

```

--------------------------------

### Compare sys.version to string literal (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-cmp-str3

This snippet demonstrates an incorrect way to compare `sys.version` to a string literal. This comparison will yield `False` on Python 3.10 and later due to lexicographical ordering. It's recommended to use `sys.version_info` instead.

```python
import sys

sys.version > "3.9"  # `False` on Python 3.10.

```

--------------------------------

### Python: Avoid bare except with try-except statements

Source: https://docs.astral.sh/ruff/rules/bare-except

This snippet demonstrates the problematic use of a bare `except` in a try-except block, which catches all exceptions including critical system ones. It highlights the potential issue of ignoring keyboard interrupts. For improved error handling, specific exceptions or `Exception` should be used instead.

```Python
try:
    raise KeyboardInterrupt("You probably don't mean to break CTRL-C.")
except:
    print("But a bare `except` will ignore keyboard interrupts.")

```

```Python
def run_a_function(some_other_fn):
    try:
        some_other_fn()
    except Exception as e:
        print(f"How exceptional! {e}")

```

--------------------------------

### Configure flake8-annotations: Allow Star Arg Any

Source: https://docs.astral.sh/ruff/settings

Enables suppression of `ANN401` warnings for dynamically typed `*args` and `**kwargs`. This option is useful when dealing with variable arguments where explicit typing might be cumbersome or unnecessary. The default value is `false`.

```toml
[tool.ruff.lint.flake8-annotations]
allow-star-arg-any = true
```

```ini
[lint.flake8-annotations]
allow-star-arg-any = true
```

--------------------------------

### Python: Undocumented Public __init__ Method

Source: https://docs.astral.sh/ruff/rules/undocumented-public-init

This snippet demonstrates a Python class with a public __init__ method that is missing a docstring. Ruff's D107 rule flags this for not providing documentation that describes the method's behavior, arguments, side effects, exceptions, and other relevant information.

```python
class City:
    def __init__(self, name: str, population: int) -> None:
        self.name: str = name
        self.population: int = population

```

--------------------------------

### Implement __hash__ for classes with __eq__ (Python)

Source: https://docs.astral.sh/ruff/rules/eq-without-hash

This snippet demonstrates the correct way to define a class that implements __eq__ by also providing a __hash__ method. This ensures instances of the class are hashable and can be used in dictionaries and sets. It avoids the implicit setting of __hash__ to None, which occurs when only __eq__ is defined.

```python
class Person:
    def __init__(self):
        self.name = "monty"

    def __eq__(self, other):
        return isinstance(other, Person) and other.name == self.name

    def __hash__(self):
        return hash(self.name)

```

--------------------------------

### Incorrect Static Key Dictionary Comprehension (Python)

Source: https://docs.astral.sh/ruff/rules/ruff-static-key-dict-comprehension

Demonstrates a dictionary comprehension using a static key ('key'). This is considered an error because the comprehension will only ever produce a dictionary with a single entry, regardless of the number of items iterated over. This pattern was flagged by the now-removed RUF011 rule.

```python
data = ["some", "Data"]
{"key": value.upper() for value in data}

```

--------------------------------

### Configure Ruff ShowSyntaxErrors (VS Code, Neovim, Zed)

Source: https://docs.astral.sh/ruff/editors/settings

Controls whether syntax error diagnostics are displayed by the Ruff server. Introduced in Ruff v0.5.0. Defaults to true.

```json
{
    "ruff.showSyntaxErrors": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      showSyntaxErrors = false
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "showSyntaxErrors": false
        }
      }
    }
  }
}
```

--------------------------------

### Force Sorting Within Sections (TOML)

Source: https://docs.astral.sh/ruff/settings

Disables sorting straight-style imports before from-style imports. Instead, imports are sorted by module, irrespective of their style. Default value is false.

```toml
[tool.ruff.lint.isort]
force-sort-within-sections = true

```

```toml
[lint.isort]
force-sort-within-sections = true

```

--------------------------------

### Configure Pydoclint to Ignore One-Line Docstrings in Ruff

Source: https://docs.astral.sh/ruff/settings

Configures the pydoclint plugin to skip docstrings that fit entirely on a single line. This setting corresponds to `skip-checking-short-docstrings` in the standalone pydoclint tool.

```toml
[tool.ruff.lint.pydoclint]
ignore-one-line-docstrings = true

```

```toml
[lint.pydoclint]
ignore-one-line-docstrings = true

```

--------------------------------

### Replace os.rename with pathlib.Path.rename

Source: https://docs.astral.sh/ruff/rules/os-rename

This snippet demonstrates how to replace the `os.rename` function with the `Path.rename` method from the `pathlib` module. Using `pathlib` generally improves code readability and type safety for path manipulation tasks. The `os.rename` function is less preferred due to its lower-level API.

```python
import os

os.rename("old.py", "new.py")
```

```python
from pathlib import Path

Path("old.py").rename("new.py")
```

--------------------------------

### Avoid glob.glob() - Use Path.glob()

Source: https://docs.astral.sh/ruff/rules/glob

This snippet demonstrates how to replace the usage of `glob.glob()` with the more readable and object-oriented `Path.glob()` method from the `pathlib` module. The `pathlib` approach is generally preferred for modern Python development.

```python
import glob
import os

glob.glob(os.path.join("my_path", "requirements*.txt"))

```

```python
from pathlib import Path

Path("my_path").glob("requirements*.txt")

```

--------------------------------

### Ruff vs. Black: Implicit String Concatenation in Attribute Access

Source: https://docs.astral.sh/ruff/formatter/black

Explains how Ruff and Black differ in prioritizing line breaks for implicit string concatenations within attribute accesses. Ruff gives them lower priority, avoiding splits unless necessary, while Black splits them more readily.

```python
# Unformatted code
print("aaaaaaaaaaaaaaaa" "aaaaaaaaaaaaaaaa".format(bbbbbbbbbbbbbbbbbb + bbbbbbbbbbbbbbbbbb))

# Black formatted code
print(
    "aaaaaaaaaaaaaaaa"
    "aaaaaaaaaaaaaaaa".format(bbbbbbbbbbbbbbbbbb + bbbbbbbbbbbbbbbbbb)
)

# Ruff formatted code
print(
    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa".format(bbbbbbbbbbbbbbbbbb + bbbbbbbbbbbbbbbbbb)
)
```

--------------------------------

### Python: Add return type annotation to __init__ method

Source: https://docs.astral.sh/ruff/rules/missing-return-type-special-method

Demonstrates the fix for the ANN204 linting error by adding a return type annotation (`-> None`) to an `__init__` method. This improves code clarity and aids type checking.

```python
class Foo:
    def __init__(self, x: int) -> None:
        self.x = x

```

--------------------------------

### Override Tokens Recognized as Constants for Import Sorting (TOML)

Source: https://docs.astral.sh/ruff/settings

The `constants` option allows specifying an override list of tokens to always be recognized as constants for `order-by-type` sorting, irrespective of casing. This ensures that designated constants are grouped appropriately during import sorting.

```toml
[tool.ruff.lint.isort]
constants = ["constant"]

```

```toml
[lint.isort]
constants = ["constant"]

```

--------------------------------

### Safe __annotations__ Access using annotationlib (Python 3.14+)

Source: https://docs.astral.sh/ruff/rules/access-annotations-from-class-dict

Shows the recommended approach for retrieving annotations on Python 3.14 and later using the `annotationlib.get_annotations` function. This provides a stable and forward-compatible way to access annotations.

```python
import annotationlib

annotationlib.get_annotations(foo)
```

--------------------------------

### Create Python Code for Summing Even Numbers

Source: https://docs.astral.sh/ruff/tutorial

Defines a Python function `sum_even_numbers` that takes an iterable of integers and returns the sum of all even numbers within it. This serves as the primary code to be linted and formatted.

```python
from typing import Iterable

import os


def sum_even_numbers(numbers: Iterable[int]) -> int:
    """Given an iterable of integers, return the sum of all even numbers in the iterable."""
    return sum(
        num for num in numbers
        if num % 2 == 0
    )

```

--------------------------------

### Configure Pytest Fixture Parentheses (TOML)

Source: https://docs.astral.sh/ruff/settings

Determines whether function-based pytest fixtures require parentheses. Setting `fixture-parentheses` to `true` enforces the use of `@pytest.fixture()`, while `false` (the default) allows both `@pytest.fixture` and disallows `@pytest.fixture()`.

```toml
[tool.ruff.lint.flake8-pytest-style]
fixture-parentheses = true

```

```toml
[lint.flake8-pytest-style]
fixture-parentheses = true

```

--------------------------------

### Replace os.path.exists with pathlib.Path.exists (Python)

Source: https://docs.astral.sh/ruff/rules/os-path-exists

This snippet demonstrates the recommended replacement for `os.path.exists` using the `pathlib` module. It shows how to use `Path.exists()` for checking file existence, offering improved readability and a more object-oriented approach.

```Python
import os

os.path.exists("file.py")
```

```Python
from pathlib import Path

Path("file.py").exists()
```

--------------------------------

### Python: Avoid older sys.version_info before newer versions

Source: https://docs.astral.sh/ruff/rules/bad-version-info-order

This code snippet demonstrates the incorrect ordering of `sys.version_info` comparisons where older Python versions are checked before newer ones. The rule enforces that branches for newer Python versions should appear first for better readability and convention. This check is primarily for stub files but can be enabled for non-stub files.

```python
import sys

if sys.version_info < (3, 10):
    def read_data(x, *, preserve_order=True): ...

else:
    def read_data(x): ...

```

--------------------------------

### Python: Avoid ==/!= for None Comparison (E711)

Source: https://docs.astral.sh/ruff/rules/none-comparison

This snippet demonstrates how Ruff's E711 rule flags comparisons to None using equality operators (==, !=). It shows the incorrect Python code and the recommended, PEP 8 compliant alternative using 'is' or 'is not'. Fixes may be unsafe due to potential operator overrides.

```python
if arg != None:
    pass
if None == arg:
    pass

# Use instead:
if arg is not None:
    pass

```

--------------------------------

### Ruff Skip Formatting with # fmt: skip

Source: https://docs.astral.sh/ruff/formatter

Demonstrates the usage of the `# fmt: skip` comment in Ruff to suppress formatting for preceding statements, case headers, decorators, function definitions, or class definitions in Python code.

```python
if True:
    pass
elif False: # fmt: skip
    pass

@Test
@Test2 # fmt: skip
def test(): ...

a = [1, 2, 3, 4, 5] # fmt: skip

def test(a, b, c, d, e, f) -> int: # fmt: skip
    pass


```

```python
a = call(
    [
        '1',  # fmt: skip
        '2',
    ],
    b
)


```

```python
a = call(
  [
    '1',
    '2',
  ],
  b
)  # fmt: skip


```

--------------------------------

### Replace os.readlink with pathlib.Path.readlink()

Source: https://docs.astral.sh/ruff/rules/os-readlink

This snippet demonstrates the replacement of the os.readlink function with the pathlib.Path.readlink() method. The os.readlink function is a lower-level API, while Path.readlink() offers a more object-oriented and readable approach. Note that the return type changes from str/bytes to a Path object, which might require adjustments if the return value is used.

```python
import os

os.readlink(file_name)
```

```python
from pathlib import Path

Path(file_name).readlink()
```

--------------------------------

### Efficient List Flattening with itertools.chain in Python

Source: https://docs.astral.sh/ruff/rules/quadratic-list-summation

Illustrates an efficient method for flattening a list of lists using itertools.chain.from_iterable. This approach also provides linear time complexity, making it suitable for large datasets where performance is critical.

```Python
import itertools

lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
list(itertools.chain.from_iterable(lists))
```

--------------------------------

### Secure XML Parsing with Defusedxml

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-expat-builder-usage

This snippet shows the recommended secure way to parse XML using the defusedxml.expatbuilder.parse function. This approach mitigates risks associated with XML attacks.

```python
from defusedxml.expatbuilder import parse

tree = parse("untrusted.xml")

```

--------------------------------

### Configure Max Returns for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Defines the maximum number of return statements allowed within a function or method body. This encourages functions with a single exit point for clarity. The default value is 6. This setting relates to the `PLR0911` linting rule.

```toml
[tool.ruff.lint.pylint]
max-returns = 10

```

```toml
[lint.pylint]
max-returns = 10

```

--------------------------------

### Correct __all__ assignment in Python

Source: https://docs.astral.sh/ruff/rules/invalid-all-format

This snippet shows the correct way to assign values to the `__all__` variable in Python, using a tuple of strings. This adheres to the expected format for defining exported symbols in a module.

```python
__all__ = ("Foo",)

```

--------------------------------

### Type Hinting: typing.List to list[int]

Source: https://docs.astral.sh/ruff/rules/non-pep585-annotation

Demonstrates how to replace the older `typing.List` generic with the modern `list` generic for type hinting, improving code readability and adhering to PEP 585. This change is recommended for Python 3.9 and later.

```python
from typing import List

foo: List[int] = [1, 2, 3]
```

```python
foo: list[int] = [1, 2, 3]
```

--------------------------------

### Configure Max Line Length for Pycodestyle in Ruff

Source: https://docs.astral.sh/ruff/settings

Sets the maximum line length for pycodestyle rule E501. This allows detection of lines exceeding a specified length, even if the formatter wraps lines at a different length. The length calculation considers Unicode width for East Asian characters and emojis.

```toml
[tool.ruff.lint.pycodestyle]
max-line-length = 100

```

```toml
[lint.pycodestyle]
max-line-length = 100

```

--------------------------------

### Legacy pytest.raises, pytest.warns, pytest.deprecated_call Usage

Source: https://docs.astral.sh/ruff/rules/legacy-form-pytest-raises

Demonstrates the incorrect, legacy usage of pytest.raises, pytest.warns, and pytest.deprecated_call without the context manager. This pattern is discouraged due to reduced readability and limited support for additional arguments.

```python
import pytest


excinfo = pytest.raises(ValueError, int, "hello")
pytest.warns(UserWarning, my_function, arg)
pytest.deprecated_call(my_deprecated_function, arg1, arg2)

```

--------------------------------

### Replace os.rmdir with pathlib.Path.rmdir

Source: https://docs.astral.sh/ruff/rules/os-rmdir

This snippet demonstrates the replacement of the os.rmdir function with the more readable pathlib.Path.rmdir() method. The original code uses the os module for directory removal, while the suggested alternative leverages the object-oriented approach of pathlib.

```python
import os

os.rmdir("folder/")

```

```python
from pathlib import Path

Path("folder/").rmdir()

```

--------------------------------

### Secure URL Opening with Scheme Validation (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-url-open-usage

Demonstrates how to securely open URLs in Python by validating that the scheme is either 'http:' or 'https:'. This prevents the use of potentially dangerous schemes like 'file:' or 'ftp:'.

```python
from urllib.request import urlopen

url = input("Enter a URL: ")

if not url.startswith(("http:", "https:")):
    raise ValueError("URL must start with 'http:' or 'https:'")

with urlopen(url) as response:
    ...
```

--------------------------------

### Configure Allowed Dunder Method Names for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Specifies dunder (double underscore) method names to allow, in addition to the default set provided by the Python standard library. This option is part of the `pylint` plugin configuration. Default value is an empty list.

```toml
[tool.ruff.lint.pylint]
allow-dunder-method-names = ["__tablename__", "__table_args__"]

```

```toml
[lint.pylint]
allow-dunder-method-names = ["__tablename__", "__table_args__"]

```

--------------------------------

### Check unused mapping keys in printf-style format strings (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-extra-named-arguments

This code snippet demonstrates the detection of unused named arguments in Python's printf-style string formatting. The linter flags instances where a placeholder exists in the format string but not in the provided dictionary of arguments, or vice versa. The fix is generally safe but can be marked as unsafe if the unused argument involves a function call with side effects.

```python
"Hello, %(name)s" % {"greeting": "Hello", "name": "World"}

```

```python
"Hello, %(name)s" % {"name": "World"}

```

```python
"Hello, %(name)s" % {"greeting": print(1), "name": "World"}

```

--------------------------------

### Correct Wildcard Import Placement (Python)

Source: https://docs.astral.sh/ruff/rules/undefined-local-with-nested-import-star-usage

This snippet shows the recommended way to use wildcard imports in Python, as per PEP 8 and Ruff's F406 rule. The `from math import *` statement is placed at the module's top level, outside of any function or local scope. This avoids potential conflicts with local variables and makes the import's scope clear. Subsequent functions can then use the imported names without issue.

```python
from math import *

def foo(): ...

```

--------------------------------

### Replace logging.warn with logging.warning (Python)

Source: https://docs.astral.sh/ruff/rules/logging-warn

This snippet demonstrates the deprecated use of `logging.warn` and the recommended replacement `logging.warning`. The linter detects this pattern and suggests the correction.

```python
import logging

logging.warn("Something happened")
```

```python
import logging

logging.warning("Something happened")
```

--------------------------------

### Corrected pyproject.toml syntax for authors (TOML)

Source: https://docs.astral.sh/ruff/rules/invalid-pyproject-toml

Shows the correct way to format the 'authors' field in pyproject.toml, using a list of dictionaries, as required by the schema.

```toml
[project]
name = "crab"
version = "1.0.0"
authors = [
  { name = "Ferris the Crab", email = "ferris@example.org" }
]


```

--------------------------------

### Replace os.getcwd with pathlib.Path.cwd

Source: https://docs.astral.sh/ruff/rules/os-getcwd

This snippet demonstrates how to replace the usage of `os.getcwd()` with the more modern and readable `pathlib.Path.cwd()` method. The `os` module provides lower-level path manipulation, while `pathlib` offers a higher-level object-oriented API. This change can improve code readability and type safety, though potential performance differences on older Python versions should be considered.

```python
import os

cwd = os.getcwd()

```

```python
from pathlib import Path

cwd = Path.cwd()

```

--------------------------------

### Avoid Unverified SSL Context in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-unverified-context-usage

This code snippet demonstrates the incorrect usage of `ssl._create_unverified_context` which disables security verification. It is flagged by the S323 rule. The recommended alternative `ssl.create_default_context()` provides secure certificate and hostname validation.

```python
import ssl

context = ssl._create_unverified_context()

```

```python
import ssl

context = ssl.create_default_context()

```

--------------------------------

### Replace os.remove with pathlib.Path.unlink()

Source: https://docs.astral.sh/ruff/rules/os-remove

This snippet demonstrates the replacement of `os.remove` with `pathlib.Path.unlink()`. It highlights the shift from the lower-level `os` module API to the more readable, high-level `pathlib` API for file deletion. Note that while `pathlib` enhances readability, it might have performance implications on older Python versions.

```python
import os

os.remove("file.py")
```

```python
from pathlib import Path

Path("file.py").unlink()
```

--------------------------------

### Use pathlib.Path.is_dir() instead of os.path.isdir()

Source: https://docs.astral.sh/ruff/rules/os-path-isdir

This rule flags the use of os.path.isdir, recommending the more object-oriented approach with pathlib.Path.is_dir(). While pathlib improves readability, be mindful of potential performance differences compared to string-based os.path operations, especially on older Python versions.

```python
import os

os.path.isdir("docs")
```

```python
from pathlib import Path

Path("docs").is_dir()
```

--------------------------------

### Correct Exception Handling with Tuples in Python

Source: https://docs.astral.sh/ruff/rules/binary-op-exception

Demonstrates the incorrect use of binary operators ('or') to catch multiple exceptions and provides the correct syntax using a tuple for multiple exception handling in Python's try-except blocks. This rule is derived from Pylint.

```python
try:
    pass
except A or B:
    pass
```

```python
try:
    pass
except (A, B):
    pass
```

--------------------------------

### Detect __init__ Methods Returning Generators (Python)

Source: https://docs.astral.sh/ruff/rules/yield-in-init

This Python code snippet demonstrates a class where the __init__ method incorrectly uses a yield expression. This violates the expected behavior of a constructor, which should return None, and instead causes the method to return a generator object, leading to runtime errors.

```python
class InitIsGenerator:
    def __init__(self, i):
        yield i

```

--------------------------------

### Ruff vs. Black: Implicit String Concatenation

Source: https://docs.astral.sh/ruff/formatter/black

Demonstrates how Ruff and Black handle implicitly concatenated strings. Ruff merges them if the entire string fits on one line, while Black's behavior can be unstable. Ruff also preserves multi-line formatting for these strings when necessary for compatibility.

```python
# Input
def test(max_history):
    raise argparse.ArgumentTypeError(
        f"The value of `--max-history {max_history}` " f"is not a positive integer."
    )

# Black
def test(max_history):
    raise argparse.ArgumentTypeError(
        f"The value of `--max-history {max_history}` " f"is not a positive integer."
    )

# Ruff
def test(max_history):
    raise argparse.ArgumentTypeError(
        f"The value of `--max-history {max_history}` is not a positive integer."
    )
```

```python
# Input
a = (
    r"aaaaaaa"
    "bbbbbbbbbbbb"
)

# Black
a = r"aaaaaaa" "bbbbbbbbbbbb"

# Ruff
a = (
    r"aaaaaaa"
    "bbbbbbbbbbbb"
)
```

--------------------------------

### Fix Static Key Dictionary Comprehension (Python)

Source: https://docs.astral.sh/ruff/rules/static-key-dict-comprehension

This snippet demonstrates how to correct a dictionary comprehension that incorrectly uses a static key. The original code creates a dictionary with a single key, overwriting previous entries. The corrected version uses a dynamic key derived from the iteration.

```python
data = ["some", "Data"]
# Incorrect: uses a static key "key"
incorrect_dict = {"key": value.upper() for value in data}

# Correct: uses a dynamic key derived from the iteration
correct_dict = {value: value.upper() for value in data}
```

--------------------------------

### Modern pytest.raises, pytest.warns, pytest.deprecated_call Usage

Source: https://docs.astral.sh/ruff/rules/legacy-form-pytest-raises

Illustrates the recommended, modern usage of pytest.raises, pytest.warns, and pytest.deprecated_call using the 'with' statement as a context manager. This approach enhances readability and allows for the use of additional keyword arguments.

```python
import pytest


with pytest.raises(ValueError) as excinfo:
    int("hello")
with pytest.warns(UserWarning):
    my_function(arg)
with pytest.deprecated_call():
    my_deprecated_function(arg1, arg2)

```

--------------------------------

### Ignoring a Specific Rule with '# noqa'

Source: https://docs.astral.sh/ruff/tutorial

This Python code snippet demonstrates how to ignore a specific Ruff lint rule (UP035) for a particular line using a '# noqa' comment.

```python
from typing import Iterable  # noqa: UP035


def sum_even_numbers(numbers: Iterable[int]) -> int:
    """Given an iterable of integers, return the sum of all even numbers in the iterable."""
    return sum(num for num in numbers if num % 2 == 0)

```

--------------------------------

### Configure Max Positional Arguments for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Sets the maximum number of positional arguments allowed for a function or method definition. If not specified, it defaults to the value of `max-args`. The default value is 5. This setting relates to the `PLR0917` linting rule.

```toml
[tool.ruff.lint.pylint]
max-positional-args = 3

```

```toml
[lint.pylint]
max-positional-args = 3

```

--------------------------------

### Prefer Direct Attribute Access (Python)

Source: https://docs.astral.sh/ruff/rules/get-attr-with-constant

This snippet shows the recommended alternative to using `getattr` with a constant attribute name. Direct attribute access (`obj.attribute`) is preferred because it is more concise, readable, and avoids potential normalization issues that can arise with `getattr` when dealing with non-ASCII characters.

```Python
obj.foo
```

--------------------------------

### Avoid f-strings for logging (Python)

Source: https://docs.astral.sh/ruff/rules/logging-f-string

Demonstrates the incorrect use of f-strings for logging and provides two corrected alternatives using the `extra` keyword argument and direct argument passing. This rule aims to prevent eager string formatting that occurs even when log messages are not processed.

```Python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info(f"{user} - Something happened")

```

```Python
import logging

logging.basicConfig(format="%(user_id)s - %(message)s", level=logging.INFO)

user = "Maria"

logging.info("Something happened", extra=dict(user_id=user))

```

```Python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened", user)

```

--------------------------------

### Require Pytest Raises Exception Matching (TOML)

Source: https://docs.astral.sh/ruff/settings

Define exception names that mandate the use of a 'match=' parameter in pytest.raises() calls. Supports glob patterns for flexible matching. Includes a comprehensive default list.

```toml
[tool.ruff.lint.flake8-pytest-style]
raises-require-match-for = ["requests.RequestException"]

```

```toml
[lint.flake8-pytest-style]
raises-require-match-for = ["requests.RequestException"]

```

--------------------------------

### Avoid Hardcoded Temporary File Paths (Python)

Source: https://docs.astral.sh/ruff/rules/hardcoded-temp-file

This code snippet demonstrates the insecure practice of using a hardcoded path for a temporary file. It is recommended to use Python's `tempfile` module for secure temporary file handling.

```Python
with open("/tmp/foo.txt", "w") as file:
    ...

```

```Python
import tempfile

with tempfile.NamedTemporaryFile() as file:
    ...

```

--------------------------------

### Ban Specific APIs in Ruff Imports

Source: https://docs.astral.sh/ruff/settings

Define a dictionary of banned API members for the `flake8-tidy-imports` plugin in Ruff. Each entry specifies the banned API and a message explaining why it's banned or recommending an alternative.

```toml
[tool.ruff.lint.flake8-tidy-imports.banned-api]
"cgi".msg = "The cgi module is deprecated, see https://peps.python.org/pep-0594/#cgi."
"typing.TypedDict".msg = "Use typing_extensions.TypedDict instead."
```

```toml
[lint.flake8-tidy-imports.banned-api]
"cgi".msg = "The cgi module is deprecated, see https://peps.python.org/pep-0594/#cgi."
"typing.TypedDict".msg = "Use typing_extensions.TypedDict instead."
```

--------------------------------

### Configure Line Ending Style for Ruff Formatting

Source: https://docs.astral.sh/ruff/settings

Sets the character Ruff uses at the end of a line. Options include 'auto' (detects automatically), 'lf' (newline \n), 'cr-lf' (carriage return + newline \r\n), and 'native' (OS default).

```toml
[tool.ruff.format]
# Use \n line endings for all files
line-ending = "lf"

```

```toml
[format]
# Use \n line endings for all files
line-ending = "lf"

```

--------------------------------

### Specify Fixable Rules in Ruff

Source: https://docs.astral.sh/ruff/settings

Determines which rule codes or prefixes are considered fixable by Ruff. By default, all rules are fixable. This option allows limiting fix behavior to specific rules, such as 'E' and 'F'. Configuration is supported in `pyproject.toml` and `ruff.toml`.

```toml
[tool.ruff.lint]
fixable = ["E", "F"]

```

```toml
[lint]
fixable = ["E", "F"]

```

--------------------------------

### Avoid exit() and quit() with sys.exit() in Python

Source: https://docs.astral.sh/ruff/rules/sys-exit-alias

This snippet demonstrates the incorrect usage of `exit()` and `quit()` which can lead to `NameError` if the `site` module is not imported. It is recommended to use `sys.exit()` instead, as the `sys` module is guaranteed to be available in all Python environments. The fix is considered unsafe due to potential behavioral changes with tuple arguments and environments where `site` is not imported.

```python
if __name__ == "__main__":
    exit()

```

```python
import sys

if __name__ == "__main__":
    sys.exit()

```

--------------------------------

### Define Forced Separate Imports (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies a list of modules that should be separated into auxiliary import blocks, maintaining the order provided. Default value is an empty list.

```toml
[tool.ruff.lint.isort]
forced-separate = ["tests"]

```

```toml
[lint.isort]
forced-separate = ["tests"]

```

--------------------------------

### Performance Comparison: List Comprehension vs. Generator (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-comprehension-in-call

Illustrates the significant performance difference between using a list comprehension and a generator expression with the `all()` function, highlighting the benefits of short-circuiting. The generator expression is orders of magnitude faster when early exit is possible.

```python
In [1]: %timeit all([i for i in range(1000)])
8.14 s  25.4 ns per loop (mean  std. dev. of 7 runs, 100,000 loops each)
```

```python
In [2]: %timeit all(i for i in range(1000))
212 ns  0.892 ns per loop (mean  std. dev. of 7 runs, 1,000,000 loops each)
```

--------------------------------

### Avoid os.path.basename, use pathlib.Path.name

Source: https://docs.astral.sh/ruff/rules/os-path-basename

This rule flags the use of `os.path.basename` and suggests replacing it with the more modern and readable `pathlib.Path.name` method. `pathlib` provides an object-oriented approach to filesystem paths, generally leading to cleaner code.

```python
import os

os.path.basename(__file__)
```

```python
from pathlib import Path

Path(__file__).name
```

--------------------------------

### Optimize Consecutive List Appends with Extend (Python)

Source: https://docs.astral.sh/ruff/rules/repeated-append

This snippet shows the recommended way to add multiple elements to a Python list efficiently using the 'extend' method, which is suggested as an alternative to repeated 'append' calls.

```Python
nums = [1, 2, 3]

nums.extend((4, 5, 6))

```

--------------------------------

### Replace If-Else with Dict.get in Python

Source: https://docs.astral.sh/ruff/rules/if-else-block-instead-of-dict-get

This code demonstrates how to refactor an if-else block used for dictionary key checking and assignment into a more concise `dict.get()` call. It handles cases where a key might not exist by providing a default value.

```python
foo = {}
if "bar" in foo:
    value = foo["bar"]
else:
    value = 0
```

```python
foo = {}
value = foo.get("bar", 0)
```

--------------------------------

### Correct Multi-line Implicit String Concatenation (Python)

Source: https://docs.astral.sh/ruff/rules/multi-line-implicit-string-concatenation

Shows the recommended way to handle multi-line strings using implicit concatenation within parentheses. This approach enhances code readability and is preferred over backslash line continuation.

```python
z = (
    "The quick brown fox jumps over the lazy "
    "dog."
)

```

--------------------------------

### Use itertools.pairwise() instead of zip() for Python

Source: https://docs.astral.sh/ruff/rules/zip-instead-of-pairwise

This snippet demonstrates the incorrect use of `zip()` to iterate over successive pairs of elements in Python and shows the recommended alternative using `itertools.pairwise()`. The `zip()` approach is less readable and can be error-prone compared to `pairwise()`, which explicitly conveys the intent.

```python
letters = "ABCD"
zip(letters, letters[1:])  # ("A", "B"), ("B", "C"), ("C", "D")
```

```python
from itertools import pairwise

letters = "ABCD"
pairwise(letters)  # ("A", "B"), ("B", "C"), ("C", "D")
```

--------------------------------

### Ignore Specific Rules in Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies a list of rule codes or prefixes to be ignored by Ruff. This can include exact rules, categories, or sub-categories. `ignore` rules take precedence over `select` rules when conflicts arise due to specificity. Configuration is available in `pyproject.toml` and `ruff.toml`.

```toml
[tool.ruff.lint]
ignore = ["F841"]

```

```toml
[lint]
ignore = ["F841"]

```

--------------------------------

### Python: Raise with 'from' in except block

Source: https://docs.astral.sh/ruff/rules/raise-without-from-inside-except

Illustrates the correct way to use 'raise' within an 'except' block by including a 'from' clause (either 'from None' or 'from exc'). This ensures proper exception chaining, aiding in debugging by preserving the original exception context.

```python
try:
    ...
except FileNotFoundError as exc:
    if ...:
        raise RuntimeError("...") from None
    else:
        raise UserWarning("...") from exc

```

--------------------------------

### Configure Unfixable Rules

Source: https://docs.astral.sh/ruff/settings

Specifies a list of rule codes or prefixes that Ruff should consider non-fixable. This prevents Ruff from automatically attempting to correct violations associated with these rules, providing finer control over automated code fixes.

```toml
[tool.ruff.lint]
unfixable = ["F401"]

```

```toml
[lint]
unfixable = ["F401"]

```

--------------------------------

### Extend Gettext Function Names (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Adds additional function names to be recognized as internationalization (i18n) calls, beyond the default set. This is useful for projects using custom i18n functions. The default list includes `_`, `gettext`, and `ngettext`.

```toml
[tool.ruff.lint.flake8-gettext]
extend-function-names = ["ugettetxt"]

```

```toml
[lint.flake8-gettext]
extend-function-names = ["ugettetxt"]

```

--------------------------------

### Avoid .format() in Exception Constructors (Python)

Source: https://docs.astral.sh/ruff/rules/dot-format-in-exception

This snippet demonstrates the incorrect and correct way to format strings when raising exceptions in Python. It highlights how using `.format()` directly in the exception constructor can lead to redundant error messages in tracebacks. The fix involves pre-formatting the message into a variable.

```python
sub = "Some value"
raise RuntimeError("'{}' is incorrect".format(sub))

```

```python
sub = "Some value"
msg = "'{}' is incorrect".format(sub)
raise RuntimeError(msg)

```

--------------------------------

### Configure Pydocstyle Property Decorators in Ruff

Source: https://docs.astral.sh/ruff/settings

Defines a list of decorators that identify methods as properties, in addition to the built-in `@property` and `@functools.cached_property`. Methods decorated with these will be treated as properties by Ruff, allowing for non-imperative summary lines.

```toml
[tool.ruff.lint.pydocstyle]
property-decorators = ["gi.repository.GObject.Property"]

```

```toml
[lint.pydocstyle]
property-decorators = ["gi.repository.GObject.Property"]

```

--------------------------------

### Configure Disabling Rule Comments in Ruff

Source: https://docs.astral.sh/ruff/editors/settings

This snippet shows how to enable or disable the display of Quick Fix actions for disabling Ruff rules using `noqa` suppression comments. It is applicable to VS Code, Neovim, and Zed configurations.

```json
{
    "ruff.codeAction.disableRuleComment.enable": false
}
```

```lua
require('lspconfig').ruff.setup {
  init_options = {
    settings = {
      codeAction = {
        disableRuleComment = {
          enable = false
        }
      }
    }
  }
}
```

```json
{
  "lsp": {
    "ruff": {
      "initialization_options": {
        "settings": {
          "codeAction": {
            "disableRuleComment": {
              "enable": false
            }
          }
        }
      }
    }
  }
}
```

--------------------------------

### Python 3 Print using logging module

Source: https://docs.astral.sh/ruff/rules/invalid-print-syntax

This snippet presents another Python 3 alternative for handling error messages using the 'logging' module. This is often the preferred method for more complex applications requiring structured logging.

```python
import logging

logging.error("Hello, world!")

```

--------------------------------

### Avoid append/extend/remove on __all__ (Python)

Source: https://docs.astral.sh/ruff/rules/unsupported-method-call-on-all

Demonstrates the incorrect usage of append, extend, and remove methods on the __all__ variable, which can lead to compatibility issues with type checkers. It then shows the recommended alternative using the += operator for adding elements, ensuring consistent behavior across different type checking tools.

```python
import sys

__all__ = ["A", "B"]

if sys.version_info >= (3, 10):
    __all__.append("C")

if sys.version_info >= (3, 11):
    __all__.remove("B")

```

```python
import sys

__all__ = ["A"]

if sys.version_info < (3, 11):
    __all__ += ["B"]

if sys.version_info >= (3, 10):
    __all__ += ["C"]

```

--------------------------------

### Add Missing Required Imports (Python)

Source: https://docs.astral.sh/ruff/rules/missing-required-import

This rule automatically adds any imports specified in the `lint.isort.required-imports` configuration option to the top of Python files. This ensures that essential imports, such as `from __future__ import annotations`, are present, preventing potential errors or unexpected behavior.

```Python
import typing

```

```Python
from __future__ import annotations

import typing

```

--------------------------------

### Incorrect printf-style formatting with mapping (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-expected-sequence

This snippet demonstrates an incorrect usage of printf-style string formatting in Python where a mapping (dictionary) is used without named placeholders. This will result in a TypeError. The code expects a positional argument but receives a mapping.

```python
"%s, %s" % {"greeting": "Hello", "name": "World"}

```

--------------------------------

### Use Extend with Generator for Appending (Python)

Source: https://docs.astral.sh/ruff/rules/manual-list-comprehension

Shows how to efficiently append elements from an iterable to an existing list using the `extend` method combined with a generator expression. This is preferred over repeatedly using `append` within a for loop when the source is an iterable that can be processed lazily.

```python
original = list(range(10000))
filtered.extend(x for x in original if x % 2)
```

--------------------------------

### Incorrect printf-style formatting with named placeholders (Python)

Source: https://docs.astral.sh/ruff/rules/percent-format-expected-mapping

This snippet demonstrates the incorrect usage of named placeholders in Python's printf-style string formatting. It shows a format string with named placeholders expecting a map, but receiving a tuple instead, which leads to a TypeError.

```python
"%(greeting)s, %(name)s" % ("Hello", "World")

```

--------------------------------

### Configure Pydocstyle to Ignore Decorators in Ruff

Source: https://docs.astral.sh/ruff/settings

Specifies a list of fully-qualified decorators for which docstrings should be ignored by the pydocstyle plugin. This is useful for decorators that inherently document behavior, like `@typing.overload`.

```toml
[tool.ruff.lint.pydocstyle]
ignore-decorators = ["typing.overload"]

```

```toml
[lint.pydocstyle]
ignore-decorators = ["typing.overload"]

```

--------------------------------

### Python: Use removeprefix/removesuffix for exact string removal

Source: https://docs.astral.sh/ruff/rules/strip-with-multi-characters

Illustrates the preferred Python 3.9+ approach using str.removesuffix() to remove an exact suffix from a string, offering clearer intent and more predictable behavior compared to .strip() with multi-character arguments.

```python
"text.txt".removesuffix(".txt")  # "text"

```

--------------------------------

### Set Ruff Linter Run Trigger (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Defines when Ruff linting is triggered. Options are 'onType' for real-time linting or 'onSave' for linting upon file save. This setting is deprecated and only affects `ruff-lsp`. The default is 'onType'.

```json
{
    "ruff.lint.run": "onSave"
}
```

--------------------------------

### Python 3 Print using sys.stderr.write

Source: https://docs.astral.sh/ruff/rules/invalid-print-syntax

This snippet illustrates an alternative Python 3 method for writing directly to sys.stderr using its 'write' method. This approach is suitable for cases where explicit stream writing is preferred.

```python
import sys

sys.stderr.write("Hello, world!\n")

```

--------------------------------

### Ignore Standard Library Files (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Determines whether to ignore files inferred as part of the Python standard library. This setting is deprecated and only used by `ruff-lsp`. The default value is `true`.

```json
{
    "ruff.ignoreStandardLibrary": false
}
```

--------------------------------

### Python: Demonstrate FA100 Type Annotation Rule

Source: https://docs.astral.sh/ruff/rules/future-rewritable-type-annotation

This Python code snippet demonstrates the effect of the FA100 linter rule. It shows an initial function with type annotations that can be simplified, the necessary `from __future__ import annotations` import to enable these simplifications, and the final state after applying pyupgrade rules for more concise type hints.

```python
from typing import List, Dict, Optional


def func(obj: Dict[str, Optional[int]]) -> None: ...

```

```python
from __future__ import annotations

from typing import List, Dict, Optional


def func(obj: Dict[str, Optional[int]]) -> None: ...

```

```python
from __future__ import annotations


def func(obj: dict[str, int | None]) -> None: ...

```

--------------------------------

### Configure Allowed Markup Calls in Ruff

Source: https://docs.astral.sh/ruff/settings

The `allowed-markup-calls` setting for the `ruff` plugin allows specifying callable names whose results can be safely passed to `markupsafe.Markup`. This helps avoid false positives for security-sensitive sanitization functions. The option expects fully-qualified names.

```toml
[tool.ruff.lint.ruff]
allowed-markup-calls = ["bleach.clean", "my_package.sanitize"]

```

```toml
[lint.ruff]
allowed-markup-calls = ["bleach.clean", "my_package.sanitize"]

```

--------------------------------

### Convert String with Prefix to Integer (Python)

Source: https://docs.astral.sh/ruff/rules/int-on-sliced-str

Demonstrates the incorrect way to convert a string with a numeric prefix (e.g., '0xABC') to an integer by slicing the string and explicitly providing the base. This is contrasted with the recommended, simpler method.

```python
num = "0xABC"

if num.startswith("0b"):
    i = int(num[2:], 2)
elif num.startswith("0o"):
    i = int(num[2:], 8)
elif num.startswith("0x"):
    i = int(num[2:], 16)

print(i)


```

```python
num = "0xABC"

i = int(num, 0)

print(i)


```

--------------------------------

### Control splitting on trailing comma (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Determines if imports are split onto new lines when a trailing comma is present in a multi-line import. Setting to false prevents folding into a single line.

```toml
[tool.ruff.lint.isort]
split-on-trailing-comma = false

```

```toml
[lint.isort]
split-on-trailing-comma = false

```

--------------------------------

### Recommended async timeout using asyncio.timeout

Source: https://docs.astral.sh/ruff/rules/async-function-with-timeout

This snippet illustrates the preferred way to handle timeouts in async functions using `asyncio.timeout` as a context manager. This adheres to structured concurrency principles.

```python
async with asyncio.timeout(2):
    await long_running_task()
```

--------------------------------

### Enable Future Annotations in Ruff

Source: https://docs.astral.sh/ruff/settings

Controls whether Ruff can add `from __future__ import annotations` imports to simplify fixes or enable new diagnostics. This can be beneficial for rules like `TC001`, `TC002`, and `TC003`. The setting is configurable in `pyproject.toml` and `ruff.toml`.

```toml
[tool.ruff.lint]
future-annotations = true

```

```toml
[lint]
future-annotations = true

```

--------------------------------

### Use logging.exception instead of logging.error with exc_info=True (Python)

Source: https://docs.astral.sh/ruff/rules/logging-exc-info

This snippet demonstrates the incorrect and correct usage for logging exceptions in Python. The linter flags the use of `logging.error` with `exc_info=True` because `logging.exception` is more concise and clearly conveys the intent of logging an exception. This rule applies to direct `logging` module usage, `flask.current_app.logger`, and objects heuristically identified as loggers.

```python
import logging

try:
    ...
except ValueError:
    logging.error("Exception occurred", exc_info=True)

# Use instead:

import logging

try:
    ...
except ValueError:
    logging.exception("Exception occurred")
```

--------------------------------

### Configure Extended Generics for Ruff

Source: https://docs.astral.sh/ruff/settings

Defines additional functions or classes to be treated as generic types. This allows subscripts to be interpreted as type annotations, such as `ForeignKey` in `django.db.models.ForeignKey["User"]`. Expects a list of fully-qualified names. Default value is an empty list.

```toml
[tool.ruff.lint.pyflakes]
extend-generics = ["django.db.models.ForeignKey"]

```

```toml
[lint.pyflakes]
extend-generics = ["django.db.models.ForeignKey"]

```

--------------------------------

### Python: Correct Airflow Operator Initialization

Source: https://docs.astral.sh/ruff/rules/airflow-variable-name-task-id-mismatch

Demonstrates the correct way to initialize an Airflow Operator in Python, ensuring the variable name matches the task_id. This is crucial for maintaining consistency and readability within Airflow DAGs. No external dependencies are required beyond the Airflow library.

```Python
from airflow.operators import PythonOperator


my_task = PythonOperator(task_id="my_task")
```

--------------------------------

### Ruff Format Suppression with # fmt: on/off

Source: https://docs.astral.sh/ruff/formatter

Illustrates how to use `# fmt: off` and `# fmt: on` comments to temporarily disable and re-enable Ruff's code formatting for specific blocks of Python code. These pragmas are enforced at the statement level.

```python
# fmt: off
not_formatted=3
also_not_formatted=4
# fmt: on


```

```python
[
    # fmt: off
    '1',
    # fmt: on
    '2',
]


```

```python
# fmt: off
[
    '1',
    '2',
]
# fmt: on


```

--------------------------------

### Configure Line Length in Ruff

Source: https://docs.astral.sh/ruff/settings

Sets the maximum line length for enforcing violations like E501 and for line wrapping by `isort` and the formatter. The length is calculated based on characters, with special handling for East Asian characters and emojis. The value must be between 1 and 320. Default is 88.

```toml
[tool.ruff]
# Allow lines to be as long as 120.
line-length = 120

```

```toml
# Allow lines to be as long as 120.
line-length = 120

```

--------------------------------

### Detect Weak Cryptographic Key Sizes in Python

Source: https://docs.astral.sh/ruff/rules/weak-cryptographic-key

This snippet demonstrates the detection of weak cryptographic key sizes in Python using the 'cryptography' library. It highlights the use of small key sizes (512 bits for DSA, SECT163K1 for EC) that are vulnerable. It's recommended to use larger key sizes for security.

```python
from cryptography.hazmat.primitives.asymmetric import dsa, ec

dsa.generate_private_key(key_size=512)
ec.generate_private_key(curve=ec.SECT163K1())

```

```python
from cryptography.hazmat.primitives.asymmetric import dsa, ec

dsa.generate_private_key(key_size=4096)
ec.generate_private_key(curve=ec.SECP384R1())

```

--------------------------------

### Python: Refactor with Separate Functions

Source: https://docs.astral.sh/ruff/rules/boolean-type-hint-positional-argument

Illustrates refactoring the boolean positional argument pattern into separate, clearly named functions in Python. This approach enhances readability and reduces ambiguity by eliminating the need for boolean flags.

```python
from math import ceil, floor


def round_up(number: float) -> int:
    return ceil(number)

def round_down(number: float) -> int:
    return floor(number)


round_up(1.5)
round_down(1.5)
```

--------------------------------

### Python 3 Print with File Keyword Argument

Source: https://docs.astral.sh/ruff/rules/invalid-print-syntax

This snippet shows the recommended Python 3 way to print to a specific file-like object, such as sys.stderr, using the 'file' keyword argument of the print function.

```python
print("Hello, world!", file=sys.stderr)

```

--------------------------------

### Python: Simplify if-else return with dictionary lookup

Source: https://docs.astral.sh/ruff/rules/if-else-block-instead-of-dict-lookup

Replaces multiple consecutive if-else statements that return values with a dictionary lookup. This improves code readability and reduces verbosity. The dictionary maps conditions to their corresponding return values, with a default value handled by the `.get()` method.

```Python
def find_phrase(x):
    if x == 1:
        return "Hello"
    elif x == 2:
        return "Goodbye"
    elif x == 3:
        return "Good morning"
    else:
        return "Goodnight"
```

```Python
def find_phrase(x):
    phrases = {1: "Hello", 2: "Goodye", 3: "Good morning"}
    return phrases.get(x, "Goodnight")
```

--------------------------------

### Define Gettext Function Names (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Specifies the function names that Ruff should consider as internationalization (i18n) calls. This list is used to identify strings that need translation. The default list includes `_`, `gettext`, and `ngettext`.

```toml
[tool.ruff.lint.flake8-gettext]
function-names = ["_", "gettext", "ngettext", "ugettetxt"]

```

```toml
[lint.flake8-gettext]
function-names = ["_", "gettext", "ngettext", "ugettetxt"]

```

--------------------------------

### Respect Re-export with Aliasing (Python)

Source: https://docs.astral.sh/ruff/rules/unused-import

Illustrates how to prevent Ruff from flagging an import as unused when it's intended for re-exporting a member by using a redundant alias.

```python
from module import member as member

```

--------------------------------

### Python: Overload function without docstring (Correct)

Source: https://docs.astral.sh/ruff/rules/overload-with-docstring

This Python code snippet illustrates the correct way to use @overload. The overloaded function signatures are empty (using '...'), and the docstring is solely on the final implementation function. This follows the recommended practice for type hinting and documentation.

```python
from typing import overload


@overload
def factorial(n: int) -> int: ...


@overload
def factorial(n: float) -> float: ...


def factorial(n):
    """Return the factorial of n."""


factorial.__doc__  # "Return the factorial of n."

```

--------------------------------

### Correct @pytest.fixture() Decorator Usage (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-fixture-incorrect-parentheses-style

Demonstrates the correct way to use the @pytest.fixture decorator when it has no arguments. This involves either omitting the parentheses or ensuring consistent usage according to the `lint.flake8-pytest-style.fixture-parentheses` setting.

```python
import pytest


@pytest.fixture()
def my_fixture(): ...

```

```python
import pytest


@pytest.fixture
def my_fixture(): ...

```

--------------------------------

### Python Stub File: Avoid Docstrings

Source: https://docs.astral.sh/ruff/rules/docstring-in-stub

This snippet demonstrates the incorrect and correct way to define a function in a Python stub file (.pyi). The linter flags the presence of a docstring in stub files, as they should only contain type information.

```python
def func(param: int) -> str:
    """This is a docstring."""
    ...

```

```python
def func(param: int) -> str: ...
```

--------------------------------

### Replace os.symlink with pathlib.Path.symlink_to (Python)

Source: https://docs.astral.sh/ruff/rules/os-symlink

This snippet demonstrates how to replace the outdated os.symlink function with the more modern and readable pathlib.Path.symlink_to method in Python. While pathlib offers better type safety and a higher-level API, it might have slight performance differences compared to os.symlink on older Python versions.

```Python
import os

os.symlink("usr/bin/python", "tmp/python", target_is_directory=False)
```

```Python
from pathlib import Path

Path("tmp/python").symlink_to("usr/bin/python")
```

--------------------------------

### Configure Ruff Line Length and Rules (pyproject.toml)

Source: https://docs.astral.sh/ruff/tutorial

Configures Ruff's behavior by setting the maximum line length to 79 and explicitly enabling the `line-too-long` (E501) lint rule. This configuration is placed in the `pyproject.toml` file.

```toml
[tool.ruff]
# Set the maximum line length to 79.
line-length = 79

[tool.ruff.lint]
# Add the `line-too-long` rule to the enforced rule set. By default, Ruff omits rules that
# overlap with the use of a formatter, like Black, but we can override this behavior by
# explicitly adding the rule.
extend-select = ["E501"]


```

--------------------------------

### Good Practice: Logging Exceptions in Python

Source: https://docs.astral.sh/ruff/rules/try-except-pass

This snippet shows the recommended approach for handling exceptions in Python using the 'logging' module. Instead of silently passing, exceptions are logged, allowing for better error tracking and debugging. This is a safer alternative to 'try-except-pass'.

```python
import logging

try:
    ...
except Exception as exc:
    logging.exception("Exception occurred")

```

--------------------------------

### Detect Mixed Tabs and Spaces in Python (E101)

Source: https://docs.astral.sh/ruff/rules/mixed-spaces-and-tabs

This rule identifies lines of code that use a mixture of tabs and spaces for indentation. It's recommended to use spaces exclusively for indentation in Python. Ruff enforces this by flagging such inconsistencies.

```python
if a == 0:
        a = 1
	b = 1
```

```python
if a == 0:
    a = 1
    b = 1
```

--------------------------------

### Optimized Set Membership Test (Python)

Source: https://docs.astral.sh/ruff/rules/literal-membership

This snippet shows the recommended way to perform membership tests using a set literal, which is optimized in Python for faster lookups compared to lists or tuples. This is the preferred alternative to the inefficient pattern.

```python
1 in {1, 2, 3}

```

--------------------------------

### Inefficient use of sorted() for min/max in Python

Source: https://docs.astral.sh/ruff/rules/sorted-min-max

This snippet demonstrates the inefficient practice of using sorted() to find the minimum or maximum value in a Python list. It highlights how sorted() is less readable and performant than dedicated min() or max() functions for this purpose. This rule is marked as unstable and requires the --preview flag.

```python
nums = [3, 1, 4, 1, 5]
lowest = sorted(nums)[0]
highest = sorted(nums)[-1]
highest = sorted(nums, reverse=True)[0]
```

--------------------------------

### Replace str.join with f-string (Python)

Source: https://docs.astral.sh/ruff/rules/static-join-to-f-string

This snippet demonstrates the transformation of a 'str.join' call into an equivalent f-string. The linter rule FLY002 flags these opportunities for improved code readability. The fix is considered unsafe because f-strings may evaluate expressions differently than 'str.join', potentially leading to varying string outputs or exceptions.

```Python
" ".join((foo, bar))
```

```Python
f"{foo} {bar}"
```

--------------------------------

### Corrected Multiple Spaces Before Operator (Python)

Source: https://docs.astral.sh/ruff/rules/multiple-spaces-before-operator

This snippet shows the corrected version of code flagged by the Ruff E221 rule. It demonstrates the PEP 8 compliant spacing around operators, with at most a single space on either side. This aligns with best practices for Python code readability.

```python
a = 4 + 5

```

--------------------------------

### Generate Shell Autocompletion Script for Ruff

Source: https://docs.astral.sh/ruff/configuration

Generates a shell-specific completion script for Ruff. Replace `<SHELL>` with your shell's name (e.g., bash, fish, zsh). The generated script can be used to enable command-line autocompletion.

```shell
ruff generate-shell-completion <SHELL>
```

--------------------------------

### Incorrect Logging with exc_info=True (Python)

Source: https://docs.astral.sh/ruff/rules/exc-info-outside-except-handler

Demonstrates the incorrect usage of `exc_info=True` in a logging call outside of an exception handler. This leads to `None` being logged as exception information.

```python
import logging


logging.warning("Foobar", exc_info=True)
```

--------------------------------

### Allow Multiline Implicit String Concatenation (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Controls whether implicit string concatenations are allowed for multiline strings. When set to `false`, explicit continuation lines (using backslashes) are prohibited. Setting this to `false` also disables the `explicit-string-concatenation` (`ISC003`) rule, preventing violations for both implicit and explicit multiline concatenations.

```toml
[tool.ruff.lint.flake8-implicit-str-concat]
allow-multiline = false

```

```toml
[lint.flake8-implicit-str-concat]
allow-multiline = false

```

--------------------------------

### Ruff: Multi-line Global and Nonlocal Statements

Source: https://docs.astral.sh/ruff/formatter/black

Shows how Ruff breaks `global` or `nonlocal` statements across multiple lines using continuations when they contain multiple names and exceed the line width.

```python
# Input
global analyze_featuremap_layer, analyze_featuremapcompression_layer, analyze_latencies_post, analyze_motions_layer, analyze_size_model

# Ruff
global \
    analyze_featuremap_layer, \
    analyze_featuremapcompression_layer, \
    analyze_latencies_post, \
    analyze_motions_layer, \
    analyze_size_model
```

--------------------------------

### Contextlib.suppress without arguments - Python

Source: https://docs.astral.sh/ruff/rules/useless-contextlib-suppress

This code snippet demonstrates the incorrect usage of `contextlib.suppress` without any arguments, which is flagged by the linter. It also shows the corrected version where `Exception` is explicitly passed to suppress all exceptions.

```python
import contextlib

with contextlib.suppress():
    foo()

```

```python
import contextlib

with contextlib.suppress(Exception):
    foo()

```

--------------------------------

### Enable Unsafe Fixes in Ruff

Source: https://docs.astral.sh/ruff/settings

Controls whether Ruff can apply 'unsafe' fixes. When set to true, Ruff will automatically apply these fixes. If false or null (default), Ruff will hint at available unsafe fixes or hide them respectively. This setting is configurable in pyproject.toml or ruff.toml.

```toml
[tool.ruff]
unsafe-fixes = true

```

```toml
unsafe-fixes = true

```

--------------------------------

### Python: Avoid Equality Comparison with Boolean Literals (E712)

Source: https://docs.astral.sh/ruff/rules/true-false-comparison

This snippet demonstrates how Ruff's E712 rule identifies and flags the incorrect practice of using `==` or `!=` to compare variables with `True` or `False` in Python. It also shows the recommended, more idiomatic Pythonic way to achieve the same result.

```python
if foo == True:
    ...

if bar == False:
    ...

```

```python
if foo:
    ...

if not bar:
    ...

```

--------------------------------

### Python Class Method Spacing (E301)

Source: https://docs.astral.sh/ruff/rules/blank-line-between-methods

This snippet demonstrates the incorrect and correct formatting for blank lines between methods in a Python class, as enforced by Ruff's E301 rule based on PEP 8.

```python
class MyClass(object):
    def func1():
        pass
    def func2():
        pass

```

```python
class MyClass(object):
    def func1():
        pass

    def func2():
        pass

```

--------------------------------

### Python: Detect Superfluous Whitespace in Blank Lines (W293)

Source: https://docs.astral.sh/ruff/rules/blank-line-with-whitespace

This snippet demonstrates the problematic code flagged by Ruff's W293 rule, which detects superfluous whitespace on otherwise blank lines. The corrected version shows how to properly format blank lines. This rule aims to enforce PEP 8's guideline against trailing whitespace.

```python
class Foo(object):

    bang = 12

```

```python
class Foo(object):

    bang = 12

```

--------------------------------

### Replace bin(...).count("1") with int.bit_count()

Source: https://docs.astral.sh/ruff/rules/bit-count

This snippet demonstrates how to replace the less efficient method of counting set bits using bin(...).count("1") with the more concise and performant int.bit_count() method introduced in Python 3.10. The latter is directly available on integer types.

```python
x = bin(123).count("1")
y = bin(0b1111011).count("1")
```

```python
x = (123).bit_count()
y = 0b1111011.bit_count()
```

--------------------------------

### Avoid Eager String Conversion in Logging Calls (Python)

Source: https://docs.astral.sh/ruff/rules/logging-eager-conversion

This snippet demonstrates the incorrect and correct way to pass arguments to logging functions. Eagerly converting arguments to strings using `str()` is unnecessary as the `logging` module handles formatting automatically, leading to less efficient code. The rule flags these unnecessary conversions.

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened", str(user))
```

```python
import logging

logging.basicConfig(format="%(message)s", level=logging.INFO)

user = "Maria"

logging.info("%s - Something happened", user)
```

--------------------------------

### Use dict comprehension for distinct mutable defaults (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-fromkeys-value

Provides the recommended alternative to `dict.fromkeys` with mutable defaults. It uses a dictionary comprehension to create distinct instances of the mutable object (list) for each key, preventing unexpected shared modifications.

```python
cities = {country: [] for country in ["UK", "Poland"]}
cities["UK"].append("London")
cities["Poland"].append("Poznan")
print(cities)  # {'UK': ['London'], 'Poland': ['Poznan']}
```

--------------------------------

### FastAPI Unused Path Parameter Detection (Python)

Source: https://docs.astral.sh/ruff/rules/fast-api-unused-path-parameter

This snippet demonstrates how to identify FastAPI routes where path parameters are defined in the route decorator but are missing from the corresponding asynchronous function's signature. It highlights the problem of inaccessible variables and provides corrected code.

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/things/{thing_id}")
async def read_thing(query: str): ...

# Corrected version:
@app.get("/things/{thing_id}")
async def read_thing(thing_id: int, query: str): ...

```

--------------------------------

### Ruff Configuration: Ignoring Violations in pyproject.toml

Source: https://docs.astral.sh/ruff/configuration

This snippet shows how to configure Ruff to ignore specific linting violations (`B` and `E402`) in certain files or directories within a `pyproject.toml` file. It demonstrates disabling bugbear checks and ignoring import errors in `__init__.py` and test/docs/tools subdirectories.

```toml
[lint]
unfixable = ["B"]

[lint.per-file-ignores]
"__init__.py" = ["E402"]
"**/{tests,docs,tools}/*" = ["E402"]

[format]
quote-style = "single"
```

--------------------------------

### Exclude modules from single-line rule (Ruff/isort)

Source: https://docs.astral.sh/ruff/settings

Specifies modules to be excluded from the single-line import rule. This can prevent certain imports from being reformatted to a single line.

```toml
[tool.ruff.lint.isort]
single-line-exclusions = ["os", "json"]

```

```toml
[lint.isort]
single-line-exclusions = ["os", "json"]

```

--------------------------------

### Replace os.chmod with pathlib.Path.chmod (Python)

Source: https://docs.astral.sh/ruff/rules/os-chmod

Demonstrates the replacement of the lower-level os.chmod function with the more readable and object-oriented pathlib.Path.chmod method. This change improves code clarity when manipulating file permissions.

```python
import os

os.chmod("file.py", 0o444)
```

```python
from pathlib import Path

Path("file.py").chmod(0o444)
```

--------------------------------

### Replace string join with f-strings (Python)

Source: https://docs.astral.sh/ruff/rules

This rule suggests replacing traditional string concatenation or `str.join()` methods with f-strings (formatted string literals) in Python. F-strings offer a more concise and readable way to embed expressions inside string literals. This applies to situations where multiple string parts are being combined.

```python
# Instead of:
# name = "world"
# message = "Hello, " + name + "!"
# print(message)

# Or:
# parts = ["Hello", ", ", name, "!"]
# message = "".join(parts)
# print(message)

# Use f-strings:
name = "world"
message = f"Hello, {name}!"
print(message)

```

--------------------------------

### Replace functools.lru_cache(maxsize=None) with functools.cache

Source: https://docs.astral.sh/ruff/rules/lru-cache-with-maxsize-none

This snippet demonstrates how to replace the usage of `functools.lru_cache` with `maxsize=None` by using the more idiomatic `functools.cache` decorator. This applies to Python 3.9+ where `functools.cache` is available as a direct replacement.

```python
import functools


@functools.lru_cache(maxsize=None)
def foo(): ...

```

```python
import functools


@functools.cache
def foo(): ...

```

--------------------------------

### Avoid string joining with markupsafe.Markup (Python)

Source: https://docs.astral.sh/ruff/rules/unsafe-markup-use

Illustrates a common mistake where `markupsafe.Markup` is used with `.join()` on a list containing potentially unsafe strings, leading to XSS. The safe alternative is to use `Markup.join()` which correctly handles the interpolation of multiple `Markup` objects.

```python
from markupsafe import Markup

lines = [
    Markup("<b>heading</b>"),
    "<script>alert('XSS attempt')</script>",
]
hTml = Markup("<br>".join(lines))  # XSS

# Use instead:
hTml = Markup("<br>").join(lines)  # Safe
```

--------------------------------

### Python: Detect Empty Docstring Sections (D414)

Source: https://docs.astral.sh/ruff/rules/empty-docstring-section

This Python code snippet demonstrates a function with an incomplete docstring that violates the D414 rule. The 'Raises' section is empty. Ruff's D414 rule checks for such empty sections in multiline docstrings, which can indicate unfinished documentation. The corrected version shows how to properly populate or remove empty sections.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Parameters
    ----------
    distance : float
        Distance traveled.
    time : float
        Time spent traveling.

    Returns
    -------
    float
        Speed as distance divided by time.

    Raises
    ------
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Parameters
    ----------
    distance : float
        Distance traveled.
    time : float
        Time spent traveling.

    Returns
    -------
    float
        Speed as distance divided by time.

    Raises
    ------
    FasterThanLightError
        If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Python: Correctly Clear and Set os.environ

Source: https://docs.astral.sh/ruff/rules/assignment-to-os-environ

This snippet shows the recommended way to modify os.environ. It first clears all environment variables for the current process using os.environ.clear() and then sets specific variables. This approach prevents unexpected behavior when subprocesses inherit the environment.

```python
import os

os.environ.clear()
os.environ["foo"] = "bar"

```

--------------------------------

### Detect Pickle Module Import

Source: https://docs.astral.sh/ruff/rules/suspicious-pickle-import

This rule detects imports of the `pickle`, `cPickle`, `dill`, and `shelve` modules. These modules can pose security risks if used to unpickle untrusted data, as it can lead to arbitrary code execution.

```python
import pickle
```

--------------------------------

### Require Pytest Warns Matching (TOML)

Source: https://docs.astral.sh/ruff/settings

Define warning names that necessitate a 'match=' parameter when using pytest.warns(). Supports glob patterns for versatile matching. The default list covers common warning types.

```toml
[tool.ruff.lint.flake8-pytest-style]
warns-require-match-for = ["requests.RequestsWarning"]

```

```toml
[lint.flake8-pytest-style]
warns-require-match-for = ["requests.RequestsWarning"]

```

--------------------------------

### Correct pathlib.Path.with_suffix() usage

Source: https://docs.astral.sh/ruff/rules/invalid-pathlib-with-suffix

This snippet shows the correct way to use pathlib.Path.with_suffix(), ensuring the suffix includes a leading dot. This avoids potential runtime errors.

```python
from pathlib import Path

path = Path()

path.with_suffix(".py")

```

--------------------------------

### Python function with missing parameter documentation (D417)

Source: https://docs.astral.sh/ruff/rules/undocumented-param

This Python code snippet demonstrates a function where the docstring is missing documentation for the 'time' parameter. The rule D417 flags this as an issue because the 'Args' section in the Google-style docstring should list and describe all parameters.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.

    Returns:
        Speed as distance divided by time.

    Raises:
        FasterThanLightError: If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Enable Ruff Extension (JSON)

Source: https://docs.astral.sh/ruff/editors/settings

Controls whether the Ruff extension is enabled in VS Code. Setting this to `false` disables the extension. A restart of VS Code is required for changes to take effect. The default value is `true`.

```json
{
    "ruff.enable": false
}
```

--------------------------------

### Replace If-Else Expression with Dict.get in Python (Preview Mode)

Source: https://docs.astral.sh/ruff/rules/if-else-block-instead-of-dict-get

When preview mode is enabled, this rule suggests replacing ternary if-else expressions used for dictionary lookups with `dict.get()`. This further enhances conciseness.

```python
value = foo["bar"] if "bar" in foo else 0
```

```python
value = foo.get("bar", 0)
```

--------------------------------

### Ruff vs. Black: Assert Statement Formatting

Source: https://docs.astral.sh/ruff/formatter/black

Illustrates the difference in formatting `assert` statements between Ruff and Black. Ruff prioritizes breaking the message part over the assertion condition, similar to how assignments are handled.

```python
# Input
assert (
    len(policy_types) >= priority + num_duplicates
), f"This tests needs at least {priority+num_duplicates} many types."


# Black
assert (
    len(policy_types) >= priority + num_duplicates
), f"This tests needs at least {priority+num_duplicates} many types."

# Ruff
assert len(policy_types) >= priority + num_duplicates, (
    f"This tests needs at least {priority + num_duplicates} many types."
)
```

--------------------------------

### Unsafe __annotations__ Access via __dict__

Source: https://docs.astral.sh/ruff/rules/access-annotations-from-class-dict

Demonstrates the problematic way of accessing annotations directly from the `__dict__` attribute. This method is discouraged due to potential inconsistencies and reliance on internal implementation details, especially in newer Python versions.

```python
foo.__dict__.get("__annotations__", {})
# or
foo.__dict__["__annotations__"]
```

--------------------------------

### Recommended Absolute Import Fix

Source: https://docs.astral.sh/ruff/rules/relative-imports

This snippet demonstrates the recommended way to fix the issue flagged by the 'relative-imports' linter rule. It shows how to replace an implicit relative import with an absolute import.

```python
from mypkg import foo
```

--------------------------------

### Use Secure XML Parsing with defusedxml (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-mini-dom-usage

This snippet shows the secure alternative for parsing XML using the `defusedxml.minidom.parse` function. This approach mitigates risks associated with XML attacks like entity expansion, recommended when dealing with untrusted XML data.

```python
from defusedxml.minidom import parse

content = parse("untrusted.xml")

```

--------------------------------

### Set Indentation Width in Ruff

Source: https://docs.astral.sh/ruff/settings

Defines the number of spaces that represent a tab for indentation. This setting is used by the formatter and for enforcing long-line violations. PEP 8 recommends 4 spaces. Default is 4.

```toml
[tool.ruff]
indent-width = 2

```

```toml
indent-width = 2

```

--------------------------------

### Control Respecting .gitignore Files in Ruff

Source: https://docs.astral.sh/ruff/settings

Configure whether Ruff should automatically exclude files ignored by gitignore files. Defaults to true.

```toml
[tool.ruff]
respect-gitignore = false

```

```toml
respect-gitignore = false

```

--------------------------------

### Detect pprint statements in Python

Source: https://docs.astral.sh/ruff/rules/p-print

This snippet demonstrates the use of `pprint` in Python for debugging purposes. It shows how `pprint` is used to display the contents of a merged dictionary. The rule T203 flags this as a potential issue in production code.

```python
import pprint

def merge_dicts(dict_a, dict_b):
    dict_c = {**dict_a, **dict_b}
    pprint.pprint(dict_c)
    return dict_c
```

--------------------------------

### Correct PEP 570 Positional-Only Parameter Style (Python)

Source: https://docs.astral.sh/ruff/rules/pep484-style-positional-only-parameter

This snippet shows the modern and preferred PEP 570 syntax for defining positional-only parameters. It uses a forward slash (/) in the function signature to indicate that parameters before it are positional-only. This syntax is more readable and supported at runtime.

```python
def foo(x: int, /) -> None: ...
```

--------------------------------

### Efficient List Flattening with functools.reduce in Python

Source: https://docs.astral.sh/ruff/rules/quadratic-list-summation

Shows an efficient way to flatten a list of lists using functools.reduce and operator.iadd. This method achieves linear time complexity, which is more performant for large lists compared to using sum().

```Python
import functools
import operator

lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
functools.reduce(operator.iadd, lists, [])
```

--------------------------------

### Configure Max Branches for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Specifies the maximum number of branches allowed within a function or method body. This aims to simplify control flow. The default value is 12. This setting corresponds to the `PLR0912` linting rule.

```toml
[tool.ruff.lint.pylint]
max-branches = 15

```

```toml
[lint.pylint]
max-branches = 15

```

--------------------------------

### Use Provider Imports for Airflow Functions (Python)

Source: https://docs.astral.sh/ruff/rules/airflow3-suggested-to-move-to-provider

This code snippet demonstrates the 'before' and 'after' of refactoring Airflow code to use provider-specific imports. It's intended to fix AIR312 by replacing compatibility layer imports with direct provider imports. This ensures future compatibility as deprecated functions are removed from the core Airflow library.

```python
from airflow.operators.python import PythonOperator


def print_context(ds=None, **kwargs):
    print(kwargs)
    print(ds)


print_the_context = PythonOperator(
    task_id="print_the_context", python_callable=print_context
)

```

```python
from airflow.providers.standard.operators.python import PythonOperator


def print_context(ds=None, **kwargs):
    print(kwargs)
    print(ds)


print_the_context = PythonOperator(
    task_id="print_the_context", python_callable=print_context
)

```

--------------------------------

### Ruff vs. Black: Trailing Comments on Imports

Source: https://docs.astral.sh/ruff/formatter/black

Highlights the difference in handling trailing own-line comments on import statements. Black moves such comments to the next line, requiring an empty line, while Ruff leaves them in place.

```python
# Input
import os
# comment

import sys

# Black
import os

# comment

import sys

# Ruff
import os
# comment

import sys
```

--------------------------------

### Python: Check for Missing Whitespace After Keywords (E275)

Source: https://docs.astral.sh/ruff/rules/missing-whitespace-after-keyword

This snippet demonstrates the ruff E275 rule, which identifies instances where whitespace is missing after Python keywords. This check enhances code readability. The fix is consistently available, though the rule is in preview and requires the --preview flag.

```python
if(True):
    pass

```

```python
if (True):
    pass

```

--------------------------------

### Configure Flake8 Quotes Docstring Style (TOML)

Source: https://docs.astral.sh/ruff/settings

Set the preferred quote style for docstrings, either 'single' or 'double'. Note that the formatter only supports 'double' quotes for docstrings.

```toml
[tool.ruff.lint.flake8-quotes]
docstring-quotes = "single"

```

```toml
[lint.flake8-quotes]
docstring-quotes = "single"

```

--------------------------------

### Correct Way to Raise Exception in Python

Source: https://docs.astral.sh/ruff/rules/useless-exception-statement

This Python code snippet shows the correct way to raise an exception. By using the 'raise' keyword, the exception is actively thrown, which can be caught and handled by the program. This is the intended way to signal an error condition.

```python
raise ValueError("...")
```

--------------------------------

### Python: Avoid Redundant None Default in dict.get()

Source: https://docs.astral.sh/ruff/rules/dict-get-with-none-default

This snippet demonstrates the correct and incorrect usage of the dict.get() method in Python. It highlights how explicitly passing 'None' as the default value is redundant since 'None' is the default behavior. The fix involves removing the explicit 'None' argument.

```python
ages = {"Tom": 23, "Maria": 23, "Dog": 11}
age = ages.get("Cat", None)

```

```python
ages = {"Tom": 23, "Maria": 23, "Dog": 11}
age = ages.get("Cat")

```

--------------------------------

### Assert in Except Clause vs. pytest.raises()

Source: https://docs.astral.sh/ruff/rules/pytest-assert-in-except

Demonstrates the incorrect use of assert within an except clause for testing exceptions and contrasts it with the recommended pytest.raises() context manager. The latter ensures the exception is raised and provides better failure diagnostics.

```python
def test_foo():
    try:
        1 / 0
    except ZeroDivisionError as e:
        assert e.args
```

```python
import pytest

def test_foo():
    with pytest.raises(ZeroDivisionError) as exc_info:
        1 / 0
    assert exc_info.value.args
```

--------------------------------

### Use yaml.safe_load for Secure YAML Parsing - Python

Source: https://docs.astral.sh/ruff/rules/unsafe-yaml-load

This snippet shows the recommended secure alternative to `yaml.load`. Using `yaml.safe_load` restricts the creation of Python objects, preventing arbitrary code execution from untrusted YAML input.

```python
import yaml

untrusted_yaml = "..."
yaml.safe_load(untrusted_yaml)
```

--------------------------------

### Python: Avoid Raw String Literals in Exception Constructors (EM101)

Source: https://docs.astral.sh/ruff/rules/raw-string-in-exception

This snippet demonstrates how to refactor code that uses raw string literals in exception constructors. The linter flags this pattern because Python's traceback often includes the `raise` statement, leading to a duplicated error message. Assigning the message to a variable before raising the exception ensures a cleaner traceback.

```python
msg = "'Some value' is incorrect"
raise RuntimeError(msg)
```

--------------------------------

### Configure Ruff Line Length and Rules (ruff.toml)

Source: https://docs.astral.sh/ruff/tutorial

Configures Ruff's behavior by setting the maximum line length to 79 and explicitly enabling the `line-too-long` (E501) lint rule. This configuration is placed in the `ruff.toml` file.

```toml
# Set the maximum line length to 79.
line-length = 79

[lint]
# Add the `line-too-long` rule to the enforced rule set. By default, Ruff omits rules that
# overlap with the use of a formatter, like Black, but we can override this behavior by
# explicitly adding the rule.
extend-select = ["E501"]


```

--------------------------------

### Detect Multiple Spaces Before Operator (Python)

Source: https://docs.astral.sh/ruff/rules/multiple-spaces-before-operator

This snippet demonstrates the Ruff E221 rule, which identifies code with multiple spaces before an operator. It is based on the pycodestyle linter and adheres to PEP 8 standards for operator spacing. The fix is always available, but the rule requires the `--preview` flag.

```python
a = 4  + 5

```

--------------------------------

### Convert Integer to String using f-string (Python)

Source: https://docs.astral.sh/ruff/rules/f-string-number-format

This snippet demonstrates how to convert an integer to its binary, hexadecimal, or octal string representation using f-strings, which is more concise and readable than using built-in functions like bin(), hex(), or oct() followed by slicing. This rule is derived from the refurb linter and is safe for integer literals.

```Python
print(bin(1337)[2:])
```

```Python
print(f"{1337:b}")
```

--------------------------------

### Avoid sys.version_info[1] integer comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-info1-cmp-int

Checks for comparisons that test sys.version_info[1] against an integer. This pattern is discouraged because it can lead to bugs when Python major versions are incremented. Instead, compare sys.version_info to a tuple containing both major and minor version numbers for future-proofing.

```Python
import sys

if sys.version_info[1] < 7:
    print("Python 3.6 or earlier.")  # This will be printed on Python 4.0.

```

```Python
import sys

if sys.version_info < (3, 7):
    print("Python 3.6 or earlier.")

```

--------------------------------

### Immutable ContextVar Default Alternative (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-contextvar-default

This snippet shows the recommended way to handle `ContextVar` defaults. It uses `None` as the default and initializes a new mutable object within the scope when needed, avoiding shared mutable state.

```python
from contextvars import ContextVar


cv: ContextVar[list | None] = ContextVar("cv", default=None)

...

if cv.get() is None:
    cv.set([])

```

--------------------------------

### Set Line Length for Docstring Code Formatting in Ruff

Source: https://docs.astral.sh/ruff/settings

Configures the maximum line length for code snippets formatted within docstrings. This setting only applies when `docstring-code-format` is enabled. The default value is 'dynamic', which respects the global line length and docstring indentation. It can also be set to a fixed integer.

```toml
[tool.ruff.format]
docstring-code-line-length = 60

```

```toml
[format]
docstring-code-line-length = 60

```

--------------------------------

### Detect Mixed Positional and Named Placeholders in Python

Source: https://docs.astral.sh/ruff/rules/percent-format-mixed-positional-and-named

This snippet demonstrates the incorrect usage of mixed positional and named placeholders in Python's printf-style string formatting. This pattern will cause a TypeError at runtime. The correct usage involves either only positional or only named placeholders.

```python
"%s, %(name)s" % ("Hello", {"name": "World"})
```

```python
"%s, %s" % ("Hello", "World")
```

```python
"%(greeting)s, %(name)s" % {"greeting": "Hello", "name": "World"}
```

--------------------------------

### Fix assert with print message in Python

Source: https://docs.astral.sh/ruff/rules/assert-with-print-message

This snippet demonstrates the incorrect usage of `assert` with a `print()` call as the message and the recommended way to provide a string message directly. The `print()` function returns `None`, leading to an `AssertionError(None)` and unexpected `stdout` output, whereas passing a string directly ensures the message is captured in `stderr`.

```python
assert False, print("This is a message")
```

```python
assert False, "This is a message"
```

--------------------------------

### Python: Optimize Type Hint Imports with TYPE_CHECKING

Source: https://docs.astral.sh/ruff/rules/typing-only-standard-library-import

This snippet demonstrates how to refactor Python code to move type-only imports into a `TYPE_CHECKING` block. This prevents unused imports from impacting runtime performance and avoids import cycle issues. It requires the `typing` module and is often used in conjunction with `from __future__ import annotations`.

```python
from __future__ import annotations

from pathlib import Path


def func(path: Path) -> str:
    return str(path)

```

```python
from __future__ import annotations

from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from pathlib import Path


def func(path: Path) -> str:
    return str(path)

```

--------------------------------

### Detecting Insecure SSL/TLS Defaults in Python Functions (S503)

Source: https://docs.astral.sh/ruff/rules/ssl-with-bad-defaults

This rule checks for function definitions in Python that use default arguments with insecure SSL and TLS protocol versions. It flags the use of SSL v2, SSL v3, TLS v1, and TLS v1.1, suggesting the use of more secure versions like TLS v1.2. Ensure your project avoids these insecure defaults to maintain security.

```python
import ssl


def func(version=ssl.PROTOCOL_TLSv1): ...

```

```python
import ssl


def func(version=ssl.PROTOCOL_TLSv1_2): ...

```

--------------------------------

### Python: Insecure Mako Template Rendering

Source: https://docs.astral.sh/ruff/rules/mako-templates

This snippet demonstrates the insecure usage of Mako templates, which can lead to Cross-Site Scripting (XSS) vulnerabilities. It shows a basic instantiation of a Mako Template without proper sanitization.

```python
from mako.template import Template

Template("hello")
```

--------------------------------

### Avoid redundant exc_info=True in logging.exception (Python)

Source: https://docs.astral.sh/ruff/rules/logging-redundant-exc-info

This snippet demonstrates how to avoid redundant `exc_info=True` when using `logging.exception`. The `logging.exception` function includes exception information by default, making an explicit `exc_info=True` redundant and unnecessary.

```python
import logging

try:
    ...
except ValueError:
    logging.exception("Exception occurred", exc_info=True)
```

```python
import logging

try:
    ...
except ValueError:
    logging.exception("Exception occurred")
```

--------------------------------

### Replace print statements with logging in Python

Source: https://docs.astral.sh/ruff/rules/print

This snippet illustrates how to replace 'print' statements with the 'logging' module for better control and security in production code. It shows the recommended approach using 'logging.debug' for debugging information.

```python
import logging

logging.basicConfig(level=logging.INFO)


def sum_less_than_four(a, b):
    logging.debug("Calling sum_less_than_four")
    return a + b < 4
```

--------------------------------

### Explicitly Selecting Single Preview Rules in Ruff

Source: https://docs.astral.sh/ruff/preview

This configures Ruff to require explicit selection of each preview rule when preview mode is enabled. If `explicit-preview-rules` is true, preview rules like 'HYP001' must be selected individually, not via categories or 'ALL'. This setting has no effect if preview mode is disabled.

```toml
[tool.ruff.lint]
preview = true
explicit-preview-rules = true

```

```toml
[lint]
preview = true
explicit-preview-rules = true

```

--------------------------------

### Configure Max Boolean Expressions for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Defines the maximum number of Boolean expressions allowed within a single `if` statement. This encourages simpler conditional logic. The default value is 5. This setting is related to the `PLR0916` linting rule.

```toml
[tool.ruff.lint.pylint]
max-bool-expr = 10

```

```toml
[lint.pylint]
max-bool-expr = 10

```

--------------------------------

### Python: Correct Tuple Length Version Comparison (PYI005)

Source: https://docs.astral.sh/ruff/rules/wrong-tuple-length-version-comparison

This snippet shows the correct method for comparing Python version information using sys.version_info, avoiding the incorrect tuple length issue flagged by PYI005. This is the recommended approach for version checking in stub files to ensure predictable behavior.

```python
import sys

if sys.version_info[0] == 3: ...
```

--------------------------------

### Fix await outside async function in Python

Source: https://docs.astral.sh/ruff/rules/await-outside-async

This snippet demonstrates the incorrect usage of `await` outside an `async` function, which results in a syntax error. The corrected version shows the proper way to use `await` within an `async` function. This rule is particularly relevant in asynchronous programming contexts.

```python
import asyncio

def foo():
    await asyncio.sleep(1)
```

```python
import asyncio

async def foo():
    await asyncio.sleep(1)
```

--------------------------------

### Extend Pytest Raises Exception Matching (TOML)

Source: https://docs.astral.sh/ruff/settings

Configure additional exception names that require a 'match=' parameter in pytest.raises() calls. This extends the default list and supports glob patterns. Useful for custom exception hierarchies.

```toml
[tool.ruff.lint.flake8-pytest-style]
raises-extend-require-match-for = ["requests.RequestException"]

```

```toml
[lint.flake8-pytest-style]
raises-extend-require-match-for = ["requests.RequestException"]

```

--------------------------------

### Enable Fix Behavior with Ruff

Source: https://docs.astral.sh/ruff/settings

Enables automatic fixes by default when running Ruff. This behavior can be overridden by command-line flags. It includes automatic fixes but not unsafe ones unless specified. Default is false.

```toml
[tool.ruff]
fix = true

```

```toml
fix = true

```

--------------------------------

### Avoid zip(dict.keys(), dict.values()) in Python

Source: https://docs.astral.sh/ruff/rules/zip-dict-keys-and-values

This snippet demonstrates the anti-pattern of using `zip()` with `dict.keys()` and `dict.values()` for iterating over dictionary items. The `dict.items()` method is the preferred and more efficient alternative in Python.

```python
flag_stars = {"USA": 50, "Slovenia": 3, "Panama": 2, "Australia": 6}

for country, stars in zip(flag_stars.keys(), flag_stars.values()):
    print(f"{country}'s flag has {stars} stars.")

```

```python
flag_stars = {"USA": 50, "Slovenia": 3, "Panama": 2, "Australia": 6}

for country, stars in flag_stars.items():
    print(f"{country}'s flag has {stars} stars.")

```

--------------------------------

### Incorrectly Log Exception without Traceback using logging.error (Python)

Source: https://docs.astral.sh/ruff/rules/error-instead-of-exception

Illustrates the incorrect usage of `logging.error` for logging exceptions. This method only logs the exception message and omits the traceback, making debugging more difficult.

```python
import logging

def func():
    try:
        raise NotImplementedError
    except NotImplementedError:
        logging.error("Exception occurred")

```

--------------------------------

### Configure Flake8 Quotes Multiline Style (TOML)

Source: https://docs.astral.sh/ruff/settings

Specify the preferred quote style for multiline strings, selecting either 'single' or 'double'. The formatter enforces 'double' quotes for multiline strings.

```toml
[tool.ruff.lint.flake8-quotes]
multiline-quotes = "single"

```

```toml
[lint.flake8-quotes]
multiline-quotes = "single"

```

--------------------------------

### Correct Dictionary Iteration (Python)

Source: https://docs.astral.sh/ruff/rules/incorrect-dict-iterator

Shows the efficient way to iterate over dictionary values using `dict.values()`, as recommended by Ruff's PERF102 rule. This avoids unnecessary tuple allocation.

```python
obj = {"a": 1, "b": 2}
for value in obj.values():
    print(value)

```

--------------------------------

### Detecting PEP 695 Type Parameters with Generic Inheritance (Python)

Source: https://docs.astral.sh/ruff/rules/class-with-mixed-type-vars

This snippet demonstrates the incorrect usage of PEP 695 type parameter syntax within a class that also inherits from `typing.Generic`. This pattern is flagged because it can lead to `TypeError` at runtime due to multiple inheritance from `Generic`.

```python
from typing import Generic, TypeVar

U = TypeVar("U")

# TypeError: Cannot inherit from Generic[...] multiple times.
class C[T](Generic[U]): ...

```

```python
from typing import Generic, ParamSpec, TypeVar, TypeVarTuple

U = TypeVar("U")
P = ParamSpec("P")
Ts = TypeVarTuple("Ts")


class C[T](Generic[U, P, *Ts]): ...

```

```python
class C[T, U, **P, *Ts]: ...

```

--------------------------------

### Unsafe Fix for min/max with Floats (Python)

Source: https://docs.astral.sh/ruff/rules/nested-min-max

Highlights the potential unsafety of ruff's automatic fix for `min` and `max` calls when dealing with floating-point numbers, particularly involving `NaN`. The fix can change the program's behavior.

```python
print(min(2.0, min(float("nan"), 1.0)))  # before fix: 2.0
print(min(2.0, float("nan"), 1.0))  # after fix: 1.0
```

```python
print(max(1.0, max(float("nan"), 2.0)))  # before fix: 1.0
print(max(1.0, float("nan"), 2.0))  # after fix: 2.0
```

--------------------------------

### Replace trio.sleep(0) with trio.lowlevel.checkpoint (Python)

Source: https://docs.astral.sh/ruff/rules/async-zero-sleep

This snippet demonstrates the incorrect usage of trio.sleep(0) and the recommended alternative, trio.lowlevel.checkpoint(). The latter better conveys the intent of yielding control without actually sleeping. This rule is derived from flake8-async.

```python
import trio

async def func():
    await trio.sleep(0)
```

```python
import trio

async def func():
    await trio.lowlevel.checkpoint()
```

--------------------------------

### Use Keyword Arguments for pytest.fixture (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-fixture-positional-args

This snippet demonstrates the incorrect usage of positional arguments in a pytest.fixture decorator and the recommended approach using keyword arguments. It highlights the preference for clarity and consistency in specifying fixture configurations.

```python
import pytest


@pytest.fixture("module")
def my_fixture(): ...

```

```python
import pytest


@pytest.fixture(scope="module")
def my_fixture(): ...

```

--------------------------------

### Avoid return in try block, use else clause in Python

Source: https://docs.astral.sh/ruff/rules/try-consider-else

This code snippet demonstrates the incorrect usage of a `return` statement within a `try` block and provides the corrected version using an `else` clause. The `else` clause is preferred for code that should execute only when the `try` block completes without raising an exception, ensuring clearer control flow and preventing potential side effects.

```python
import logging


def reciprocal(n):
    try:
        rec = 1 / n
        print(f"reciprocal of {n} is {rec}")
        return rec
    except ZeroDivisionError:
        logging.exception("Exception occurred")
        raise
```

```python
import logging


def reciprocal(n):
    try:
        rec = 1 / n
    except ZeroDivisionError:
        logging.exception("Exception occurred")
        raise
    else:
        print(f"reciprocal of {n} is {rec}")
        return rec
```

--------------------------------

### Class Docstring Spacing (Python)

Source: https://docs.astral.sh/ruff/rules/incorrect-blank-line-before-class

This snippet demonstrates the correct placement of a blank line before a class docstring, adhering to style guidelines. It shows the incorrect format and the corrected version for better code readability and consistency. This rule is derived from pydocstyle and is applicable across Python projects.

```python
class PhotoMetadata:
    """Metadata about a photo."""


```

```python
class PhotoMetadata:

    """Metadata about a photo."""

```

--------------------------------

### Incorrect logging.getLogger() usage with __file__

Source: https://docs.astral.sh/ruff/rules/invalid-get-logger-argument

This snippet demonstrates the incorrect usage of logging.getLogger() with the '__file__' module-level dunder constant. The logging documentation recommends using '__name__' for logger names to ensure fully qualified module names.

```python
import logging

logger = logging.getLogger(__file__)

```

--------------------------------

### Detect Invalid open() Mode Argument in Python

Source: https://docs.astral.sh/ruff/rules/bad-open-mode

This snippet demonstrates the incorrect usage of the 'mode' argument in a Python 'open()' call, specifically using an invalid combination ('rwx'). It also shows the corrected version using a valid mode ('r'). This rule helps prevent errors related to file access.

```python
with open("file", "rwx") as f:
    content = f.read()

```

```python
with open("file", "r") as f:
    content = f.read()

```

--------------------------------

### Incorrect PEP 484 Positional-Only Parameter Style (Python)

Source: https://docs.astral.sh/ruff/rules/pep484-style-positional-only-parameter

This snippet demonstrates the outdated PEP 484 style for defining positional-only parameters using a double underscore prefix. This style is no longer recommended and should be replaced with the PEP 570 syntax.

```python
def foo(__x: int) -> None: ...
```

--------------------------------

### Correct NumPy Docstring Section Underline (Python)

Source: https://docs.astral.sh/ruff/rules/mismatched-section-underline-length

This Python code snippet shows the correct implementation of a numpy-style docstring according to the D409 rule. The underline characters for each section header ('Parameters', 'Returns', 'Raises') precisely match the length of their respective headers, ensuring proper formatting and compatibility with documentation generation tools like Sphinx.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Parameters
    ----------
    distance : float
        Distance traveled.
    time : float
        Time spent traveling.

    Returns
    -------
    float
        Speed as distance divided by time.

    Raises
    ------
    FasterThanLightError
        If speed is greater than the speed of light.
    """
    try:
        return distance / time
    except ZeroDivisionError as exc:
        raise FasterThanLightError from exc

```

--------------------------------

### Detect CGIHandler Import (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-httpoxy-import

This code snippet demonstrates the import of `wsgiref.handlers.CGIHandler`, which is flagged by the S412 rule. This import indicates a potential vulnerability to httpoxy attacks if the application runs in a CGI environment. Avoid using CGI for web applications.

```python
from wsgiref.handlers import CGIHandler

```

--------------------------------

### Ruff vs. Black: Parentheses around Awaited Collections

Source: https://docs.astral.sh/ruff/formatter/black

Compares how Ruff and Black handle parentheses around awaited collections. Black preserves them, while Ruff removes them for consistency with other awaited expressions, unless syntactically required.

```python
# Black preserves parentheses
await ([1, 2, 3])

# Ruff removes them
await [1, 2, 3]
```

--------------------------------

### Replace itertools.starmap with zip using map

Source: https://docs.astral.sh/ruff/rules/starmap-zip

Checks for `itertools.starmap` calls where the second argument is a `zip` call. These can be replaced with `map()` for better readability and efficiency. The fix is unsafe if comments are present in the original `starmap` or `zip` expressions. The rule will not suggest a fix if `map` has been shadowed.

```python
from itertools import starmap

starmap(func, zip(a, b))
starmap(func, zip(a, b, strict=True))
```

```python
map(func, a, b)
map(func, a, b, strict=True)  # 3.14+
```

--------------------------------

### Avoid request.addfinalizer in Pytest Fixtures (Python)

Source: https://docs.astral.sh/ruff/rules/pytest-fixture-finalizer-callback

Demonstrates the correct and incorrect ways to handle cleanup in pytest fixtures. The preferred method uses the 'yield' statement for sequential cleanup, while 'request.addfinalizer' is shown as an alternative for the 'factory as fixture' pattern.

```python
import pytest


@pytest.fixture()
def my_fixture(request):
    resource = acquire_resource()
    request.addfinalizer(resource.release)
    return resource

```

```python
import pytest


@pytest.fixture()
def my_fixture():
    resource = acquire_resource()
    yield resource
    resource.release()


# "factory-as-fixture" pattern
@pytest.fixture()
def my_factory(request):
    def create_resource(arg):
        resource = acquire_resource(arg)
        request.addfinalizer(resource.release)
        return resource

    return create_resource

```

--------------------------------

### Configure Max Locals for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Sets the maximum number of local variables allowed within a function or method body. This encourages more concise functions. The default value is 15. This setting relates to the `PLR0914` linting rule.

```toml
[tool.ruff.lint.pylint]
max-locals = 20

```

```toml
[lint.pylint]
max-locals = 20

```

--------------------------------

### Check for Undefined Names in Python __all__ (F822)

Source: https://docs.astral.sh/ruff/rules/undefined-export

This Python code snippet demonstrates the `undefined-export` (F822) rule. It highlights how an undefined name ('baz') in the `__all__` list can cause a `NameError` during wildcard imports. The corrected version shows the proper way to include defined names in `__all__`.

```python
from foo import bar


__all__ = ["bar", "baz"]  # undefined name `baz` in `__all__`

```

```python
from foo import bar, baz


__all__ = ["bar", "baz"]

```

--------------------------------

### Configure Max Statements for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Sets the maximum number of statements allowed within a function or method body. This promotes breaking down complex logic into smaller, more manageable functions. The default value is 50. This setting corresponds to the `PLR0915` linting rule.

```toml
[tool.ruff.lint.pylint]
max-statements = 75

```

```toml
[lint.pylint]
max-statements = 75

```

--------------------------------

### Avoid inefficient string splitting with split() and rsplit() (Python)

Source: https://docs.astral.sh/ruff/rules/missing-maxsplit-arg

This code snippet demonstrates how to efficiently split strings using `str.split()` and `str.rsplit()` when accessing only the first or last element. It highlights the inefficiency of splitting on every delimiter without `maxsplit=1` and provides the correct, more performant approach.

```Python
url = "www.example.com"
prefix = url.split(".")[0]

# Use instead:
url = "www.example.com"
prefix = url.split(".", maxsplit=1)[0]

# To access the last element, use str.rsplit() instead of str.split():
url = "www.example.com"
suffix = url.rsplit(".", maxsplit=1)[-1]
```

--------------------------------

### Unsorted or unformatted imports (Python)

Source: https://docs.astral.sh/ruff/rules

This rule flags import statements in Python code that are not sorted alphabetically or are not formatted according to standard conventions (e.g., grouping by type like standard library, third-party, local). Proper import sorting improves code readability and maintainability, reducing merge conflicts.

```python
# Incorrect (unsorted):
import os
import sys
import requests

# Correct (sorted):
import os
import sys

import requests

```

--------------------------------

### Python: Avoid Star-Argument Unpacking After Keyword Arguments

Source: https://docs.astral.sh/ruff/rules/star-arg-unpacking-after-keyword-arg

This snippet demonstrates the incorrect usage of star-argument unpacking after a keyword argument in Python function calls, which can lead to `TypeError` or confusing behavior. It also shows the recommended alternatives for clearer and safer argument passing.

```python
def foo(x, y, z):
    return x, y, z


foo(1, 2, 3)  # (1, 2, 3)
foo(1, *[2, 3])  # (1, 2, 3)
# foo(x=1, *[2, 3])  # TypeError
# foo(y=2, *[1, 3])  # TypeError
foo(z=3, *[1, 2])  # (1, 2, 3)  # No error, but confusing!


foo(1, 2, 3)  # (1, 2, 3)
foo(x=1, y=2, z=3)  # (1, 2, 3)
foo(*[1, 2, 3])  # (1, 2, 3)
foo(*[1, 2], 3)  # (1, 2, 3)
```

--------------------------------

### Python: Check for whitespace after opening brackets (E201)

Source: https://docs.astral.sh/ruff/rules/whitespace-after-open-bracket

This rule, derived from pycodestyle, identifies and flags instances where whitespace is present immediately after an opening parenthesis '(', bracket '[', or brace '{'. While a fix is always available, this rule is currently in preview and requires the `--preview` flag.

```python
spam( ham[1], {eggs: 2})
spam(ham[ 1], {eggs: 2})
spam(ham[1], { eggs: 2})
```

```python
spam(ham[1], {eggs: 2})
```

--------------------------------

### Python: Correct loop variable capture with functools.partial (B023)

Source: https://docs.astral.sh/ruff/rules/function-uses-loop-variable

Illustrates an alternative correct method for using loop variables in functions by employing `functools.partial`. This approach also binds the loop variable's value at function definition time, resolving late binding problems.

```python
from functools import partial

adders = [partial(lambda x, i: x + i, i=i) for i in range(3)]
values = [adder(1) for adder in adders]  # [1, 2, 3]

```

--------------------------------

### Python Multiline F-string Expression Formatting (Python 3.12+)

Source: https://docs.astral.sh/ruff/formatter

Explains Ruff's heuristic for splitting f-string expression parts across multiple lines in Python 3.12+, based on the presence of existing line breaks within the expression. It highlights that Ruff avoids splitting natural language sentences.

```python
f"this f-string has a multiline expression {
  ['red', 'green', 'blue', 'yellow',]} and does not fit within the line length"

```

```python
# The list expression is split across multiple lines because of the trailing comma
f"this f-string has a multiline expression {
    [
        'red',
        'green',
        'blue',
        'yellow',
    ]
} and does not fit within the line length"

```

```python
f"this f-string has a multiline expression {['red', 'green', 'blue', 'yellow']} and does not fit within the line length"

```

--------------------------------

### Avoid logging.exception with exc_info=False in Python

Source: https://docs.astral.sh/ruff/rules/exception-without-exc-info

This snippet demonstrates the incorrect usage of logging.exception() with exc_info=False and the recommended alternative using logging.error(). The linter rule LOG007 flags this pattern. The primary issue is that logging.exception() is designed to automatically capture exception information, and explicitly setting exc_info=False negates this core functionality, leading to potential loss of critical debugging data. Instead, logging.error() should be used for clearer intent when exception information is not required.

```python
import logging

# Incorrect usage flagged by LOG007
logging.exception("An error occurred", exc_info=False)

# Recommended alternative
logging.error("An error occurred")
```

--------------------------------

### Explicit Dunder Method Calls vs. Operators/Builtins (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-dunder-call

Demonstrates the difference in behavior between explicitly calling dunder methods (like __gt__, __str__, __add__) and using their corresponding operators or built-in functions. It highlights potential issues such as TypeError differences and ignored instance-assigned methods.

```Python
class C:
    pass
c = C()
c.__gt__(1)  # before fix: NotImplemented
c > 1        # after fix: raises TypeError

class C:
    pass
c = C()
c.__bool__ = lambda: False
c.__bool__() # before fix: False
bool(c)      # after fix: True

(1).__gt__(1.0)  # before fix: NotImplemented
1 > 1.0          # after fix: False

three = (3.0).__str__()
twelve = "1".__add__("2")

def is_greater_than_two(x: int) -> bool:
    return x.__gt__(2)

# Preferred usage:
three = str(3.0)
twelve = "1" + "2"

def is_greater_than_two(x: int) -> bool:
    return x > 2
```

--------------------------------

### Use DefusedXML for Secure XML Parsing in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-xmlc-element-tree-usage

This code snippet shows the secure alternative to parsing XML using the 'defusedxml' package. It replaces the vulnerable 'cElementTree' import with the safe version from 'defusedxml.cElementTree', mitigating risks of XML attacks.

```python
from defusedxml.cElementTree import parse

tree = parse("untrusted.xml")
```

--------------------------------

### Enable Fix-Only Mode in Ruff

Source: https://docs.astral.sh/ruff/settings

Enables fix-only mode, which implies `fix` and additionally disables reporting on leftover violations. This is useful for ensuring only necessary fixes are applied and reported. Default is false.

```toml
[tool.ruff]
fix-only = true

```

```toml
fix-only = true

```

--------------------------------

### Detect 'xml.sax' Import

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-sax-import

This rule checks for imports of the 'xml.sax' module. Using this module for parsing untrusted XML can lead to vulnerabilities. It is recommended to replace it with the 'defusedxml' package or ensure 'defusedxml.defuse_stdlib()' is called.

```python
import xml.sax

```

--------------------------------

### Enable String Literal Import Detection in Ruff Analyze

Source: https://docs.astral.sh/ruff/settings

Determines if Ruff's analyze command should detect imports from string literals. When enabled, Ruff scans for string literals that resemble import paths and includes them if they resolve to valid Python modules. This setting can be configured in pyproject.toml or ruff.toml.

```toml
[tool.ruff.analyze]
detect-string-imports = true

```

```toml
[analyze]
detect-string-imports = true

```

--------------------------------

### Incorrect sys.version comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-cmp-str10

This Python code snippet demonstrates an incorrect way to compare the system version using sys.version and a string literal. This comparison will fail when the major Python version reaches 10 or higher, as it is performed lexicographically.

```python
import sys

sys.version >= "3"  # `False` on Python 10.

```

--------------------------------

### Ruff Configuration: Enabling Codes and Docstring Quotes in ruff.toml

Source: https://docs.astral.sh/ruff/configuration

This snippet configures Ruff to enable specific linting codes (E4, E7, E9, F, Q) and enforces double quotes for docstrings using the `flake8-quotes` plugin. This configuration is for `ruff.toml` files, omitting the `[tool.ruff]` header.

```toml
[lint]
select = ["E4", "E7", "E9", "F", "Q"]

[lint.flake8-quotes]
docstring-quotes = "double"
```

--------------------------------

### Replace Deprecated Mock Import with unittest.mock (Python)

Source: https://docs.astral.sh/ruff/rules/deprecated-mock-import

This snippet demonstrates how to replace the deprecated 'mock' import with the standard library's 'unittest.mock' module. This change is recommended for Python 3.3 and later. The input is a Python script containing the deprecated import, and the output is the corrected script.

```python
import mock
```

```python
from unittest import mock
```

--------------------------------

### isinstance with PEP 604 union syntax

Source: https://docs.astral.sh/ruff/rules/non-pep604-isinstance

This code snippet shows the alternative syntax for checking if an object is an instance of one of multiple types using the PEP 604 union operator (`|`). This approach was recommended by the now-removed UP038 rule for its conciseness, though it was noted to be slightly slower in some contexts.

```python
isinstance(x, int | float)
```

--------------------------------

### Detect Unused Keyword Arguments in str.format() - Python

Source: https://docs.astral.sh/ruff/rules/string-dot-format-extra-named-arguments

This Python code snippet demonstrates the detection of unused keyword arguments in `str.format()` calls. It highlights redundant arguments that should be removed to prevent potential mistakes. The fix is sometimes available.

```python
"Hello, {name}".format(greeting="Hello", name="World")

```

```python
"Hello, {name}".format(name="World")

```

```python
"Hello, {name}".format(greeting=print(1), name="World")

```

--------------------------------

### Pragma Comment Handling - Python

Source: https://docs.astral.sh/ruff/formatter/black

Illustrates Ruff's approach to pragma comments (`# type`, `# noqa`, etc.), which are ignored when computing line width to prevent their meaning from being altered. Black has a different strategy, primarily avoiding splitting lines with `# type` comments. Ruff's behavior is designed to keep these comments in their original, intended positions.

```python
# Input
[
    first(),  # noqa
    second()
]

# Black
[first(), second()]  # noqa

# Ruff
[
    first(),  # noqa
    second(),
]


```

--------------------------------

### Disable Ruff's Jupyter Notebook support

Source: https://docs.astral.sh/ruff/configuration

This configuration completely disables Ruff's built-in support for Jupyter Notebooks by adding `*.ipynb` to the `extend-exclude` setting in the main `[tool.ruff]` or `[ruff]` section. This prevents both linting and formatting of these files.

```toml
[tool.ruff]
extend-exclude = ["*.ipynb"]

```

```toml
extend-exclude = ["*.ipynb"]

```

--------------------------------

### Pre-commit Hooks for Ruff Excluding Jupyter Notebooks

Source: https://docs.astral.sh/ruff/integrations

This configuration customizes Ruff pre-commit hooks to exclude Jupyter Notebooks from linting and formatting. It specifies `python` and `pyi` as the only file types to process, ensuring compatibility with notebooks.

```yaml
- repo: https://github.com/astral-sh/ruff-pre-commit
  # Ruff version.
  rev: v0.14.8
  hooks:
    # Run the linter.
    - id: ruff-check
      types_or: [ python, pyi ]
      args: [ --fix ]
    # Run the formatter.
    - id: ruff-format
      types_or: [ python, pyi ]
```

--------------------------------

### Python: Refactor Try-Except Outside Loop

Source: https://docs.astral.sh/ruff/rules/try-except-in-loop

Demonstrates refactoring a try-except block from within a loop to outside the loop for performance gains. This snippet shows how to handle potential ValueErrors during integer conversion and KeyError during dictionary lookups more efficiently by restructuring the code flow. It's particularly relevant for Python versions older than 3.11.

```python
string_numbers: list[str] = ["1", "2", "three", "4", "5"]

# `try`/`except` that could be moved out of the loop:
int_numbers: list[int] = []
for num in string_numbers:
    try:
        int_numbers.append(int(num))
    except ValueError as e:
        print(f"Couldn't convert to integer: {e}")
        break

# `try`/`except` used when "look before you leap" idioms could be used:
number_names: dict[int, str] = {1: "one", 3: "three", 4: "four"}
for number in range(5):
    try:
        name = number_names[number]
    except KeyError:
        continue
    else:
        print(f"The name of {number} is {name}")

```

```python
string_numbers: list[str] = ["1", "2", "three", "4", "5"]

int_numbers: list[int] = []
try:
    for num in string_numbers:
        int_numbers.append(int(num))
except ValueError as e:
    print(f"Couldn't convert to integer: {e}")

number_names: dict[int, str] = {1: "one", 3: "three", 4: "four"}
for number in range(5):
    name = number_names.get(number)
    if name is not None:
        print(f"The name of {number} is {name}")

```

--------------------------------

### Ruff Lint: Allowed Confusables

Source: https://docs.astral.sh/ruff/settings

Specifies a list of Unicode characters that should be ignored when enforcing specific Ruff linting rules (RUF001, RUF002, RUF003). This helps prevent false positives caused by visually similar characters. Configuration can be done via `pyproject.toml` or `ruff.toml`.

```toml
[tool.ruff.lint]
# Allow minus-sign (U+2212), greek-small-letter-rho (U+03C1), and the asterisk-operator (U+2217),
# which could be confused for "-", "p", and "*", respectively.
allowed-confusables = ["", "", ""]
```

```toml
[lint]
# Allow minus-sign (U+2212), greek-small-letter-rho (U+03C1), and the asterisk-operator (U+2217),
# which could be confused for "-", "p", and "*", respectively.
allowed-confusables = ["", "", ""]
```

--------------------------------

### Detecting Insecure MD5 Hash Usage in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-insecure-hash-usage

This Python snippet demonstrates the use of the MD5 hash function from the cryptography library, which is flagged as insecure by the S303 rule due to its susceptibility to attacks. It shows the process of initializing a hash object, updating it with data, and finalizing the digest.

```python
from cryptography.hazmat.primitives import hashes

digest = hashes.Hash(hashes.MD5())
digest.update(b"Hello, world!")
digest.finalize()
```

--------------------------------

### Unsafe version parsing with map(int, split)

Source: https://docs.astral.sh/ruff/rules/map-int-version-parsing

Demonstrates the incorrect usage of map(int, __version__.split('.')) which can lead to ValueError when '__version__' contains non-integer parts. This is often seen with libraries like matplotlib.

```python
import matplotlib  # `__version__ == "3.9.1.post-1"` in our environment

# ValueError: invalid literal for int() with base 10: 'post1'
tuple(map(int, matplotlib.__version__.split(".")))
```

--------------------------------

### Use pathlib.Path.is_symlink instead of os.path.islink

Source: https://docs.astral.sh/ruff/rules/os-path-islink

This snippet demonstrates the recommended way to check if a path is a symbolic link using the pathlib module. It replaces the older os.path.islink function with the equivalent Path.is_symlink() method. Using pathlib improves code readability and type safety.

```python
import os

os.path.islink("docs")
```

```python
from pathlib import Path

Path("docs").is_symlink()
```

--------------------------------

### Python: Correct usage of asyncio.timeout with awaitable

Source: https://docs.astral.sh/ruff/rules/cancel-scope-no-checkpoint

This snippet shows the correct way to use `asyncio.timeout` by including an `await` statement within the context manager. This ensures that the timeout functionality is active and can interrupt the execution if the `awaitable()` operation takes too long. This pattern is recommended to prevent the timeout from being a no-op.

```python
import asyncio


async def func():
    async with asyncio.timeout(2):
        do_something()
        await awaitable()


```

--------------------------------

### Avoid aliased submodule imports (Python)

Source: https://docs.astral.sh/ruff/rules/manual-from-import

This rule checks for submodule imports that are aliased to the submodule name, suggesting the use of `from` imports for conciseness and readability. It is derived from the Pylint linter and has a fix available in some cases.

```python
import concurrent.futures as futures

```

```python
from concurrent import futures

```

--------------------------------

### Detect Empty Collection Membership Test (Python)

Source: https://docs.astral.sh/ruff/rules/in-empty-collection

This rule identifies instances where a membership test is performed on an empty collection. If the collection is guaranteed to be empty, the membership test is redundant and can be removed for cleaner code. Requires the --preview flag to be enabled.

```python
if 1 not in set():
    print("got it!")

```

```python
print("got it!")

```

--------------------------------

### Replace Deprecated Airflow Dataset with Asset

Source: https://docs.astral.sh/ruff/rules/airflow3-suggested-update

This snippet demonstrates the use of a deprecated Airflow Dataset constructor, which is flagged by the AIR311 linter rule. It shows the problematic code and the recommended replacement using the modern Asset constructor from airflow.sdk.

```python
from airflow import Dataset


Dataset(uri="test://test/")

```

```python
from airflow.sdk import Asset


Asset(uri="test://test/")

```

--------------------------------

### Corrected TypeVar Naming in Python Stub (PYI001)

Source: https://docs.astral.sh/ruff/rules/unprefixed-type-param

Shows the corrected usage of a TypeVar in a Python stub file, adhering to the PYI001 rule by prefixing the type parameter with an underscore. This practice helps avoid accidentally exposing internal stub names, aligning with linter recommendations.

```python
from typing import TypeVar

_T = TypeVar("_T")

```

--------------------------------

### Avoid Path().resolve() for CWD Lookup - Python

Source: https://docs.astral.sh/ruff/rules/implicit-cwd

This snippet demonstrates the incorrect usage of `Path().resolve()` for obtaining the current working directory and contrasts it with the preferred `Path.cwd()` method. Using `Path.cwd()` is more explicit about the intent to retrieve the current working directory.

```python
from pathlib import Path

cwd = Path().resolve()
```

```python
from pathlib import Path

cwd = Path.cwd()
```

--------------------------------

### Configure Ruff Language Server Trace Level

Source: https://docs.astral.sh/ruff/editors/settings

Sets the trace level for the Ruff language server, providing insights into communication with the Language Server Protocol (LSP). Refer to the LSP specification for details on trace levels, which can be 'off', 'messages', or 'verbose'.

```json
{
    "ruff.trace.server": "messages"
}
```

--------------------------------

### Correct __exit__ signature for type checking (Python)

Source: https://docs.astral.sh/ruff/rules/bad-exit-annotation

This code snippet shows the correct way to annotate an `__exit__` method signature for compatibility with type checkers. Proper type hints for exception types, exceptions, and tracebacks ensure predictable behavior and accurate code analysis.

```python
from types import TracebackType

class Foo:
    def __exit__(
        self,
        typ: type[BaseException] | None,
        exc: BaseException | None,
        tb: TracebackType | None,
    ) -> None: ...

```

--------------------------------

### Avoid tempfile.mktemp in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-mktemp-usage

This rule detects the usage of `tempfile.mktemp`, which is insecure as it returns a pathname for a file that doesn't exist at the time of the call, creating a race condition vulnerability. It suggests using `tempfile.mkstemp` or `tempfile.TemporaryFile` for safer file creation.

```python
import tempfile

tmp_file = tempfile.mktemp()
with open(tmp_file, "w") as file:
    file.write("Hello, world!")


```

```python
import tempfile

with tempfile.TemporaryFile() as file:
    file.write("Hello, world!")

```

--------------------------------

### Correct usage of pytest fixtures

Source: https://docs.astral.sh/ruff/rules/pytest-erroneous-use-fixtures-on-fixture

This snippet shows the correct way to define and use `pytest` fixtures without the erroneous `pytest.mark.usefixtures` decorator. Fixture dependencies are handled by direct parameter injection.

```python
import pytest


@pytest.fixture()
def a():
    pass


@pytest.fixture()
def b(a):
    pass

```

--------------------------------

### Correct Exception Re-raising with Cause (Python)

Source: https://docs.astral.sh/ruff/rules/reraise-no-cause

This Python code snippet shows the correct way to re-raise an exception, explicitly specifying the cause using the 'from' keyword. This practice is crucial for effective debugging as it preserves the exception chain by setting the '__cause__' attribute. The 'exc' variable captures the original exception.

```python
def reciprocal(n):
    try:
        return 1 / n
    except ZeroDivisionError as exc:
        raise ValueError() from exc
```

--------------------------------

### Incorrect: yield from in async function (Python)

Source: https://docs.astral.sh/ruff/rules/yield-from-in-async-function

Demonstrates the incorrect usage of `yield from` within an asynchronous function. This pattern will lead to a `SyntaxError` at runtime. The code is written in Python.

```python
async def numbers():
    yield from [1, 2, 3, 4, 5]

```

--------------------------------

### Python: Incorrect Tuple Length Version Comparison (PYI005)

Source: https://docs.astral.sh/ruff/rules/wrong-tuple-length-version-comparison

This snippet demonstrates an incorrect way to compare Python version information using sys.version_info with a tuple of the wrong length. It highlights a common pitfall in stub files where such comparisons can lead to unintended consequences.

```python
import sys

if sys.version_info[:2] == (3,): ...
```

--------------------------------

### Ruff Configuration: Enabling Codes and Docstring Quotes in pyproject.toml

Source: https://docs.astral.sh/ruff/configuration

This snippet configures Ruff to enable specific linting codes (E4, E7, E9, F, Q) and enforces double quotes for docstrings using the `flake8-quotes` plugin. This is typically placed within the `[tool.ruff]` section of `pyproject.toml`.

```toml
[tool.ruff.lint]
select = ["E4", "E7", "E9", "F", "Q"]

[tool.ruff.lint.flake8-quotes]
docstring-quotes = "double"
```

--------------------------------

### Check Missing Blank Lines Between Top-Level Functions and Classes (Python)

Source: https://docs.astral.sh/ruff/rules/blank-lines-top-level

This rule checks for the correct number of blank lines between top-level functions and classes, adhering to PEP 8 guidelines. It ensures readability by enforcing standard spacing. The rule is compatible with isort's import line settings.

```python
def func1():
    pass
def func2():
    pass


```

```python
def func1():
    pass


def func2():
    pass


```

--------------------------------

### Correct printf-style format string usage

Source: https://docs.astral.sh/ruff/rules/percent-format-invalid-format

This snippet shows the correct way to use printf-style format strings in Python, ensuring that a valid conversion type follows the '%' character. This adheres to the requirements checked by linters like Pyflakes.

```python
"Hello, %s" % "world"

```

--------------------------------

### Parenthesize Tuple in Subscript Rule (Ruff)

Source: https://docs.astral.sh/ruff/settings

The `parenthesize-tuple-in-subscript` option enforces the use of parentheses around tuples when used as keys in subscripts, aligning with the RUF031 rule. This improves code clarity and consistency.

```toml
[tool.ruff.lint.ruff]
# Make it a violation to use a tuple in a subscript without parentheses.
parenthesize-tuple-in-subscript = true

```

```toml
[lint.ruff]
# Make it a violation to use a tuple in a subscript without parentheses.
parenthesize-tuple-in-subscript = true

```

--------------------------------

### Detecting datetime.datetime.min/max (Python)

Source: https://docs.astral.sh/ruff/rules/datetime-min-max

This snippet demonstrates the usage of datetime.datetime.min and datetime.datetime.max, highlighting potential ValueErrors when calling .timestamp() on these non-timezone-aware objects. It is recommended to use timezone-aware datetime objects instead.

```python
import datetime

# Timezone: UTC-14
datetime.datetime.min.timestamp()  # ValueError: year 0 is out of range
datetime.datetime.max.timestamp()  # ValueError: year 10000 is out of range
```

```python
import datetime

datetime.datetime.max
```

```python
import datetime

datetime.datetime.max.replace(tzinfo=datetime.UTC)
```

--------------------------------

### Configure Code Actions on Save in VS Code

Source: https://docs.astral.sh/ruff/editors/features

This configuration enables automatic fixing of all Ruff issues and organizing imports when a Python file is saved in VS Code. It ensures code quality and consistency by applying fixes and reorganizing imports automatically.

```json
{
  "[python]": {
    "editor.codeActionsOnSave": {
      "source.fixAll.ruff": "explicit",
      "source.organizeImports.ruff": "explicit"
    }
  }
}
```

--------------------------------

### Python: Correct Mutable Default Argument Usage

Source: https://docs.astral.sh/ruff/rules/mutable-argument-default

This Python code snippet shows the correct way to handle mutable default arguments. Instead of directly using a mutable object as a default, `None` is used. Inside the function, it checks if the argument is `None` and, if so, initializes a new mutable object (an empty list in this case). This ensures that each function call receives a fresh, independent mutable object, preventing shared state issues.

```python
def add_to_list(item, some_list=None):
    if some_list is None:
        some_list = []
    some_list.append(item)
    return some_list


l1 = add_to_list(0)
l2 = add_to_list(1)

```

--------------------------------

### Correcting Unnecessary Comprehensions (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-comprehension

Demonstrates the correct way to rewrite unnecessary comprehensions using the dict(), list(), and set() constructors in Python. This provides the intended, more efficient code.

```python
dict(iterable)
list(iterable)
set(iterable)
```

--------------------------------

### Avoid Insecure XML Parser Usage (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-expat-reader-usage

This snippet demonstrates the incorrect usage of the `xml.sax.expatreader` for XML parsing, which is vulnerable to XML attacks. It highlights the need to use safer alternatives provided by the `defusedxml` package to prevent potential security risks like excessive resource consumption.

```python
from xml.sax.expatreader import create_parser

parser = create_parser()
```

```python
from defusedxml.sax import create_parser

parser = create_parser()
```

--------------------------------

### Incorrect Property Definition with Parameters (Python)

Source: https://docs.astral.sh/ruff/rules/property-with-parameters

This snippet demonstrates the incorrect way to define a property that accepts a parameter. Properties in Python should not have parameters; instead, methods should be used for parameterized operations.

```python
class Cat:
    @property
    def purr(self, volume): ...

```

--------------------------------

### Avoid return in generator (Python)

Source: https://docs.astral.sh/ruff/rules/return-in-generator

This snippet demonstrates the incorrect usage of 'return {value}' in a Python generator function, which can lead to unexpected behavior. It also shows the corrected approach using 'yield from' to achieve the intended outcome.

```python
from collections.abc import Iterable
from pathlib import Path

def get_file_paths(file_types: Iterable[str] | None = None) -> Iterable[Path]:
    dir_path = Path(".")
    if file_types is None:
        return dir_path.glob("*")

    for file_type in file_types:
        yield from dir_path.glob(f"*.{file_type}")

```

```python
from collections.abc import Iterable
from pathlib import Path

def get_file_paths(file_types: Iterable[str] | None = None) -> Iterable[Path]:
    dir_path = Path(".")
    if file_types is None:
        yield from dir_path.glob("*Develop a Python function that checks for `return {value}` statements in generator functions.")
    else:
        for file_type in file_types:
            yield from dir_path.glob(f"*.{file_type}")

```

--------------------------------

### Check for Trailing Whitespace (Python)

Source: https://docs.astral.sh/ruff/rules/trailing-whitespace

This snippet demonstrates the detection of superfluous trailing whitespace, a common issue flagged by linters like Ruff, derived from pycodestyle. It ensures code adheres to PEP 8 standards by removing invisible trailing spaces. The fix is generally safe, but caution is advised for multiline strings.

```python
spam(1)
#


```

```python
spam(1)
#

```

--------------------------------

### Python: Refactor with Keyword-Only Argument

Source: https://docs.astral.sh/ruff/rules/boolean-type-hint-positional-argument

Demonstrates refactoring a Python function to use a keyword-only boolean argument. This forces the caller to explicitly name the argument, improving clarity and reducing the risk of misinterpretation compared to positional booleans.

```python
from math import ceil, floor


def round_number(number: float, *, up: bool) -> int:
    return ceil(number) if up else floor(number)


round_number(1.5, up=True)
round_number(1.5, up=False)
```

--------------------------------

### Check for math constants (Python)

Source: https://docs.astral.sh/ruff/rules/math-constant

This snippet demonstrates how the math-constant rule identifies hardcoded floating-point numbers that represent standard mathematical constants like pi. It suggests replacing these literals with their `math` module equivalents for better code quality.

```python
A = 3.141592 * r**2
```

```python
A = math.pi * r**2
```

--------------------------------

### Avoid Insecure XML Parsing with xml.dom.minidom (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-mini-dom-usage

This snippet demonstrates the insecure usage of `xml.dom.minidom.parse` for XML parsing. This method is vulnerable to XML attacks. The rule flags this pattern to encourage the use of secure alternatives.

```python
from xml.dom.minidom import parse

content = parse("untrusted.xml")

```

--------------------------------

### Mark Non-Security Hashing with usedforsecurity=False

Source: https://docs.astral.sh/ruff/rules/hashlib-insecure-hash-function

This snippet illustrates how to use a potentially weak hash function like `hashlib.md5` in a non-security context. By setting `usedforsecurity=False`, you explicitly indicate that the hash is for purposes like data compression and not cryptographic security, thus satisfying the linter.

```python
import hashlib


def certificate_is_valid(certificate: bytes, known_hash: str) -> bool:
    hash = hashlib.md5(certificate, usedforsecurity=False).hexdigest()
    return hash == known_hash

```

--------------------------------

### Exclude Jupyter Notebooks from Ruff formatting

Source: https://docs.astral.sh/ruff/configuration

This configuration prevents Ruff from formatting Jupyter Notebook files (`.ipynb`) by adding them to the `exclude` list within the `[tool.ruff.format]` or `[format]` sections. Linting of these files remains unaffected.

```toml
[tool.ruff.format]
exclude = ["*.ipynb"]

```

```toml
[format]
exclude = ["*.ipynb"]

```

--------------------------------

### Use legacy np.random functions

Source: https://docs.astral.sh/ruff/rules/numpy-legacy-random

Demonstrates the usage of legacy random number generation functions directly from the np.random module. This approach is discouraged by NumPy due to potential performance and statistical limitations compared to the newer Generator API.

```python
import numpy as np

np.random.seed(1337)
np.random.normal()

```

--------------------------------

### Incorrect sys.platform check in Python

Source: https://docs.astral.sh/ruff/rules/unrecognized-platform-check

This code snippet demonstrates an incorrect way to check sys.platform using string slicing, which can lead to type checker inference issues. The rule is specific to .pyi stub files.

```python
import sys

if sys.platform == "xunil"[::-1]:
    # Linux specific definitions
    ...
else:
    # Posix specific definitions
    ...
```

--------------------------------

### Efficient List Flattening with List Comprehension in Python

Source: https://docs.astral.sh/ruff/rules/quadratic-list-summation

Presents an efficient list comprehension for flattening a list of lists. This method offers linear time complexity and is often considered a Pythonic way to achieve list flattening.

```Python
lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
[item for sublist in lists for item in sublist]
```

--------------------------------

### Simplify multiple isinstance calls with a tuple (Python)

Source: https://docs.astral.sh/ruff/rules/duplicate-isinstance-call

This code snippet demonstrates how to refactor multiple `isinstance` checks into a single call using a tuple. This improves code readability and conciseness. The function accepts an object and checks if it's an instance of any type within the provided tuple.

```python
if isinstance(obj, int) or isinstance(obj, float):
    pass

# Use instead:
if isinstance(obj, (int, float)):
    pass
```

--------------------------------

### Avoid MD5 for Security Hashing

Source: https://docs.astral.sh/ruff/rules/hashlib-insecure-hash-function

This snippet demonstrates the incorrect use of `hashlib.md5` for security-sensitive hashing. It's vulnerable to collision and pre-image attacks. The rule flags this pattern as a security risk.

```python
import hashlib


def certificate_is_valid(certificate: bytes, known_hash: str) -> bool:
    hash = hashlib.md5(certificate).hexdigest()
    return hash == known_hash

```

--------------------------------

### Detect and Fix Extraneous Blank Lines (Python)

Source: https://docs.astral.sh/ruff/rules/too-many-blank-lines

This snippet demonstrates the 'too-many-blank-lines' (E303) rule from Ruff, which identifies and helps correct excessive blank lines between code blocks. It adheres to PEP 8 standards for line spacing, with special considerations for typing stub files (`.pyi`). The fix is always available, and the rule is available in preview mode.

```python
def func1():
    pass


def func2():
    pass

```

```python
def func1():
    pass

def func2():
    pass

```

--------------------------------

### Add type annotation to *args in Python

Source: https://docs.astral.sh/ruff/rules/missing-type-args

This snippet demonstrates how to add type annotations to *args in Python functions. It helps in documenting expected argument types and facilitates type checking for bug prevention. No external dependencies are required.

```python
def foo(*args): ...

# Use instead:
def foo(*args: int): ...

```

--------------------------------

### Migrate from cElementTree to ElementTree (Python)

Source: https://docs.astral.sh/ruff/rules/deprecated-c-element-tree

This snippet demonstrates how to replace the deprecated `xml.etree.cElementTree` module with the recommended `xml.etree.ElementTree` module. The fix involves changing the import statement. No external dependencies are required beyond Python's standard library.

```python
from xml.etree import cElementTree as ET
```

```python
from xml.etree import ElementTree as ET
```

--------------------------------

### Avoid marshal deserialization (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-marshal-usage

Demonstrates the insecure use of Python's 'marshal.load' function to deserialize data from a file. This is flagged because deserializing untrusted data with 'marshal' can lead to arbitrary code execution.

```python
import marshal

with open("foo.marshal", "rb") as file:
    foo = marshal.load(file)

```

--------------------------------

### Avoid Naive Datetime with fromtimestamp (Python)

Source: https://docs.astral.sh/ruff/rules/call-datetime-fromtimestamp

This code snippet demonstrates the incorrect usage of `datetime.datetime.fromtimestamp()` which results in a naive datetime object. It is recommended to always specify a timezone to create timezone-aware objects, preventing potential errors in time-based calculations.

```Python
import datetime

datetime.datetime.fromtimestamp(946684800)
```

```Python
import datetime

datetime.datetime.fromtimestamp(946684800, tz=datetime.timezone.utc)
```

```Python
import datetime

datetime.datetime.fromtimestamp(946684800, tz=datetime.UTC)
```

--------------------------------

### Check for ftplib Import using Python

Source: https://docs.astral.sh/ruff/rules/suspicious-ftplib-import

This code snippet demonstrates the import of the `ftplib` module in Python. This check is performed by the Ruff linter rule S402, derived from `flake8-bandit`, to identify potentially insecure FTP usage. It flags this import as it recommends using secure protocols like SFTP or SCP.

```python
import ftplib
```

--------------------------------

### Detect Suspicious xml.dom.minidom Import (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-minidom-import

This rule checks for the import of the 'xml.dom.minidom' module in Python. This module is vulnerable to XML attacks when parsing untrusted data. It is recommended to use the 'defusedxml' package instead or call 'defusedxml.defuse_stdlib()' before parsing.

```python
import xml.dom.minidom

```

--------------------------------

### Avoid Redundant Calls Around sorted() - Python

Source: https://docs.astral.sh/ruff/rules/unnecessary-call-around-sorted

This snippet demonstrates the unnecessary use of reversed() around sorted() and the recommended alternative using the 'reverse' argument. It highlights a common inefficiency in Python code.

```python
reversed(sorted(iterable))

# Use instead:
sorted(iterable, reverse=True)
```

--------------------------------

### Python: Correct Placement of __future__ Imports

Source: https://docs.astral.sh/ruff/rules/late-future-import

Demonstrates the correct placement of __future__ imports at the beginning of a Python file. Incorrect placement can lead to SyntaxErrors. This rule is derived from Pyflakes.

```python
from __future__ import annotations

from pathlib import Path

```

--------------------------------

### Avoid 'and-or' Ternary Syntax (Python)

Source: https://docs.astral.sh/ruff/rules/and-or-ternary

This snippet demonstrates the old, discouraged 'and-or' ternary syntax in Python, which is less readable than the modern 'if-else' expression. It checks for uses of the known pre-Python 2.5 ternary syntax.

```python
x, y = 1, 2
maximum = x >= y and x or y
```

--------------------------------

### Avoid logging.WARN, Use logging.WARNING (Python)

Source: https://docs.astral.sh/ruff/rules/undocumented-warn

This snippet demonstrates the incorrect usage of `logging.WARN` and the recommended alternative `logging.WARNING`. The `logging.WARN` constant is an undocumented alias and should be avoided in favor of the officially documented `logging.WARNING`.

```python
import logging


logging.basicConfig(level=logging.WARN)

```

```python
import logging


logging.basicConfig(level=logging.WARNING)

```

--------------------------------

### Set Max String Length for Error Messages (Ruff Lint)

Source: https://docs.astral.sh/ruff/settings

Configures the maximum allowed length for string literals within exception messages. A value of `0` indicates no limit. This helps maintain code readability and consistency in error reporting.

```toml
[tool.ruff.lint.flake8-errmsg]
max-string-length = 20

```

```toml
[lint.flake8-errmsg]
max-string-length = 20

```

--------------------------------

### Replace manual index with enumerate (Python)

Source: https://docs.astral.sh/ruff/rules/enumerate-for-loop

This snippet demonstrates how to replace a manually incremented index variable in a for loop with Python's `enumerate` function. `enumerate` provides both the index and the value of each item in an iterable, making the code more concise and readable. This rule is particularly useful for preventing common off-by-one errors.

```Python
fruits = ["apple", "banana", "cherry"]
i = 0
for fruit in fruits:
    print(f"{i + 1}. {fruit}")
    i += 1

```

```Python
fruits = ["apple", "banana", "cherry"]
for i, fruit in enumerate(fruits):
    print(f"{i + 1}. {fruit}")

```

--------------------------------

### Replace str() constructor with literal (Python)

Source: https://docs.astral.sh/ruff/rules/native-literals

This code snippet demonstrates the unnecessary use of the `str()` constructor, which can be replaced by its literal string form. This improves code readability and adheres to Pythonic conventions. No external dependencies are required for this transformation.

```python
str("foo")
```

--------------------------------

### Avoid Redundant 'open' Mode Arguments in Python

Source: https://docs.astral.sh/ruff/rules/redundant-open-modes

This snippet demonstrates how to fix redundant 'open' mode arguments in Python's `open()` function. The fix involves removing the 'r' mode when it's the default, simplifying the code and preventing confusion. This rule is derived from pyupgrade.

```python
with open("foo.txt", "r") as f:
    ...
```

```python
with open("foo.txt") as f:
    ...
```

--------------------------------

### Detect 'continue' in 'finally' (Python)

Source: https://docs.astral.sh/ruff/rules/continue-in-finally

This snippet demonstrates the incorrect usage of a 'continue' statement within a 'finally' block, which can lead to a SyntaxError in Python versions prior to 3.8. It also shows the recommended alternative using an 'except' and 'else' block.

```python
while True:
    try:
        pass
    finally:
        continue

```

```python
while True:
    try:
        pass
    except Exception:
        pass
    else:
        continue

```

--------------------------------

### Use Public Member Access Instead in Python

Source: https://docs.astral.sh/ruff/rules/private-member-access

This snippet illustrates the recommended practice of accessing members through the public interface of a Python class. Instead of directly accessing `_private_member`, a public member `public_member` is used, aligning with the linter's guidelines for maintainable and robust code.

```python
class Class:
    def __init__(self):
        self.public_member = "..."


var = Class()
print(var.public_member)

```

--------------------------------

### Configure Allowed Magic Value Types for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Defines constant types to ignore when they are used as 'magic values'. This helps in cases where magic numbers or strings are intentionally used and shouldn't trigger linting errors. Default value includes `str`, `bytes`. Supports `str`, `bytes`, `complex`, `float`, `int` types.

```toml
[tool.ruff.lint.pylint]
allow-magic-value-types = ["int"]

```

```toml
[lint.pylint]
allow-magic-value-types = ["int"]

```

--------------------------------

### Correct Function Docstring Signature (Python)

Source: https://docs.astral.sh/ruff/rules/signature-in-docstring

This snippet shows the recommended approach for function docstrings, adhering to PEP 257 by using type annotations and keeping the summary line concise. This is the preferred format according to Ruff's D402 rule.

```python
def foo(a: int, b: int) -> list[int]:
    """Return a list of a and b."""


```

--------------------------------

### Python Function With Correct Returns Docstring Section

Source: https://docs.astral.sh/ruff/rules/docstring-missing-returns

This Python code snippet shows the corrected version of 'calculate_speed', now including a 'Returns' section in its docstring to comply with the DOC201 linter rule. Properly documenting return values is crucial for code clarity and maintainability. The 'Returns' section explicitly describes what the function returns.

```python
def calculate_speed(distance: float, time: float) -> float:
    """Calculate speed as distance divided by time.

    Args:
        distance: Distance traveled.
        time: Time spent traveling.

    Returns:
        Speed as distance divided by time.
    """
    return distance / time
```

--------------------------------

### Python: Optimize Typing Imports with TYPE_CHECKING

Source: https://docs.astral.sh/ruff/rules/typing-only-first-party-import

This snippet demonstrates how to refactor Python code to move type-only imports into a `TYPE_CHECKING` block. This reduces runtime overhead by ensuring the import is only processed during type checking, not execution. It is particularly useful for imports that are exclusively used for type annotations.

```python
from __future__ import annotations

from . import local_module


def func(sized: local_module.Container) -> int:
    return len(sized)

```

```python
from __future__ import annotations

from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from . import local_module


def func(sized: local_module.Container) -> int:
    return len(sized)

```

--------------------------------

### Insecure XML Parsing with ExpatBuilder

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-expat-builder-usage

This snippet demonstrates the insecure usage of the xml.dom.expatbuilder.parse function, which is vulnerable to XML attacks. It is recommended to avoid this pattern when dealing with untrusted XML data.

```python
from xml.dom.expatbuilder import parse

parse("untrusted.xml")

```

--------------------------------

### Secure XML Parser Usage with defusedxml in Python

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-sax-usage

This snippet shows the secure alternative for XML parsing using the 'defusedxml' package. By importing 'make_parser' from 'defusedxml.sax', you protect against common XML vulnerabilities like entity expansion attacks.

```python
from defusedxml.sax import make_parser

make_parser()
```

--------------------------------

### Avoid Too Many Return Statements in Python

Source: https://docs.astral.sh/ruff/rules/too-many-return-statements

This Python code snippet demonstrates a function with multiple return statements, which can be hard to maintain. The rule suggests refactoring to use a dictionary lookup for a cleaner and more scalable solution.

```python
def capital(country: str) -> str | None:
    if country == "England":
        return "London"
    elif country == "France":
        return "Paris"
    elif country == "Poland":
        return "Warsaw"
    elif country == "Romania":
        return "Bucharest"
    elif country == "Spain":
        return "Madrid"
    elif country == "Thailand":
        return "Bangkok"
    else:
        return None
```

```python
def capital(country: str) -> str | None:
    capitals = {
        "England": "London",
        "France": "Paris",
        "Poland": "Warsaw",
        "Romania": "Bucharest",
        "Spain": "Madrid",
        "Thailand": "Bangkok",
    }
    return capitals.get(country)
```

--------------------------------

### Avoid sys.version_info.minor integer comparison (Python)

Source: https://docs.astral.sh/ruff/rules/sys-version-info-minor-cmp-int

This snippet demonstrates the incorrect way to compare the Python minor version against an integer, which can lead to bugs. It is derived from the flake8-2020 linter.

```Python
import sys

if sys.version_info.minor < 7:
    print("Python 3.6 or earlier.")  # This will be printed on Python 4.0.

```

--------------------------------

### Compare to Empty String in Python

Source: https://docs.astral.sh/ruff/rules/compare-to-empty-string

This rule checks for direct comparisons to empty strings, which can often be simplified. It's recommended to use truthiness checks instead of explicit '== ""' comparisons. This rule is marked as unstable and requires the --preview flag.

```python
x: str = ...

if x == "":
    print("x is empty")

```

```python
x: str = ...

if not x:
    print("x is empty")

```

--------------------------------

### NumPy 2.0 deprecation warnings (Python)

Source: https://docs.astral.sh/ruff/rules

This rule flags NumPy functions or features (`{existing}`) that are marked for removal in NumPy 2.0. It often includes a link to a `{migration_guide}` to assist developers in updating their code. Addressing these warnings proactively ensures smooth transition to NumPy 2.0.

```python
# Example: If np.some_old_feature is being removed in NumPy 2.0
# import numpy as np

# Code using np.some_old_feature might trigger this warning.
# Developers should consult the migration guide and replace it with the recommended alternative.
# For instance, if np.some_old_feature is replaced by np.new_feature:
# result = np.new_feature()

```

--------------------------------

### Python Stub with Redundant __repr__ Definition (PYI029)

Source: https://docs.astral.sh/ruff/rules/str-or-repr-defined-in-stub

This snippet demonstrates a Python stub file (`.pyi`) where a class defines its own `__repr__` method. This is considered redundant because the default implementation from `object.__repr__` is usually sufficient and has identical type hints.

```python
class Foo:
    def __repr__(self) -> str: ...
```

--------------------------------

### Unnecessary Comprehension vs. Generator Expression (Python)

Source: https://docs.astral.sh/ruff/rules/unnecessary-comprehension-in-call

This snippet demonstrates the inefficient use of list comprehensions with built-in functions like `any`, `all`, `sum`, `min`, and `max`. It shows the recommended alternative using generator expressions, which are more memory-efficient and can leverage short-circuiting for performance gains.

```python
any([x.id for x in bar])
all([x.id for x in bar])
sum([x.val for x in bar])
min([x.val for x in bar])
max([x.val for x in bar])
```

```python
any(x.id for x in bar)
all(x.id for x in bar)
sum(x.val for x in bar)
min(x.val for x in bar)
max(x.val for x in bar)
```

--------------------------------

### Detect Vulnerable XML Import (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-xml-expat-import

This snippet checks for the import of the `xml.dom.expatbuilder` module in Python. This module is known to be vulnerable to XML attacks when parsing untrusted data. The recommended fix is to use the `defusedxml` package instead.

```python
import xml.dom.expatbuilder

```

--------------------------------

### Detect Insecure SSL/TLS Versions in Python (ssl module)

Source: https://docs.astral.sh/ruff/rules/ssl-insecure-version

This snippet demonstrates how to detect the use of insecure SSL/TLS versions (like PROTOCOL_TLSv1) when wrapping sockets using Python's built-in 'ssl' module. It highlights the insecure practice and suggests the more secure PROTOCOL_TLSv1_2 as an alternative.

```python
import ssl

ssl.wrap_socket(ssl_version=ssl.PROTOCOL_TLSv1)
```

```python
import ssl

ssl.wrap_socket(ssl_version=ssl.PROTOCOL_TLSv1_2)
```

--------------------------------

### Extend Pytest Warns Matching (TOML)

Source: https://docs.astral.sh/ruff/settings

Specify additional warning names that require a 'match=' parameter in pytest.warns() calls. This setting extends the default list and handles glob patterns, offering flexibility for custom warnings.

```toml
[tool.ruff.lint.flake8-pytest-style]
warns-extend-require-match-for = ["requests.RequestsWarning"]

```

```toml
[lint.flake8-pytest-style]
warns-extend-require-match-for = ["requests.RequestsWarning"]

```

--------------------------------

### Use NumPy Generator for random number generation (Python)

Source: https://docs.astral.sh/ruff/rules

This rule recommends replacing legacy random number generation methods in NumPy (e.g., `np.random.rand()`) with the modern `np.random.Generator` API. The `Generator` provides a more robust and flexible way to handle random number generation, including better control over distributions and reproducibility.

```python
# Instead of:
# import numpy as np
# random_number = np.random.rand()

# Use Generator:
import numpy as np
rng = np.random.default_rng() # Create a generator instance
random_number = rng.random() # Generate a random float between 0 and 1

# For specific distributions:
random_integers = rng.integers(100, size=5) # Generate 5 random integers between 0 and 99

```

--------------------------------

### Python: Unnecessary Decimal/Fraction from_float/from_decimal Usage

Source: https://docs.astral.sh/ruff/rules/unnecessary-from-float

This snippet demonstrates the incorrect usage of `from_float` and `from_decimal` methods for constructing `Decimal` and `Fraction` objects in Python. It highlights that direct constructor calls are preferred for better conciseness, while also acknowledging potential differences in type validation and argument handling between the methods and constructors.

```python
from decimal import Decimal
from fractions import Fraction

# Incorrect usage
Decimal.from_float(4.2)
Decimal.from_float(float("inf"))
Fraction.from_float(4.2)
Fraction.from_decimal(Decimal("4.2"))

```

```python
from decimal import Decimal
from fractions import Fraction

# Correct usage
Decimal(4.2)
Decimal("inf")
Fraction(4.2)
Fraction(Decimal("4.2"))

```

--------------------------------

### Disable Import Section Grouping (TOML)

Source: https://docs.astral.sh/ruff/settings

When enabled, this option consolidates all imports into a single section, removing the typical separation between standard library, third-party, and other import groups. This simplifies import blocks.

```toml
[tool.ruff.lint.isort]
no-sections = true
```

```toml
[lint.isort]
no-sections = true
```

--------------------------------

### Avoid sys.version[2] for Minor Version Checks in Python

Source: https://docs.astral.sh/ruff/rules/sys-version2

This snippet demonstrates the incorrect usage of `sys.version[2]` for accessing the minor Python version, highlighting its potential to yield incorrect results (e.g., '1' instead of '10' for Python 3.10). It contrasts this with the recommended `sys.version_info.minor` which correctly retrieves the minor version number.

```python
import sys

sys.version[2]  # Evaluates to "1" on Python 3.10.

```

```python
import sys

f"{sys.version_info.minor}"  # Evaluates to "10" on Python 3.10.

```

--------------------------------

### Avoid yaml.load for Security - Python

Source: https://docs.astral.sh/ruff/rules/unsafe-yaml-load

This snippet demonstrates the insecure usage of `yaml.load` which can lead to arbitrary code execution when parsing untrusted YAML files. It is derived from the flake8-bandit linter.

```python
import yaml

untrusted_yaml = "..."
yaml.load(untrusted_yaml)
```

--------------------------------

### Check for Uncapitalized Environment Variables in Python

Source: https://docs.astral.sh/ruff/rules/uncapitalized-environment-variables

This snippet demonstrates how to check for environment variables in Python using `os.environ`. It highlights the issue of using lowercase environment variable names, which violates convention and can cause subtle bugs on case-insensitive systems. The recommended practice is to use capitalized names.

```python
import os

os.environ["foo"]

```

```python
import os

os.environ["FOO"]

```

--------------------------------

### Incorrect sys.platform check in Python stub file

Source: https://docs.astral.sh/ruff/rules/unrecognized-platform-name

This Python code snippet demonstrates an incorrect comparison with a platform name ('linus' instead of 'linux') in a sys.platform check. This rule is specifically for .pyi files and flags potential typos or unrecognized platform names, which can mislead type checkers.

```python
import sys

if sys.platform == "linus": ...

```

--------------------------------

### Inefficient List/Tuple Membership Test (Python)

Source: https://docs.astral.sh/ruff/rules/literal-membership

This snippet demonstrates the inefficient practice of using list or tuple literals for membership testing. Python's set data structure offers significantly better performance for such operations.

```python
1 in [1, 2, 3]

```

--------------------------------

### Stub Assignment with Simple Default Value Ellipsis (Python)

Source: https://docs.astral.sh/ruff/rules/assignment-default-in-stub

This snippet shows the correct way to indicate a default value in a Python stub file (.pyi) when the actual default is non-simple or varies. Using the ellipsis ('...') is the recommended approach by the PYI015 rule from flake8-pyi, as it signifies a default without including a runtime-evaluated value, which is ignored in stub files.

```python
foo: str = ...
```

--------------------------------

### Enforce Function Argument Type Annotations (Python)

Source: https://docs.astral.sh/ruff/rules/missing-type-function-argument

This snippet demonstrates the use of type annotations for function arguments, as checked by the ANN001 rule in ruff. It highlights the difference between a function with and without type annotations. Ensure that all function parameters are annotated with their expected types for better code quality and type safety.

```python
def foo(x):
    pass

# Use instead:
def foo(x: int):
    pass

```

--------------------------------

### Correct Lock Usage with 'with' Statement (Python)

Source: https://docs.astral.sh/ruff/rules/useless-with-lock

Shows the correct and recommended way to use a threading.Lock with a 'with' statement in Python. By assigning the lock to a variable ('lock') outside the 'with' block, it can be effectively shared and utilized for thread synchronization, ensuring that critical sections are properly protected.

```python
import threading

counter = 0
lock = threading.Lock()


def increment():
    global counter

    with lock:
        counter += 1

```

--------------------------------

### Python: Avoid Redundant Import Aliases (PLC0414)

Source: https://docs.astral.sh/ruff/rules/useless-import-alias

This rule checks for import aliases that do not actually rename the imported package. Such aliases are redundant and can lead to confusion. The rule is not applied in `__init__.py` files. The fix is considered unsafe as redundant aliases might be used for intentional re-exporting.

```python
import numpy as numpy

# Use instead:
# import numpy as np
# or
# import numpy
```

--------------------------------

### Configure Max Nested Blocks for Ruff Pylint

Source: https://docs.astral.sh/ruff/settings

Defines the maximum number of nested blocks allowed within a function or method body. Deeply nested code can be hard to read and maintain. The default value is 5. This setting corresponds to the `PLR1702` linting rule.

```toml
[tool.ruff.lint.pylint]
max-nested-blocks = 10

```

```toml
[lint.pylint]
max-nested-blocks = 10

```

--------------------------------

### Detect Constant Import Aliased Incorrectly (Python)

Source: https://docs.astral.sh/ruff/rules/constant-imported-as-non-constant

This snippet demonstrates the incorrect usage of aliasing a constant import with a non-constant naming style, violating PEP 8. It is followed by the recommended correct usage where the alias matches the constant naming convention.

```python
from example import CONSTANT_VALUE as ConstantValue

```

```python
from example import CONSTANT_VALUE

```

--------------------------------

### Exclude Jupyter Notebooks from Ruff linting

Source: https://docs.astral.sh/ruff/configuration

This configuration prevents Ruff from linting Jupyter Notebook files (`.ipynb`) by adding them to the `exclude` list within the `[tool.ruff.lint]` or `[lint]` sections. Formatting of these files remains unaffected.

```toml
[tool.ruff.lint]
exclude = ["*.ipynb"]

```

```toml
[lint]
exclude = ["*.ipynb"]

```

--------------------------------

### Configure Pytest Parametrize Values Row Type (TOML)

Source: https://docs.astral.sh/ruff/settings

Defines the expected type for each row of values in `@pytest.mark.parametrize` when multiple parameters are used. Options include `tuple` (default) and `list`.

```toml
[tool.ruff.lint.flake8-pytest-style]
parametrize-values-row-type = "list"

```

```toml
[lint.flake8-pytest-style]
parametrize-values-row-type = "list"

```

--------------------------------

### Python Docstring Capitalization Check (D403)

Source: https://docs.astral.sh/ruff/rules/first-word-uncapitalized

This snippet demonstrates the Ruff D403 check for Python docstrings. It verifies that the first word of a docstring is capitalized, adhering to PEP 257 conventions. The linter automatically suggests and applies fixes for non-compliant docstrings.

```python
def average(values: list[float]) -> float:
    """return the mean of the given values."""


```

```python
def average(values: list[float]) -> float:
    """Return the mean of the given values."""


```

--------------------------------

### Configure Pytest Parametrize Names Type (TOML)

Source: https://docs.astral.sh/ruff/settings

Specifies the expected format for multiple argument names in `@pytest.mark.parametrize`. Supported types are `csv` (comma-separated string), `tuple` (default), and `list`.

```toml
[tool.ruff.lint.flake8-pytest-style]
parametrize-names-type = "list"

```

```toml
[lint.flake8-pytest-style]
parametrize-names-type = "list"

```

--------------------------------

### Detecting Pickle Usage for Deserialization (Python)

Source: https://docs.astral.sh/ruff/rules/suspicious-pickle-usage

This snippet demonstrates the insecure usage of the `pickle` module to load data from a file. It is flagged by the S301 rule due to the potential for arbitrary code execution when deserializing untrusted data.

```python
import pickle

with open("foo.pickle", "rb") as file:
    foo = pickle.load(file)

```

--------------------------------

### Fix Empty Abstract Method Without Decorator (Python)

Source: https://docs.astral.sh/ruff/rules/empty-method-without-abstract-decorator

This snippet demonstrates the incorrect and correct way to define an empty method within an abstract base class. The incorrect version lacks the necessary @abstractmethod decorator, while the corrected version includes it, properly defining the method as abstract. This rule helps prevent potential bugs arising from accidentally empty abstract methods.

```python
from abc import ABC


class Foo(ABC):
    def method(self): ...

```

```python
from abc import ABC, abstractmethod


class Foo(ABC):
    @abstractmethod
    def method(self): ...

```

--------------------------------

### Disable SSH Host Key Verification in Paramiko (Python)

Source: https://docs.astral.sh/ruff/rules/ssh-no-host-key-verification

This snippet demonstrates the insecure practice of disabling SSH host key verification using Paramiko's AutoAddPolicy. It is recommended to avoid this as it exposes users to man-in-the-middle attacks. The corrected version uses RejectPolicy.

```python
from paramiko import client

ssh_client = client.SSHClient()
ssh_client.set_missing_host_key_policy(client.AutoAddPolicy)

```

```python
from paramiko import client

ssh_client = client.SSHClient()
ssh_client.set_missing_host_key_policy(client.RejectPolicy)

```

--------------------------------

### Async function calling blocking os.path method

Source: https://docs.astral.sh/ruff/rules/blocking-path-method-in-async-function

Demonstrates an asynchronous function calling a blocking `os.path.exists` method, which can lead to event loop blocking. This is considered bad practice in asynchronous programming.

```python
import os


async def func():
    path = "my_file.txt"
    file_exists = os.path.exists(path)

```

--------------------------------

### Corrected Self Assignment in Instance Methods (Python)

Source: https://docs.astral.sh/ruff/rules/self-or-cls-assignment

Shows the recommended way to handle additions in an instance method by assigning the result to a new variable. This avoids reassigning 'self', improving code readability and adhering to the PLW0642 linter rule.

```python
class Version:
    def add(self, other):
        new_version = self + other
        return new_version
```

--------------------------------

### Replace Unpack[] with * Operator (Python)

Source: https://docs.astral.sh/ruff/rules/non-pep646-unpack

This snippet demonstrates the non-PEP646-unpack (UP044) rule from Ruff, which flags the use of `typing.Unpack` with square brackets. It suggests replacing this with the `*` operator for unpacking, a change introduced in Python 3.11. While the fix is generally safe, runtime type introspection might differentiate between the two syntaxes.

```python
from typing import Unpack

def foo(*args: Unpack[tuple[int, ...]]) -> None:
    pass

```

```python
def foo(*args: *tuple[int, ...]) -> None:
    pass

```

--------------------------------

### Configure flake8-annotations: Suppress None Returning

Source: https://docs.astral.sh/ruff/settings

Suppresses `ANN200` violations for functions without a return statement or that only return `None`. This setting, defaulting to `false`, reduces noise for functions that implicitly or explicitly return no value.

```toml
[tool.ruff.lint.flake8-annotations]
suppress-none-returning = true
```

```ini
[lint.flake8-annotations]
suppress-none-returning = true
```

--------------------------------

### Python - Add return type annotation to public function

Source: https://docs.astral.sh/ruff/rules/missing-return-type-undocumented-public-function

This code snippet demonstrates the fix for the ANN201 rule. It shows a Python function 'add' that initially lacks a return type annotation and then shows the corrected version with explicit integer type hints for parameters and the return value. This improves code clarity and enables static type checking.

```python
def add(a, b):
    return a + b
```

```python
def add(a: int, b: int) -> int:
    return a + b
```

--------------------------------

### Ruff PLE0305: Correct __index__ implementation (Python)

Source: https://docs.astral.sh/ruff/rules/invalid-index-return-type

This code snippet shows the correct way to implement the __index__ method, ensuring it returns an integer value. Adhering to this pattern prevents runtime errors and ensures predictable behavior.

```python
class Foo:
    def __index__(self):
        return 2

```

--------------------------------

### Fix Incorrect `default_factory` Keyword Argument in `defaultdict` (Python)

Source: https://docs.astral.sh/ruff/rules/default-factory-kwarg

This snippet demonstrates the incorrect usage of `default_factory` as a keyword argument when initializing a `defaultdict`. The `defaultdict` constructor requires the factory callable to be a positional argument. Using it as a keyword argument results in the factory itself being added as an initial entry, rather than setting the default behavior.

```python
from collections import defaultdict

defaultdict(default_factory=int)
defaultdict(default_factory=list)
```

--------------------------------

### Avoid mutable default in dict.fromkeys (Python)

Source: https://docs.astral.sh/ruff/rules/mutable-fromkeys-value

Demonstrates the problematic behavior of using a mutable object (list) as a default value with `dict.fromkeys`. When one list is modified, all entries are affected due to shared instance. This rule is marked as unsafe because the fix changes program behavior.

```python
cities = dict.fromkeys(["UK", "Poland"], [])
cities["UK"].append("London")
cities["Poland"].append("Poznan")
print(cities)  # {'UK': ['London', 'Poznan'], 'Poland': ['London', 'Poznan']}
```

--------------------------------

### Detect Unused Method Arguments in Python

Source: https://docs.astral.sh/ruff/rules/unused-method-argument

This Python code snippet demonstrates the detection of unused arguments in instance method definitions. It highlights a common pattern where arguments are defined but not utilized, which can lead to confusion. The rule is part of the flake8-unused-arguments linter and is integrated into Ruff.

```python
class Class:
    def foo(self, arg1, arg2):
        print(arg1)


```

```python
class Class:
    def foo(self, arg1):
        print(arg1)


```

--------------------------------

### Detect Insecure SNMPv1/v2 Usage (Python)

Source: https://docs.astral.sh/ruff/rules/snmp-insecure-version

This snippet demonstrates how to identify the use of insecure SNMPv1 or SNMPv2 protocols using the PySNMP library. It highlights the vulnerable configuration `mpModel=0` which corresponds to SNMPv1 or SNMPv2, and shows the secure alternative `mpModel=2` for SNMPv3. This check is derived from the flake8-bandit linter.

```python
from pysnmp.hlapi import CommunityData

# Insecure usage (SNMPv1 or SNMPv2)
CommunityData("public", mpModel=0)
```

```python
from pysnmp.hlapi import CommunityData

# Secure alternative (SNMPv3)
CommunityData("public", mpModel=2)
```
